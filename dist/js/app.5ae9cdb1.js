(function(e){function t(t){for(var a,o,i=t[0],c=t[1],l=t[2],u=0,m=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},s=[];function o(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a9ac7abc"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,a){r=n[e]=[t,a]}));t.push(r[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.src=o(e);var l=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(u);var r=n[e];if(0!==r){if(r){var a=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+s+")",l.name="ChunkLoadError",l.type=a,l.request=s,r[1](l)}n[e]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"055a":function(e,t,r){},"0959":function(e,t,r){},"0bbe":function(e,t,r){},"0cdb":function(e,t,r){},1751:function(e,t,r){"use strict";var a=r("8165"),n=r.n(a);n.a},"19ab":function(e,t,r){"use strict";var a=r("20fc"),n=r.n(a);n.a},"19bc":function(e,t,r){"use strict";var a=r("0cdb"),n=r.n(a);n.a},"1a54":function(e,t,r){e.exports=r.p+"img/dummy-product.d14717b6.jpg"},"207a":function(e,t,r){"use strict";var a=r("cea3"),n=r.n(a);n.a},"20fc":function(e,t,r){},"24ee":function(e,t,r){"use strict";var a=r("aad9"),n=r.n(a);n.a},"2a37":function(e,t,r){"use strict";var a=r("f1b4"),n=r.n(a);n.a},"2af0":function(e,t,r){"use strict";var a=r("2f02"),n=r.n(a);n.a},"2b45":function(e,t,r){},"2f02":function(e,t,r){},3170:function(e,t,r){},4518:function(e,t,r){},4678:function(e,t,r){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdabc","./en-SG.js":"cdabc","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=s(e);return r(t)}function s(e){if(!r.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=s,e.exports=n,n.id="4678"},"4fdd":function(e,t,r){"use strict";var a=r("e2e0"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("router-view"),r("v-snackbar",{attrs:{right:!0,timeout:6e3,top:!0,color:"success"},model:{value:e.snackbarMasterProduct,callback:function(t){e.snackbarMasterProduct=t},expression:"snackbarMasterProduct"}},[e._v(" Import master product done "),r("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.snackbarMasterProduct=!1}}},[e._v("Close")])],1),r("v-snackbar",{attrs:{right:!0,timeout:6e3,top:!0,color:"success"},model:{value:e.snackbarProduct,callback:function(t){e.snackbarProduct=t},expression:"snackbarProduct"}},[e._v(" Import product done "),r("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.snackbarProduct=!1}}},[e._v("Close")])],1),r("v-snackbar",{attrs:{right:!0,timeout:6e3,top:!0,color:"success"},model:{value:e.snackbarUser,callback:function(t){e.snackbarUser=t},expression:"snackbarUser"}},[e._v(" Import user done "),r("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.snackbarUser=!1}}},[e._v("Close")])],1)],1)},s=[],o=(r("96cf"),r("1da1")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",[r("v-app-bar",{attrs:{app:""}},[e._t("back"),r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){e.drawer=!e.drawer}}},[r("v-icon",[e._v("mdi-menu")])],1),r("v-spacer",{staticClass:"px-2"},[e._t("body")],2),e._t("search"),"depot"===e.currentUser.role.name?r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){e.$router.push({name:"cart"}).catch((function(e){}))}}},[r("v-icon",[e._v("mdi-cart")]),r("v-badge",{directives:[{name:"show",rawName:"v-show",value:e.cartsCount>0,expression:"cartsCount > 0"}],staticClass:"ml-2 mb-2",attrs:{color:"primary_green_1 darken-1",overlap:""},scopedSlots:e._u([{key:"badge",fn:function(){return[r("span",[e._v(e._s(e.cartsCount))])]},proxy:!0}],null,!1,3299368666)})],1):e._e(),e._t("storefront"),e._t("right")],2),r("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-row",{staticClass:"primary_red_1"},[r("v-col",[r("v-list",{staticClass:"pt-10"},[r("v-list-item",{on:{click:e.goToProfile}},[r("v-avatar",{attrs:{size:"48"}},["-"===e.currentUser.image?r("v-img",{attrs:{src:e.avatar,"aspect-ratio":"1"}}):e._e(),"-"!==e.currentUser.image?r("v-img",{attrs:{src:e.imageApi(e.currentUser.image),"aspect-ratio":"1"}}):e._e()],1)],1)],1),r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",{staticClass:"title white--text"},[e._v(e._s(e.currentUser.name))]),r("v-list-item-subtitle",{staticClass:"white--text"},[e._v(e._s(e.currentUser.email))])],1)],1)],1)],1),"admin"===e.currentUser.role.name?r("v-row",e._l(e.adminDrawerList,(function(t){return r("v-col",{key:t._id,staticClass:"py-0"},[r("v-list",{attrs:{dense:"",nav:""}},e._l(t.listMenu,(function(t){return r("v-list-item",{key:t._id,attrs:{link:""},on:{click:function(r){return e.navigate(t)}}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1),r("v-divider")],1)})),1):e._e(),r("v-list",{attrs:{dense:"",nav:""}},e._l(e.drawerRole,(function(t){return r("v-list-item",{key:t._id,attrs:{link:""},on:{click:function(r){return e.navigate(t)}}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.name))])],1)],1)})),1),r("v-divider")],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.logoutDialog,callback:function(t){e.logoutDialog=t},expression:"logoutDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Logout")]),r("v-card-text",[e._v("Are you sure to logout?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.logoutDialog=!1}}},[e._v("no")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.logout}},[e._v("yes")])],1)],1)],1)],1)},c=[],l=(r("99af"),r("4de4"),r("caad"),r("b0c0"),r("2532"),r("bf8f")),u=r.n(l),d=r("ed18"),m=r.n(d);m.a.config();var p="https://api.pesandisini.id",v=r("c1df"),f=r.n(v),h=r("bc3a"),g=r.n(h),b=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("auth"),!t){e.next=18;break}if(r=JSON.parse(t),a=r.exp,n=Date.now().valueOf(),a=f.a.unix(a),n=f()(n),!(n>=a)){e.next=15;break}return console.log("expired"),e.next=10,x();case 10:return s=e.sent,console.log("refresh",s),e.abrupt("return",s);case 15:return e.abrupt("return",!0);case 16:e.next=19;break;case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={method:"POST",url:"".concat(p,"/api/auth/refresh-token"),data:{token:r}},e.next=5,g()(a);case 5:return n=e.sent,s=n.data,localStorage.setItem("auth",JSON.stringify(s)),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e["catch"](0),console.log(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),_=r("2f62"),k={mounted:function(){this.initLauncApp()},data:function(){return{user:{role:{}},drawer:null,title:0,drawerList:[{_id:0,name:"Beranda",path:"/",icon:"mdi-home",role:["depot","dealer"]},{_id:1,name:"Profil toko",path:"/storefront",icon:"mdi-storefront",role:["dealer"]},{_id:2,name:"Pesan barang",path:"/orders",icon:"mdi-archive",role:["depot"]},{_id:3,name:"Daftar pesanan",path:"/list-orders",icon:"mdi-view-list",role:["depot"]},{_id:4,name:"Histori poin",path:"/user-points",icon:"mdi-star",role:["depot","dealer"]},{_id:5,name:"Daftar pesanan masuk",path:"/list-incoming-orders",icon:"mdi-playlist-edit",role:["dealer"]},{_id:6,name:"Daftar barang dijual",path:"/list-sale-items",icon:"mdi-playlist-check",role:["dealer"]},{_id:8,name:"Logout",path:"/logout",icon:"mdi-logout",role:["depot","dealer","admin"]}],adminDrawerList:[{_id:0,listMenu:[{_id:0,name:"Featured",path:"/featured",icon:"mdi-star"},{_id:1,name:"Setting",path:"/settings",icon:"mdi-star"},{_id:2,name:"Report",path:"/report",icon:"mdi-star"},{_id:3,name:"Slide",path:"/slides",icon:"mdi-star"}]},{_id:1,listMenu:[{_id:0,name:"Master Product",path:"/master-products",icon:"mdi-star"},{_id:2,name:"Product",path:"/products",icon:"mdi-star"},{_id:3,name:"Product Category",path:"/product-categories",icon:"mdi-star"},{_id:4,name:"Product Brand",path:"/product-brands",icon:"mdi-star"},{_id:6,name:"Unit",path:"/units",icon:"mdi-star"}]},{_id:2,listMenu:[{_id:0,name:"Purchase",path:"/purchases",icon:"mdi-star"},{_id:1,name:"Purchase Item",path:"/purchase-items",icon:"mdi-star"},{_id:2,name:"Point",path:"/points",icon:"mdi-star"}]},{_id:3,listMenu:[{_id:0,name:"User",path:"/users",icon:"mdi-star"}]},{_id:5,listMenu:[{_id:0,name:"Store",path:"/stores",icon:"mdi-star"},{_id:1,name:"Address",path:"/addresses",icon:"mdi-star"}]}],carts:[],avatar:u.a,logoutDialog:!1}},methods:{initLauncApp:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!r){t.next=12;break}if(e.loadCurrentUser(),e.setCurrentUser(JSON.parse(localStorage.getItem("currentUser"))),e.user=JSON.parse(localStorage.getItem("currentUser")),"dealer"!=e.user.role){t.next=12;break}return t.next=10,b();case 10:a=t.sent,1==a&&e.$store.dispatch("setCarts");case 12:case"end":return t.stop()}}),t)})))()},loadCurrentUser:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users/").concat(e._id),s={headers:a,method:"GET",url:n};return g()(s)},e.next=3,b();case 3:if(r=e.sent,1!=r){e.next=16;break}return e.next=7,JSON.parse(localStorage.getItem("currentUser"));case 7:return a=e.sent,e.next=10,t(a);case 10:for(o in n=e.sent,s=n.data.user,s)a[o]=s[o];return e.next=15,localStorage.setItem("currentUser",JSON.stringify(a));case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})))()},setCurrentUser:function(e){this.$store.commit("SET_CURRENT_USER",e)},goToProfile:function(){this.$router.push({name:"profile",params:{}}).catch((function(e){console.log("current location")}))},crudMenuClick:function(e){console.log(e),alert(e.name)},logout:function(){console.log("logout"),localStorage.removeItem("auth"),this.logoutDialog=!1,this.$router.push({name:"login"})},navigate:function(e){"/logout"===e.path?this.logoutDialog=!0:(this.title=e._id,this.$router.push(e.path).catch((function(e){console.log("current location")})),"lg"===this.$vuetify.breakpoint.name||"xl"===this.$vuetify.breakpoint.name?this.drawer=!0:this.drawer=!1)},imageApi:function(e){return"".concat(p,"/").concat(e)}},computed:{drawerRole:function(){var e=JSON.parse(localStorage.getItem("currentUser")),t=e.role,r=this.drawerList.filter((function(e){return e.role.includes(t.name)}));return r},cartBadge:function(){var e=this.carts.filter((function(e){return e.cartItem.length>0}));return e},cartsCount:function(){var e=this.$store.state.cart.carts.count;return e},currentUser:function(){var e=this.$store.state.currentUser.currentUser;return e}}},I=k,y=r("2877"),w=r("6544"),C=r.n(w),P=r("40dc"),S=r("8212"),O=r("4ca6"),j=r("8336"),R=r("b0af"),V=r("99d9"),D=r("62ad"),T=r("169a"),A=r("ce7e"),E=r("132d"),N=r("adda"),M=r("8860"),z=r("da13"),U=r("5d23"),L=r("34c3"),B=r("f774"),$=r("0fd9"),F=r("2fa4"),J=Object(y["a"])(I,i,c,!1,null,null,null),q=J.exports;C()(J,{VAppBar:P["a"],VAvatar:S["a"],VBadge:O["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VDialog:T["a"],VDivider:A["a"],VIcon:E["a"],VImg:N["a"],VList:M["a"],VListItem:z["a"],VListItemContent:U["a"],VListItemIcon:L["a"],VListItemSubtitle:U["b"],VListItemTitle:U["c"],VNavigationDrawer:B["a"],VRow:$["a"],VSpacer:F["a"]});var G=r("8aa50"),H=r.n(G),W={apiKey:"AIzaSyA84xxJ1OQVV_fisYJRGs8Bh8OCEIAdv7k",authDomain:"pesan-di-sini.firebaseapp.com",databaseURL:"https://pesan-di-sini.firebaseio.com",projectId:"pesan-di-sini",storageBucket:"pesan-di-sini.appspot.com",messagingSenderId:"282825789090",appId:"1:282825789090:web:a9e1a8f159370a08a191fb",measurementId:"G-BVWV378VSS"},Q=H.a.initializeApp(W),K=Q,Y={name:"App",components:{Navbar:q},mounted:function(){this.getInitStateMasterProduct(),this.getListenChangeMasterProduct(),this.getListenChangeProduct(),this.getListenChangeUser()},data:function(){return{snackbarMasterProduct:!1,snackbarProduct:!1,snackbarUser:!1}},methods:{getInitStateMasterProduct:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("master-product").once("child_added",(function(e){console.log("init",e.val())}));case 1:case"end":return e.stop()}}),e)})))()},getListenChangeMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("master-product").on("child_changed",(function(t){console.log("change",t.val()),!1===t.val().isImporting&&(e.snackbarMasterProduct=!0)}));case 1:case"end":return t.stop()}}),t)})))()},getListenChangeProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("product").on("child_changed",(function(t){console.log("change",t.val()),!1===t.val().isImporting&&(e.snackbarProduct=!0)}));case 1:case"end":return t.stop()}}),t)})))()},getListenChangeUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("user").on("child_changed",(function(t){console.log("change",t.val()),!1===t.val().isImporting&&(e.snackbarUser=!0)}));case 1:case"end":return t.stop()}}),t)})))()}},watch:{$route:function(e,t){document.title=e.meta.title||"Astra SCM"}}},Z=Y,X=r("7496"),ee=r("2db4"),te=Object(y["a"])(Z,n,s,!1,null,null,null),re=te.exports;C()(te,{VApp:X["a"],VBtn:j["a"],VSnackbar:ee["a"]});r("d3b7");var ae=r("2909"),ne=r("8c4f"),se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{scopedSlots:e._u([{key:"body",fn:function(){return["dealer"==e.$store.state.currentUser.currentUser.role.name?r("v-toolbar-title",[e._v("Pesan Di Sini")]):e._e(),"depot"==e.$store.state.currentUser.currentUser.role.name?r("v-text-field",{staticClass:"mt-7",attrs:{"append-icon":"mdi-magnify",dense:"",outlined:"",rounded:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/orders")},input:function(t){return e.$router.push("/orders")}}}):e._e()]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"image"}}),r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-two-line"}})],1)})),1),r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-boilerplate",{attrs:{type:"list-item-avatar-two-line"}})],1)})),1)],1)],1):e._e(),e.isLoading||"dealer"!=e.currentUser.role.name?e._e():r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Promo terbaru")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1),r("v-row",[r("v-carousel",{staticClass:"ma-3",attrs:{continuous:"",interval:3e3,cycle:"",height:"100%","hide-delimiters":""}},e._l(e.carousels,(function(t){return r("v-carousel-item",{key:t._id},[r("v-sheet",{attrs:{tile:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(t.image),"aspect-ratio":"3"}})],1),r("div",{staticClass:"pa-2"},[r("div",[e._v(e._s(t.name))])])],1)],1)})),1)],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Produk terlaris Anda")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1),r("v-row",{staticClass:"px-1"},e._l(e.mostSoldDealers,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{outlined:"",flat:"",hover:""},on:{click:function(r){return e.$router.push({name:"itemDetail",params:{catalogId:t.masterProductId._id}})}}},[!t.masterProductId||!t.masterProductId.image&&0===t.masterProductId.image.length?r("v-img",{attrs:{alt:e.lazyImg,src:e.lazyImg,"aspect-ratio":"1.78",contain:""}}):e._e(),t.masterProductId&&t.masterProductId.image&&t.masterProductId.image.length>0?r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(t.masterProductId.image[0].image),"aspect-ratio":"1.78",contain:""}}):e._e(),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProductId&&t.masterProductId.name?t.masterProductId.name:"Nama produk tidak tersedia"))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProductId&&t.masterProductId?t.masterProductId.localShopName:"Nama bengkel tidak tersedia"))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProductId&&t.masterProductId.partCode?t.masterProductId.partCode:"Kode produk tidak tersedia"))])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.masterProductId&&t.masterProductId.price?t.masterProductId.price:0}))+" ")])])],1)],1)})),1)],1)],1),e.isLoading||"depot"!=e.currentUser.role.name?e._e():r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Promo terbaru")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1),r("v-row",[r("v-carousel",{staticClass:"ma-3",attrs:{continuous:"",interval:3e3,cycle:"",height:"100%","hide-delimiters":""}},e._l(e.carousels,(function(t){return r("v-carousel-item",{key:t._id},[r("v-sheet",{attrs:{tile:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(t.image),"aspect-ratio":"3"}})],1),r("div",{staticClass:"pa-2"},[r("div",[e._v(e._s(t.name))])])],1)],1)})),1)],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Produk pilihan untukmu")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1),r("v-row",{staticClass:"px-1"},e._l(e.recomendations,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{outlined:"",flat:"",hover:""},on:{click:function(r){return e.goToItemDetail(t)}}},[0===t.masterProduct.image.length?r("v-img",{attrs:{alt:e.lazyImg,src:e.lazyImg,"aspect-ratio":"1.78",contain:""}}):e._e(),t.masterProduct.image.length>0?r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(t.masterProduct.image[0].image),"aspect-ratio":"1.78",contain:""}}):e._e(),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProduct.name))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProduct.localShopName))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.masterProduct.partCode))])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.masterProduct.price}))+" ")])])],1)],1)})),1)],1)],1)],1)},oe=[],ie=(r("3ca3"),r("ddb0"),r("5530")),ce=r("3f87"),le=(r("ac1f"),r("25f0"),r("5319"),{methods:{numberWithPeriod:function(e){var t=e.currency,r=e.separator,a=e.number;return t+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,r)}}}),ue={mounted:function(){var e=this;this.currentUser=JSON.parse(localStorage.getItem("currentUser")),"dealer"==this.currentUser.role.name?Promise.all([this.loadMostSoldDealer(),this.loadSlide()]).then((function(){e.isLoading=!1})):"depot"==this.currentUser.role.name?Promise.all([this.loadSlide(),this.loadSelectedProduct(),this.loadCatalog(),this.loadNearbySupplier()]).then((function(){e.isLoading=!1})):this.$router.push("/featured"),console.log("current User",this.$store.state.currentUser)},data:function(){return{mostSoldDealers:[],currentUser:{},loginSuccessDialog:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3],loading:!0,lazyImg:u.a,drawer:null,catalogs:[],catalog:{page:0,perPage:4},carousels:[],recomendations:[],nearbySuppliers:[{_id:0,userId:{storeId:{_id:"123",name:"Store dummy 1",image:u.a},addressId:{_id:"123",name:"Address dummy 1"}}},{_id:1,userId:{storeId:{_id:"123",name:"Store dummy 2",image:u.a},addressId:{_id:"123",name:"Address dummy 2"}}}],mostSoldDealer:{page:0,perPage:6},mostSold:{page:0,perPage:4},supplier:{roleName:"dealer",page:0,perPage:2}}},methods:{goToItemDetail:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$router.push({name:"itemDetail",params:{catalogId:e.masterProduct._id}});case 1:case"end":return r.stop()}}),r)})))()},userClickProduct:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/clicked-products"),s={headers:a,method:"POST",url:n,data:e};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r(e);case 7:n=t.sent,console.log("clicked product created",n.data);case 9:case"end":return t.stop()}}),t)})))()},goToAbout:function(){this.$router.push("/about")},goToLogin:function(){this.$router.push({name:"login"})},logout:function(){localStorage.removeItem("token"),this.$router.push({name:"login"})},loadCatalog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e.catalog,s=n.page,o=n.perPage,i="".concat(p,"/api/catalogs?page=").concat(s,"&perPage=").concat(o),c={headers:a,method:"GET",url:i};return g()(c)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.catalogs=[].concat(Object(ae["a"])(e.catalogs),Object(ae["a"])(n.data.catalogs)),console.log("load catalogs",n.data);case 10:case"end":return t.stop()}}),t)})))()},loadMostSoldDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=JSON.parse(localStorage.getItem("currentUser")),s=(n._id,n.customerId),o=e.mostSoldDealer,i=o.page,c=o.perPage,l="".concat(p,"/api/most-solds?customerId=").concat(s,"&page=").concat(i,"&perPage=").concat(c),u={headers:a,method:"GET",url:l};return g()(u)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.mostSoldDealers=n.data.mostSolds,console.log("load most sold dealer",e.mostSoldDealers);case 10:case"end":return t.stop()}}),t)})))()},loadMostSold:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e.mostSold,s=n.page,o=n.perPage,i="".concat(p,"/api/most-solds?page=").concat(s,"&perPage=").concat(o),c={headers:a,method:"GET",url:i};return g()(c)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.recomendations=n.data.mostSolds,console.log("load most sold",n.data);case 10:case"end":return t.stop()}}),t)})))()},loadSelectedProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/selected-products"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.recomendations=n.data.selectedProducts.filter((function(e){return null!=e})),console.log("load selected product",n.data);case 10:case"end":return t.stop()}}),t)})))()},loadNearbySupplier:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e.supplier,s=n.roleName,o=n.page,i=n.perPage,c="".concat(p,"/api/suppliers?roleName=").concat(s,"&page=").concat(o,"&perPage=").concat(i),l={headers:a,method:"GET",url:c};return g()(l)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,console.log(n.data),e.nearbySuppliers=n.data.suppliers;case 10:case"end":return t.stop()}}),t)})))()},loadSlide:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/slides?isActive=true"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.carousels=n.data.slides,console.log("load slide",n.data);case 10:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},computed:{name:function(){return this.data}},components:{Navbar:q,VClamp:ce["a"],VBoilerplate:{functional:!0,render:function(e,t){var r=t.data,a=t.props,n=t.children;return e("v-skeleton-loader",Object(ie["a"])({},r,{props:Object(ie["a"])({boilerplate:!0,elevation:2},a)}),n)}}},mixins:[le]},de=ue,me=r("5e66"),pe=r("3e35"),ve=r("a523"),fe=r("a75b"),he=r("a722"),ge=r("8dd9"),be=r("3129"),xe=r("8654"),_e=r("2a7f"),ke=Object(y["a"])(de,se,oe,!1,null,null,null),Ie=ke.exports;C()(ke,{VApp:X["a"],VCard:R["a"],VCarousel:me["a"],VCarouselItem:pe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSheet:ge["a"],VSkeletonLoader:be["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-container",{attrs:{"fill-height":""}},[r("v-layout",{staticClass:"py-3",attrs:{"justify-center":"","align-center":""}},[r("v-card",{staticClass:"px-3 pt-12 pb-1 text-center",attrs:{flat:e.$vuetify.breakpoint.xsOnly,"min-width":"320","max-width":"360"}},[r("v-avatar",{staticClass:"mb-10",attrs:{tile:"",size:"200"}},[r("v-img",{attrs:{src:e.logo}})],1),r("v-layout",{staticClass:"pa-2",attrs:{"justify-center":""}},[r("v-card",{staticClass:"pa-2",attrs:{flat:""}},[r("div",{staticClass:"primary_red_1--text font-weight-bold"},[e._v(e._s(e.loginError))])])],1),r("v-text-field",{staticClass:"mb-2",attrs:{dense:"",type:"email",outlined:"",rules:[e.rules.required,e.rules.emailMatch],name:"email",label:"Email",hint:"example@email.com",color:"primary_red_1","error-messages":e.emailErrorMessage,error:e.emailError},on:{change:e.emailOnChange},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{staticClass:"mb-2",attrs:{dense:"",outlined:"","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",rules:[e.rules.required,e.rules.min],type:e.showPassword?"text":"password",name:"password",label:"Password",hint:"At least 6 characters",color:"primary_red_1","error-messages":e.passwordErrorMessage,error:e.passwordError},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.login(t):null},change:e.passwordOnChange,"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-btn",{attrs:{dark:"",block:"",color:"primary_red_1 mb-5"},on:{click:e.login}},[e._v("login")])],1)],1),r("v-dialog",{attrs:{"max-width":"300"},model:{value:e.loginFailed,callback:function(t){e.loginFailed=t},expression:"loginFailed"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Login failed")]),r("v-card-text",[e._v("Email or password are invalid")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.loginFailed=!1}}},[e._v("ok")])],1)],1)],1)],1)],1)},we=[],Ce=r("cf05"),Pe=r.n(Ce),Se={mounted:function(){},data:function(){return{logo:Pe.a,loginFailed:!1,loginError:"",email:"",password:"",emailErrorMessage:"",passwordErrorMessage:"",emailError:!1,passwordError:!1,showPassword:!1,rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}}}},methods:{login:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/,r.test(e.email)||(e.emailErrorMessage="The email you entered is not valid"),e.password.length<6&&(e.passwordErrorMessage="Min 6 characters"),!(r.test(e.email)&&e.password.length>5)){t.next=22;break}return t.prev=4,t.next=7,g()({url:"".concat(p,"/api/auth/login"),method:"POST",data:{email:e.email,password:e.password}});case 7:a=t.sent,localStorage.setItem("auth",JSON.stringify(a.data.auth)),localStorage.setItem("currentUser",JSON.stringify(a.data.user)),n=a.data,s=n.user,"admin"==s.role.name?e.$router.push({name:"featured"}):e.$router.push({name:"home"}),t.next=22;break;case 15:t.prev=15,t.t0=t["catch"](4),console.log("status code",t.t0),e.emailError=!0,e.passwordError=!0,e.loginFailed=!0,e.loginError="Email or password invalid!";case 22:case"end":return t.stop()}}),t,null,[[4,15]])})))()},emailOnChange:function(){var e=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;e.test(this.email)&&(this.emailErrorMessage="")},passwordOnChange:function(){this.password.length>5&&(this.passwordErrorMessage="")}}},Oe=Se,je=Object(y["a"])(Oe,ye,we,!1,null,null,null),Re=je.exports;C()(je,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VContainer:ve["a"],VDialog:T["a"],VImg:N["a"],VLayout:he["a"],VSpacer:F["a"],VTextField:xe["a"]});var Ve=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Pesan barang")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item"}})],1)],1),r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-two-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-text-field",{attrs:{rounded:"",color:"primary_red_1",outlined:"",dense:""},on:{keyup:[e.filterSugestions,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchCatalog(t)}]},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-icon",[e._v("mdi-magnify")])]},proxy:!0}],null,!1,1510278474),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1),e.showSuggestions?r("v-row",{staticStyle:{position:"absolute","z-index":"1000","margin-top":"-12px"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"12"}},[r("v-card",[r("scroll-bar",{staticClass:"warp"},[r("v-list",{attrs:{disabled:!1}},[r("v-list-item-group",{attrs:{color:"primary_red_1"}},e._l(e.sugestions,(function(t){return r("v-list-item",{key:t.id,attrs:{inactive:!1}},[r("v-list-item-content",{on:{click:function(r){return e.sugestClick(t)}}},[r("v-list-item-title",[e._v(e._s(t.name.toLowerCase()))])],1)],1)})),1)],1)],1)],1)],1)],1):e._e(),e._e(),r("v-row",{staticClass:"mx-0",staticStyle:{"margin-top":"-100"}},[r("div",[!0===e.searching?r("div",[e._v('pencarian "'+e._s(e.keyword)+'"')]):e._e(),!0===e.searching?r("div",[e._v(e._s(e.searchResult)+" hasil")]):e._e()]),r("v-spacer"),!0===e.searching?r("v-btn",{attrs:{text:"",small:"",fab:""},on:{click:e.closeSearch}},[r("v-icon",[e._v("mdi-close")])],1):e._e()],1),r("v-row",{staticClass:"px-1"},e._l(e.catalogs,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{outlined:"",flat:"",hover:""},on:{click:function(r){return e.goToItemDetail(t)}}},[0===t.image.length?r("v-img",{attrs:{alt:e.dummyProduct,src:e.dummyProduct,"aspect-ratio":"1.78",contain:""}}):e._e(),t.image.length>0?r("v-img",{attrs:{alt:e.dummyProduct,src:e.apiImage(t.image[0].image),"aspect-ratio":"1.78",contain:""}}):e._e(),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.name))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.localShopName))])],1),r("div",{staticClass:"caption"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.partCode))])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price}))+" ")])])],1)],1)})),1),r("v-row",[r("v-col",{staticClass:"text-center",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{attrs:{text:"",dark:"",dense:"",color:"primary_red_1"},on:{click:e.reloadCatalog}},[e._v("load more")])],1)],1)],1)],1)],1)},De=[],Te=(r("4160"),r("d81d"),r("841c"),r("159b"),r("302a")),Ae=r("1a54"),Ee=r.n(Ae),Ne={components:{Navbar:q,VClamp:ce["a"],scrollBar:Te["a"]},mounted:function(){var e=this;Promise.all([this.getSetting(),this.getCurrentUser()]).then((function(){e.setting.lockDepotToDealer?e.loadCatalogDealer().then((function(){e.isLoading=!1})):e.loadCatalog().then((function(){e.isLoading=!1}))})),this.scroll()},data:function(){return{setting:{_id:"",pointMultiplier:0,lockDepotToDealer:!0},search:"",sugestionList:[{id:1,name:"cam chain kit"},{id:2,name:"con rod kit"},{id:3,name:"drive chain kit"},{id:4,name:"pad set"},{id:5,name:"crank case"},{id:6,name:"cylinder"},{id:7,name:"gasket"},{id:8,name:"crank shaft"}],sugestions:[],showSuggestions:!1,page:0,perPage:10,skeletonLoaderItem:[0,1,2,3,4,5],isLoading:!0,keyword:"",searchResult:0,searching:!1,lazyImg:u.a,dummyProduct:Ee.a,headerBody:"search",catalogs:[],timer:null,currentUser:{dealerCustomerId:"",email:"",image:"",name:"",phone:"",role:{name:""},storeId:null}}},methods:{getCurrentUser:function(){var e=localStorage.getItem("currentUser"),t=JSON.parse(e);this.currentUser=t,console.log(t)},getSetting:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/settings"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.setting=n.data,console.log("setting",e.setting);case 10:case"end":return t.stop()}}),t)})))()},goToItemDetail:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=JSON.parse(localStorage.getItem("currentUser")),n={userId:a._id,customerId:a.customerId,masterProductId:e._id},console.log(e),console.log(n),t.$router.push({name:"itemDetail",params:{catalogId:e._id}});case 5:case"end":return r.stop()}}),r)})))()},userClickProduct:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/clicked-products"),s={headers:a,method:"POST",url:n,data:e};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r(e);case 7:n=t.sent,console.log("clicked product created",n.data);case 9:case"end":return t.stop()}}),t)})))()},loadCatalogDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/catalogs/dealers"),s={params:{keyword:e.keyword,isSale:!0,customerId:e.currentUser.dealerCustomerId,perPage:e.perPage,page:e.page},headers:a,method:"GET",url:n};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=12;break}return t.next=7,r();case 7:n=t.sent,console.log(n),e.catalogs=[].concat(Object(ae["a"])(e.catalogs),Object(ae["a"])(n.data.catalogs)),e.searchResult=e.searchResult+n.data.count,console.log("dealer catalogs",e.catalogs);case 12:case"end":return t.stop()}}),t)})))()},filterSugestions:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){console.log("debouncing"),e.keyword.length,e.searchCatalog()}),1e3)},sugestClick:function(e){console.log(e.name.toLowerCase()),this.search=e.name.toLowerCase(),this.showSuggestions=!1,this.keyword=e.name.toLowerCase(),this.catalogs=[],this.loadCatalog()},searchBar:function(){this.headerBody="search"},apiImage:function(e){return"".concat(p,"/").concat(e)},closeSearch:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.page=0,e.perPage=10,e.searching=!1,e.catalogs=[],e.keyword="",e.loadCatalog();case 6:case"end":return t.stop()}}),t)})))()},searchCatalog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.showSuggestions=!1,0!=e.keyword.length){t.next=5;break}e.closeSearch(),t.next=17;break;case 5:if(e.searchResult=0,e.searching=!0,e.page=0,e.perPage=10,e.catalogs=[],!e.setting.lockDepotToDealer){t.next=15;break}return t.next=13,e.loadCatalogDealer();case 13:t.next=17;break;case 15:return t.next=17,e.loadCatalog();case 17:case"end":return t.stop()}}),t)})))()},scroll:function(){var e=this;window.onscroll=function(){var t=document.documentElement.scrollTop+window.innerHeight===document.documentElement.offsetHeight;t&&e.reloadCatalog()}},loadCatalog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/catalogs"),s={params:{page:e.page,perPage:e.perPage,keyword:e.keyword},headers:a,method:"GET",url:n};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=11;break}return t.next=7,r();case 7:n=t.sent,e.catalogs=[].concat(Object(ae["a"])(e.catalogs),Object(ae["a"])(n.data.catalogs)),e.searchResult=e.searchResult+n.data.count,console.log("master",e.catalogs);case 11:case"end":return t.stop()}}),t)})))()},loadMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/master-products"),n={params:{select:"name localShopName partCode"},headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=14;break}return t.next=7,r();case 7:n=t.sent,s=n.data.masterProducts,o=[],s.forEach((function(e){o.includes(e.name)||o.push(e.name)})),s.forEach((function(e){o.includes(e.localShopName)||o.push(e.localShopName)})),s.forEach((function(e){o.includes(e.partCode)||o.push(e.partCode)})),e.sugestionList=o.map((function(e,t){return{id:t,name:e}}));case 14:case"end":return t.stop()}}),t)})))()},reloadCatalog:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.page=e.page+1,!e.setting.lockDepotToDealer){t.next=7;break}return t.next=4,e.loadCatalogDealer();case 4:return t.abrupt("return",t.sent);case 7:return t.next=9,e.loadCatalog();case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))()}},computed:{},mixins:[le]},Me=Ne,ze=(r("94f0"),r("1baa")),Ue=Object(y["a"])(Me,Ve,De,!1,null,null,null),Le=Ue.exports;C()(Ue,{VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VIcon:E["a"],VImg:N["a"],VList:M["a"],VListItem:z["a"],VListItemContent:U["a"],VListItemGroup:ze["a"],VListItemTitle:U["c"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var Be=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Daftar pesanan")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1),r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Daftar Pesanan Menunggu ")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:e.toggleWaitingIncomingOrder}},[r("v-icon",[e._v(e._s(1==e.showWaitingIncomingOrder?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),0==e.waitingOrders.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v(" Belum ada pesanan keluar menunggu ")])])],1)],1):e._e(),e.showWaitingIncomingOrder?r("v-row",{staticClass:"px-1"},e._l(e.waitingOrders,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"3"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(r){return e.$router.push({name:"outcomingOrder",params:{purchaseOrderId:t._id}})}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",["-"!==t.sellerId.storeId.image?r("v-img",{attrs:{src:e.apiImage(t.sellerId.storeId.image)}}):e._e(),"-"===t.sellerId.storeId.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.sellerId.storeId.name))])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.subTotal(t.purchaseOrderItem))+" ")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(" "+e._s(t.purchaseOrderItem.length)+" jenis barang "),r("i",{staticClass:"fas fa-jenkins"})])])]),r("v-divider"),r("v-layout",{attrs:{"justify-end":""}},[r("div",{staticClass:"pa-2"},[r("v-chip",{attrs:{outlined:"",small:"",color:e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)}},[r("div",{class:"caption "+e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)+"--text"},[e._v(" "+e._s(e.orderStatusText(t.isConfirmItem,t.isConfirmSendItem,t.isDone))+" ")])])],1)])],1)],1)})),1):e._e(),e.waitingOrders.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.waitingCountAll/e.waitingCount),"total-visible":7},model:{value:e.pageWaiting,callback:function(t){e.pageWaiting=t},expression:"pageWaiting"}})],1):e._e(),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Daftar Pesanan Selesai ")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:e.toggleDoneIncomingOrder}},[r("v-icon",[e._v(e._s(1==e.showDoneIncomingOrder?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),0==e.doneOrders.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v(" Belum ada pesanan keluar selesai ")])])],1)],1):e._e(),e.showDoneIncomingOrder?r("v-row",{staticClass:"px-1"},e._l(e.doneOrders,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"3"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(r){return e.$router.push({name:"outcomingOrder",params:{purchaseOrderId:t._id}})}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",["-"!==t.sellerId.storeId.image?r("v-img",{attrs:{src:e.apiImage(t.sellerId.storeId.image)}}):e._e(),"-"===t.sellerId.storeId.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.sellerId.storeId.name))])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.subTotal(t.purchaseOrderItem))+" ")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(" "+e._s(t.purchaseOrderItem.length)+" jenis barang "),r("i",{staticClass:"fas fa-jenkins"})])])]),r("v-divider"),r("v-layout",{attrs:{"justify-end":""}},[r("div",{staticClass:"pa-2"},[r("v-chip",{attrs:{outlined:"",small:"",color:e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)}},[r("div",{class:"caption "+e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)+"--text"},[e._v(" "+e._s(e.orderStatusText(t.isConfirmItem,t.isConfirmSendItem,t.isDone))+" ")])])],1)])],1)],1)})),1):e._e(),e.doneOrders.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.doneCountAll/e.doneCount),"total-visible":7},model:{value:e.pageDone,callback:function(t){e.pageDone=t},expression:"pageDone"}})],1):e._e()],1)],1)],1)},$e=[],Fe=(r("13d5"),{mounted:function(){var e=this;Promise.all([this.loadWaitingPurchaseOrder(),this.loadDonePurchaseOrder()]).then((function(){e.isLoading=!1}))},data:function(){return{tab:null,items:["Appetizers","Entrees","Deserts","Cocktails"],isLoading:!0,pageWaiting:1,waitingCount:5,waitingCountAll:0,pageDone:1,doneCount:5,doneCountAll:0,lazyImg:u.a,orders:[],waitingOrders:[],doneOrders:[],showWaitingIncomingOrder:!0,showDoneIncomingOrder:!0}},methods:{toggleWaitingIncomingOrder:function(){1==this.showWaitingIncomingOrder?this.showWaitingIncomingOrder=!1:this.showWaitingIncomingOrder=!0},toggleDoneIncomingOrder:function(){1==this.showDoneIncomingOrder?this.showDoneIncomingOrder=!1:this.showDoneIncomingOrder=!0},orderStatusColor:function(e,t,r){return r?"success":e||t?e&&!t||e&&t?"success":void 0:"warning"},orderStatusText:function(e,t,r){return r?"Pesanan selesai":e||t?e&&!t?"Sudah dikonfirmasi":e&&t?"Pesanan dikirim":void 0:"Menunggu konfirmasi"},consoling:function(){console.log(this.pageWaiting)},loadWaitingPurchaseOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("currentUser")),a=r._id,n=JSON.parse(localStorage.getItem("auth")),s=n.token,o={Authorization:"Bearer "+s,"Content-Type":"application/json"},i="".concat(p,"/api/purchase-orders?userId=").concat(a,"&isDone=false&page=").concat(e.pageWaiting-1,"&count=").concat(e.waitingCount),c={headers:o,method:"GET",url:i},t.next=8,g()(c);case 8:l=t.sent,console.log(l),e.waitingOrders=l.data.purchases,e.waitingCountAll=l.data.count;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadDonePurchaseOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("currentUser")),a=r._id,n=JSON.parse(localStorage.getItem("auth")),s=n.token,o={Authorization:"Bearer "+s,"Content-Type":"application/json"},i="".concat(p,"/api/purchase-orders?userId=").concat(a,"&isDone=true&page=").concat(e.pageDone-1,"&count=").concat(e.doneCount),c={headers:o,method:"GET",url:i},t.next=8,g()(c);case 8:l=t.sent,console.log(l),e.doneOrders=l.data.purchases,e.doneCountAll=l.data.count;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},subTotal:function(e){var t=e.reduce((function(e,t){return e+t.quantity*t.price}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:t})},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q,VClamp:ce["a"]},computed:{},mixins:[le],watch:{pageWaiting:function(){this.loadWaitingPurchaseOrder()},pageDone:function(){this.loadDonePurchaseOrder()}}}),Je=Fe,qe=r("cc20"),Ge=r("891e"),He=Object(y["a"])(Je,Be,$e,!1,null,null,null),We=He.exports;C()(He,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDivider:A["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var Qe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Histori poin")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[0==e.points.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v(" Belum ada poin ")])])],1)],1):e._e(),r("v-row",{staticClass:"px-1"},e._l(e.points,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",{attrs:{color:"primary_red_1"}})],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(e._s(t.point)+" poin")]),r("div",{staticClass:"caption font-weight primary_black_1--text"},[e._v(" "+e._s(t.createdAt)+" ")])])])],1)],1)})),1)],1)],1),r("v-footer",[r("v-layout",{attrs:{"justify-center":""}},[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.pointCountAll/e.pointCount),"total-visible":7},model:{value:e.pagePoint,callback:function(t){e.pagePoint=t},expression:"pagePoint"}})],1)])],1)],1)},Ke=[],Ye={mounted:function(){var e=this;Promise.all([this.loadPoint()]).then((function(){e.isLoading=!1}))},data:function(){return{isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,points:[],pagePoint:1,pointCount:5,pointCountAll:0}},components:{Navbar:q},methods:{loadPoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=JSON.parse(localStorage.getItem("currentUser")),o=s._id,i="".concat(p,"/api/points?userId=").concat(o,"&page=").concat(e.pagePoint,"&count=").concat(e.pointCount),c={headers:n,method:"GET",url:i},t.next=8,g()(c);case 8:l=t.sent,console.log(l.data),e.points=l.data.points,e.pointCountAll=l.data.count;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()}},watch:{pagePoint:function(){this.loadPoint()}}},Ze=Ye,Xe=(r("aaa6"),r("553a")),et=Object(y["a"])(Ze,Qe,Ke,!1,null,null,null),tt=et.exports;C()(et,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VFooter:Xe["a"],VIcon:E["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var rt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Daftar pesanan masuk")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1),r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Daftar Pesanan Menunggu ")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:e.toggleWaitingIncomingOrder}},[r("v-icon",[e._v(e._s(1==e.showWaitingIncomingOrder?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),0==e.waitingOrders.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v(" Belum ada pesanan masuk menunggu ")])])],1)],1):e._e(),e.showWaitingIncomingOrder?r("v-row",{staticClass:"px-1"},e._l(e.waitingOrders,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(r){return e.gotoIncomingOrder(t)}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[r("v-img",{attrs:{src:e.imageApi(t.userId.image)}})],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(" "+e._s(t.userId.name)+" ")]),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.subTotal(t.purchaseOrderItem))+" ")]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" "+e._s(t.purchaseOrderItem.length)+" jenis barang ")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(" "+e._s(t.typeQuantity)+" "),r("i",{staticClass:"fas fa-jenkins"})])])]),r("v-divider"),r("v-layout",{attrs:{"justify-end":""}},[r("div",{staticClass:"pa-2"},[r("v-chip",{attrs:{outlined:"",small:"",color:e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)}},[r("div",{class:"caption "+e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)+"--text"},[e._v(" "+e._s(e.orderStatusText(t.isConfirmItem,t.isConfirmSendItem,t.isDone))+" ")])])],1)])],1)],1)})),1):e._e(),e.waitingOrders.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.waitingCountAll/e.waitingCount),"total-visible":7},model:{value:e.pageWaiting,callback:function(t){e.pageWaiting=t},expression:"pageWaiting"}})],1):e._e(),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Daftar Pesanan Selesai ")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:e.toggleDoneIncomingOrder}},[r("v-icon",[e._v(e._s(1==e.showDoneIncomingOrder?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),0==e.doneOrders.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v(" Belum ada pesanan masuk selesai ")])])],1)],1):e._e(),e.showDoneIncomingOrder?r("v-row",{staticClass:"px-1"},e._l(e.doneOrders,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(r){return e.gotoIncomingOrder(t)}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[r("v-img",{attrs:{src:e.imageApi(t.userId.image)}})],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(" "+e._s(t.userId.name)+" ")]),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.subTotal(t.purchaseOrderItem))+" ")]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" "+e._s(t.purchaseOrderItem.length)+" jenis barang ")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(" "+e._s(t.typeQuantity)+" "),r("i",{staticClass:"fas fa-jenkins"})])])]),r("v-divider"),r("v-layout",{attrs:{"justify-end":""}},[r("div",{staticClass:"pa-2"},[r("v-chip",{attrs:{outlined:"",small:"",color:e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)}},[r("div",{class:"caption "+e.orderStatusColor(t.isConfirmItem,t.isConfirmSendItem,t.isDone)+"--text"},[e._v(" "+e._s(e.orderStatusText(t.isConfirmItem,t.isConfirmSendItem,t.isDone))+" ")])])],1)])],1)],1)})),1):e._e(),e.doneOrders.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.doneCountAll/e.doneCount),"total-visible":7},model:{value:e.pageDone,callback:function(t){e.pageDone=t},expression:"pageDone"}})],1):e._e()],1)],1)],1)},at=[],nt={mounted:function(){var e=this;Promise.all([this.loadIncomingOrder({isDone:!0}),this.loadIncomingOrder({isDone:!1})]).then((function(){e.isLoading=!1}))},data:function(){return{tab:null,text:"",isLoading:!0,orders:[],doneOrders:[],waitingOrders:[],pageWaiting:1,waitingCount:5,waitingCountAll:0,pageDone:1,doneCount:5,doneCountAll:0,showWaitingIncomingOrder:!0,showDoneIncomingOrder:!0}},methods:{orderStatusColor:function(e,t,r){return r?"success":e||t?e&&!t||e&&t?"success":void 0:"warning"},orderStatusText:function(e,t,r){return r?"pesanan selesai":e||t?e&&!t?"Sudah dikonfirmasi":e&&t?"Pesanan dikirim":void 0:"Menunggu konfirmasi"},gotoIncomingOrder:function(e){this.$router.push({name:"incomingOrder",params:{purchaseOrderId:e._id}})},toggleWaitingIncomingOrder:function(){1==this.showWaitingIncomingOrder?this.showWaitingIncomingOrder=!1:this.showWaitingIncomingOrder=!0},toggleDoneIncomingOrder:function(){1==this.showDoneIncomingOrder?this.showDoneIncomingOrder=!1:this.showDoneIncomingOrder=!0},loadIncomingOrder:function(e){var t=this,r=e.isDone;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("isDone",r),a=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,s,o,i,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("currentUser")),n=a._id,s=JSON.parse(localStorage.getItem("auth")),o=s.token,i={Authorization:"Bearer "+o,"Content-Type":"application/json"},"".concat(p,"/api/purchase-orders?sellerId=").concat(n,"&isDone=").concat(r),c="".concat(p,"/api/purchase-orders?sellerId=").concat(n,"&isDone=").concat(r,"&page=").concat(t.pageDone-1,"&count=").concat(t.doneCount),l="".concat(p,"/api/purchase-orders?sellerId=").concat(n,"&isDone=").concat(r,"&page=").concat(t.pageWaiting-1,"&count=").concat(t.waitingCount),u={headers:i,method:"GET",url:1==r?c:l},e.next=10,g()(u);case 10:d=e.sent,console.log(d.data),t.orders=d.data.purchases,r?(t.doneCountAll=d.data.count,t.doneOrders=d.data.purchases):(t.waitingCountAll=d.data.count,t.waitingOrders=d.data.purchases);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,b();case 4:if(n=e.sent,1!=n){e.next=7;break}return e.abrupt("return",a());case 7:case"end":return e.stop()}}),e)})))()},subTotal:function(e){var t=e.reduce((function(e,t){return e+t.quantity*t.price}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:t})},imageApi:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q,VClamp:ce["a"]},computed:{},mixins:[le],watch:{pageWaiting:function(){this.loadIncomingOrder({isDone:!1})},pageDone:function(){this.loadIncomingOrder({isDone:!0})}}},st=nt,ot=Object(y["a"])(st,rt,at,!1,null,null,null),it=ot.exports;C()(ot,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDivider:A["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var ct=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Daftar barang dijual")])]},proxy:!0},{key:"right",fn:function(){return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:e.openDialogImportProduct}},a),[r("v-icon",[e._v("mdi-card-text")])],1)]}}])},[r("span",[e._v("Import Progress")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{small:"",fab:"",text:"",color:"primary_red_1",dark:""},on:{click:function(t){e.dialogMonitoringImport=!0}}},a),[r("v-icon",[e._v("mdi-progress-upload")])],1)]}}])},[r("span",[e._v("Import Progress")])])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line, actions"}})],1)],1),r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line, actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{fixed:"",absolute:"",value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-row",[r("v-col",{staticClass:"pb-0"},[r("v-select",{attrs:{dense:"",items:e.categories,outlined:"","item-text":"name",label:"Kategori","return-object":"",color:"primary_red_1"},on:{change:e.selectCategory},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}})],1)],1),e._l(e.saleItems,(function(t,a){return r("div",{key:t._id},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6",lg:"6",xl:"6"}},[r("v-checkbox",{attrs:{color:"primary_red_1",label:t.name},on:{change:function(t){return e.isSaleCategoryProduct(a)}},model:{value:t.isSale,callback:function(r){e.$set(t,"isSale",r)},expression:"saleItem.isSale"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"6",sm:"6",md:"6",lg:"6",xl:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.showProduct(t)}}},[r("v-icon",[e._v(e._s(1==t.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),t.show?r("div",[r("v-row",e._l(t.masterProductId,(function(t){return r("v-col",{key:t._id,staticClass:"px-2 py-0",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{staticClass:"mb-3",attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[t.image&&0===t.image.length?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),t.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.image[0].image)}}):e._e()],1)],1),r("v-spacer",[r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.name))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.partCode))])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price}))+" ")])])]),r("div",{staticClass:"px-2"},[r("div",{staticClass:"caption text-center mt-1"},[e._v("Jual")]),r("v-checkbox",{staticClass:"mt-1",attrs:{color:"primary_red_1"},model:{value:t.dealerProduct[0].isSale,callback:function(r){e.$set(t.dealerProduct[0],"isSale",r)},expression:"item.dealerProduct[0].isSale"}})],1),r("div",{staticClass:"pr-2"},[r("div",{staticClass:"caption text-center mt-3"},[e._v("Stok")]),r("v-text-field",{staticStyle:{"min-width":"60px","max-width":"80px"},attrs:{"error-count":"2",color:"primary_red_1",outlined:"",dense:"",type:"number",min:"1",rules:e.stockRules},model:{value:t.dealerProduct[0].stock,callback:function(r){e.$set(t.dealerProduct[0],"stock",r)},expression:"item.dealerProduct[0].stock"}})],1)],1)],1)],1)})),1)],1):e._e()],1)})),r("v-row",{attrs:{justify:"end"}},[r("v-col",{attrs:{cols:"12",sm:"3"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({attrs:{block:"",dark:"",color:"primary_red_1"},on:{click:e.saveUpdate}},a),[r("v-icon",[e._v("mdi-content-save")]),r("div",{staticClass:"ml-2"},[e._v("simpan")])],1)]}}],null,!1,2467629602)},[r("span",[e._v("Save")])])],1)],1)],2)],1),r("v-footer",[r("v-layout",{attrs:{"justify-center":""}},[e.saleItems.length>0&&e.saleItems[0].masterProductId&&e.saleItems[0].masterProductId.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.productCountAll/e.productCount),"total-visible":6},model:{value:e.pageProduct,callback:function(t){e.pageProduct=t},expression:"pageProduct"}})],1):e._e()])],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImportProduct,callback:function(t){e.dialogImportProduct=t},expression:"dialogImportProduct"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplateProduct}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[e.isProgressImport?r("v-progress-circular",{attrs:{size:30,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),e.isProgressImport?r("div",{staticClass:"ml-3 primary_grey_1--text"},[e._v("importing")]):e._e(),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImportProduct}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.dialogMonitoringImport,callback:function(t){e.dialogMonitoringImport=t},expression:"dialogMonitoringImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import Product")]),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){e.dialogMonitoringImport=!1}}},[e._v("close")])],1),r("v-card-text",[r("v-container",[r("span",{},[e._v("Progress")]),r("span",[e._v(" "+e._s("("+e.currentPosition+" of "+e.json.length+") "+(e.json.length>0?e.roundUp(100*e.currentPosition/e.json.length,2)+"%":""))+" "),e.currentPosition==e.json.length&&e.json.length>0?r("v-chip",{attrs:{small:"",color:"success"}},[e._v("done")]):e._e()],1),r("v-alert",{attrs:{value:e.importError,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.importError,callback:function(t){e.importError=t},expression:"importError"}},[e._v(e._s("error "+e.importErrorMessage+", data number "+e.currentPosition))]),r("v-layout",{staticClass:"mb-2"},[e.importError?r("v-btn",{staticClass:"mr-2",attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.executeImport}},[e._v("continue import")]):e._e(),e.importError?r("v-btn",{attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.importContinueAll}},[e._v("continue import all")]):e._e()],1),r("v-data-table",{staticClass:"elevation-1",attrs:{"loading-text":"loading import products...",headers:e.jsonHeaders,items:e.json,"sort-by":"index"},scopedSlots:e._u([{key:"item.isSale",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(1==a.isSale?"yes":"no"))])]}},{key:"item.statusImport",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"success"==a.statusImport?"success":"error"==a.statusImport?"primary_red_1":"grey",dark:""}},[e._v(e._s(a.statusImport))])]}}])})],1)],1),r("v-card-actions",[r("v-spacer"),r("div",[r("v-row",[r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{staticClass:"mx-1",attrs:{text:"",dark:"",color:"blue darken-1"},on:{click:e.downloadImportReport}},[e._v("download import report")])],1)],1),r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.pauseImportState}},a),[r("v-icon",[e._v("mdi-pause")])],1)]}}])},[r("span",[e._v("pause")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.continueImportState}},a),[r("v-icon",[e._v("mdi-play")])],1)]}}])},[r("span",[e._v("continue")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.resetImportState}},a),[r("v-icon",[e._v("mdi-stop")])],1)]}}])},[r("span",[e._v("stop")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.dialogMonitoringImport=!1}}},a),[r("v-icon",[e._v("mdi-window-minimize")])],1)]}}])},[r("span",[e._v("minimize")])])],1)],1)],1)],1)],1)],1)],1)],1)},lt=[],ut=(r("baa5"),r("fb6a"),{methods:{roundUp:function(e,t){return t=Math.pow(10,t),Math.ceil(e*t)/t}}}),dt=";",mt={mounted:function(){var e=this;Promise.all([this.setCategories()]).then((function(){e.isLoading=!1})),this.currentUser=JSON.parse(localStorage.getItem("currentUser"))},data:function(){return{currentUser:{},lazyImg:u.a,isLoading:!0,saleItems:[],stockRules:[function(e){return e>-1||"Qty not valid"}],success:!1,error:!1,errorMessage:"",successMessage:"",dialogMasterProduct:!1,dialogImportProduct:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:"",products:[],json:[],backupI:0,currentPosition:0,continue:!0,continueAll:!1,importError:!1,importErrorMessage:"",page:1,perPage:10,options:{},serverItemLength:0,jsonHeaders:[{text:"no",value:"no"},{text:"customerId",value:"customerId"},{text:"productPartCode",value:"productPartCode"},{text:"stock",value:"stock"},{text:"isSale",value:"isSale"},{text:"statusImport",value:"statusImport"},{text:"message",value:"message"}],dialogMonitoringImport:!1,isProgressImport:!1,isProgressDownloadTemplate:!1,isLoadingProduct:!1,categories:[],category:{createdAt:"2020-04-14T17:07:18.318Z",deleted:!1,id:"5e95edc6663e8b18b612547e",name:"Rantai Api",updatedAt:"2020-05-12T04:39:20.580Z",__v:0,_id:"5e95edc6663e8b18b612547e"},pageProduct:1,productCount:20,productCountAll:0}},methods:{downloadImportReport:function(){var e=this.json,t=[],r=[];for(var a in console.log("templates",e),e=e.length>0?e.map((function(e){return{customerId:e.customerId,productPartCode:e.productPartCode,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,stock:e.stock,isSale:e.isSale,statusImport:e.statusImport,message:e.message}})):[{customerId:"",productPartCode:"",price:0,lowestPrice:0,highestPrice:0,stock:0,isSale:0,statusImport:"",message:""}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","import-report-all-users-products.csv"),document.body.appendChild(o),o.click()},importContinueAll:function(){this.continueAll=!0,this.executeImport()},requestImport:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/products/import-product"),o={headers:n,method:"POST",url:s,data:e},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})))()},parsingCsv:function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/csv-parser/products"),n=new FormData;n.append("csv",this.csv);var s={headers:r,method:"POST",url:a,data:n};return g()(s)},submitImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=23;break}return t.prev=4,e.backupI=0,e.currentPosition=0,e.isProgressImport=!0,t.next=10,e.parsingCsv();case 10:a=t.sent,e.isProgressImport=!1,e.dialogImportProduct=!1,n=a.data,e.json=n.json,e.json=e.json.map((function(e,t){return Object(ie["a"])({},e,{no:t+1,statusImport:"processing",message:"waiting"})})),e.dialogMonitoringImport=!0,e.executeImport(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](4),e.errorAlert(t.t0.response.data);case 23:case"end":return t.stop()}}),t,null,[[4,20]])})))()},executeImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=43;break}a=(new Date).valueOf(),e.backupI=e.currentPosition,e.resetImportError(),n=e.backupI;case 8:if(!(n<e.json.length)){t.next=41;break}return t.prev=9,t.next=12,e.requestImport(e.json[n]);case 12:if(s=t.sent,e.json[n].statusImport=s.data.statusImport,e.json[n].message=s.data.message,e.currentPosition=n+1,e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),!e.continue){t.next=21;break}return t.abrupt("continue",38);case 21:return t.abrupt("break",41);case 22:t.next=38;break;case 24:if(t.prev=24,t.t0=t["catch"](9),e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),console.log(t.t0.response),e.currentPosition=n+1,e.json[n].statusImport=t.t0.response.data.statusImport,e.json[n].message=t.t0.response.data.message,e.importErrorMessage=t.t0.response.data.message,e.importError=!0,!e.continueAll){t.next=37;break}return t.abrupt("continue",38);case 37:return t.abrupt("break",41);case 38:n++,t.next=8;break;case 41:e.selectCategory(),console.log("imported in ".concat((new Date).valueOf()-a,"ms"));case 43:case"end":return t.stop()}}),t,null,[[9,24]])})))()},resetImportError:function(){this.importError=!1,this.importErrorMessage=""},resetImportState:function(){this.resetImportError(),this.backupI=0,this.currentPosition=0,this.continueAll=!1,this.continue=!0,this.json=[]},continueImportState:function(){this.continue=!0,this.executeImport()},pauseImportState:function(){this.continue=!1},requestCategories:function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/product-categories"),n={headers:r,method:"GET",url:a};return g()(n)},setCategories:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=10;break}return t.next=6,e.requestCategories();case 6:a=t.sent,e.categories=a.data.productCategories,e.category=a.data.productCategories[0],e.loadSaleProduct();case 10:case"end":return t.stop()}}),t)})))()},selectCategory:function(){this.pageProduct=1,this.productCountAll=0,this.loadSaleProduct()},downloadTemplateProduct:function(){var e=[],t=[],r=[];for(var a in console.log("templates",e),e=e.length>0?e.map((function(e){return{customerId:e.customerId,productPartCode:e.productPartCode,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,stock:e.stock,isSale:e.isSale?1:0}})):[{customerId:"",productPartCode:"",price:0,lowestPrice:0,highestPrice:0,stock:0,isSale:0}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r));console.log(t),console.log(r),console.log(n);var s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","dealer-products-template.csv"),document.body.appendChild(o),o.click()},loadProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=JSON.parse(localStorage.getItem("currentUser")),o=s.customerId,i="".concat(p,"/api/products?customerId=").concat(o),c={headers:n,method:"GET",url:i},t.next=8,g()(c);case 8:l=t.sent,e.products=l.data.products.map((function(e,t){return Object(ie["a"])({},e,{index:t,isSale:e.isSale.toString()})}));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),console.log(e.products),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r());case 7:case"end":return t.stop()}}),t)})))()},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},openDialogImportProduct:function(){this.dialogImportProduct=!0},closeDialogImportProduct:function(){this.isProgressImport=!1,this.dialogImportProduct=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"},s=new FormData,s.append("csv",t),o="".concat(p,"/api/products/bulk-dealer"),i={headers:n,method:"POST",url:o,data:s},e.prev=6,e.next=9,g()(i);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](6),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},fileSize:function(e){if(e>=1024&&e<1048576){var t=e/1024;return t=this.roundUp(t,2),"(".concat(t," KB)")}if(e>=1048576){var r=e/1048576;return r=this.roundUp(r,2),"(".concat(r," MB)")}},saveUpdate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=[],a=e.saleItems[0],a.masterProductId.forEach((function(e){r.push({_id:e.dealerProduct[0]._id,isSale:e.dealerProduct[0].isSale,stock:+e.dealerProduct[0].stock})})),n=e.currentUser._id,t.next=7,e.requestUpdateProducts(n,r);case 7:s=t.sent,console.log(s.data),e.successAlert("Product updated"),e.loadSaleProduct(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.errorAlert(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},requestUpdateProducts:function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/sale-items/").concat(e),i={headers:n,method:"PUT",url:o,data:s};return g()(i)},isSaleCategoryProduct:function(e){var t=this;this.saleItems[e].masterProductId.forEach((function(r){r.dealerProduct[0].isSale=t.saleItems[e].isSale}))},showProduct:function(e){1==e.show?e.show=!1:e.show=!0},loadSaleProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=JSON.parse(localStorage.getItem("currentUser")),s=n.customerId,t.next=5,g()({headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},method:"GET",url:"".concat(p,"/api/sale-items?categoryId=").concat(e.category._id,"&customerId=").concat(s,"&page=").concat(e.pageProduct,"&count=").concat(e.productCount)});case 5:o=t.sent,e.saleItems=o.data.categories.map((function(e){return Object(ie["a"])({},e,{show:!0,isShowAll:!1,showProducts:e.masterProductId.slice(0,4),isSale:!(e.masterProductId.filter((function(e){return 0==e.dealerProduct[0].isSale})).length>0)})})),e.productCountAll=o.data.productCount,console.log("pageProduct",e.pageProduct),console.log("productCountAll",e.productCountAll);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q,VClamp:ce["a"]},mixins:[le,ut],watch:{myAlphaNumField:function(e){var t=/[^A-Z0-9]/gi;this.$set(this,"myAlphaNumField",e.replace(t,""))},pageProduct:function(){this.loadSaleProduct()}}},pt=mt,vt=(r("b73f"),r("0798")),ft=r("ac7c"),ht=r("8fea"),gt=r("490a"),bt=r("b974"),xt=r("3a2f"),_t=Object(y["a"])(pt,ct,lt,!1,null,null,null),kt=_t.exports;C()(_t,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCheckbox:ft["a"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VFooter:Xe["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VProgressCircular:gt["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var It=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Pesan barang")])]},proxy:!0}])}),e.isLoading?r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"3",xl:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"image"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"9",xl:"9"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item"}})],1)],1),r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-two-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"6",md:"6",lg:"3",xl:"3"}},[r("v-avatar",{staticClass:"lighten-4",attrs:{size:"100%",color:"primary_grey_1"}},[0==e.item.image.length?r("v-img",{attrs:{"aspect-ratio":"1",src:e.lazyImg}}):e._e(),e.item.image.length>0?r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(e.item.image[0].image)}}):e._e()],1)],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"9",xl:"9"}},[r("div",{staticClass:"text-center text-lg-start text-xl-start caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.item.name))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption primary_grey_1--text"},[e._v(e._s(e.item.localShopName))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption primary_grey_1--text"},[e._v(e._s(e.item.partCode))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:e.item.price}))+" ")])])],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Tersedia di pemasok")])])],1),0==e.availableSuppliers.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v("Belum ada pemasok yang menjual produk ini")])])],1)],1):e._e(),r("v-row",{staticClass:"px-1"},e._l(e.availableSuppliers,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(r){return e.goToItemDetailSupplier(t)}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[t.userCustomerId&&t.userCustomerId.storeId&&t.userCustomerId.storeId.image&&"-"!==t.userCustomerId.storeId.image?r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(t.userCustomerId.storeId.image)}}):e._e(),t.userCustomerId&&t.userCustomerId.storeId&&t.userCustomerId.storeId.image&&"-"!==t.userCustomerId.storeId.image?e._e():r("v-img",{attrs:{src:e.lazyImg}})],1)],1),t.userCustomerId&&t.userCustomerId.storeId?r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(t.userCustomerId.storeId.name))]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(t.userCustomerId.addressId.name))])]):e._e(),t.userCustomerId&&t.userCustomerId.storeId?e._e():r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v("informasi toko tidak tersedia")])])])],1)],1)})),1)],1)],1)],1)},yt=[],wt={mounted:function(){var e=this;Promise.all([this.loadProductDetail()]).then((function(){e.isLoading=!1}))},data:function(){return{skeletonLoaderItem:[0,1,2],isLoading:!0,lazyImg:u.a,item:{_id:0,name:"Lorem ipsum item",description:"Dolphin something dancing coffee in green field talking changes",price:999999,image:["uploads/products/1575887196747_57759.png"]},availableSuppliers:[],setting:{_id:"",pointMultiplier:0,lockDepotToDealer:!0}}},methods:{getSetting:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/settings"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.setting=n.data,console.log("setting",e.setting);case 10:case"end":return t.stop()}}),t)})))()},goToItemDetailSupplier:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.userCustomerId){r.next=7;break}return t.$router.push({name:"itemDetailSupplier",params:{productId:e._id}}),a=JSON.parse(localStorage.getItem("currentUser")),n={userId:a._id,customerId:a.customerId,sellerId:e.userId._id,productId:e._id,masterProductId:t.item._id},console.log(n),r.next=7,t.userClickProduct(n);case 7:case"end":return r.stop()}}),r)})))()},userClickProduct:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/clicked-products"),s={headers:a,method:"POST",url:n,data:e};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r(e);case 7:n=t.sent,console.log("clicked product created",n.data);case 9:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)},loadProductDetail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a=e.$route.params.catalogId,n={Authorization:"Bearer "+r,"Content-Type":"application/json"},s="".concat(p,"/api/catalogs/").concat(a),o={headers:n,method:"GET",url:s};return g()(o)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=16;break}return t.next=7,r();case 7:return n=t.sent,console.log("result",n),e.item=n.data.product,t.next=12,e.getSetting();case 12:s=JSON.parse(localStorage.getItem("currentUser")),o=s.dealerCustomerId,e.setting.lockDepotToDealer?e.availableSuppliers=n.data.suppliers.filter((function(e){return e.customerId==o})):(i=n.data.suppliers.filter((function(e){return e.customerId==o})),c=n.data.suppliers.filter((function(e){return e.customerId!==o})),e.availableSuppliers=[].concat(Object(ae["a"])(i),Object(ae["a"])(c))),console.log(e.availableSuppliers);case 16:case"end":return t.stop()}}),t)})))()}},components:{Navbar:q},mixins:[le]},Ct=wt,Pt=Object(y["a"])(Ct,It,yt,!1,null,null,null),St=Pt.exports;C()(Pt,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var Ot=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Pesan barang")])]},proxy:!0}])}),e.isLoading?r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"3",xl:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"image"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"9",xl:"9"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-three-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"list-item-avatar-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[r("v-skeleton-loader",{staticClass:"mx-auto",attrs:{type:"actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"6",md:"6",lg:"3",xl:"3"}},[r("v-avatar",{staticClass:"lighten-4",attrs:{size:"100%",color:"primary_grey_1"}},[0===e.item.masterProductId.image.length?r("v-img",{attrs:{"aspect-ratio":"1",src:e.lazyImg}}):e._e(),e.item.masterProductId.image.length>0?r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(e.item.masterProductId.image[0].image)}}):e._e()],1)],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"9",xl:"9"}},[r("div",{staticClass:"text-center text-lg-start text-xl-start caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.item.masterProductId.name))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption primary_grey_1--text"},[e._v(e._s(e.item.masterProductId.localShopName))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption primary_grey_1--text"},[e._v(e._s(e.item.masterProductId.partCode))]),r("div",{staticClass:"text-center text-lg-start text-xl-start caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:e.item.masterProductId.price}))+" ")])]),r("v-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"9",xl:"9"}},[r("div",{staticClass:"text-center text-lg-start text-xl-start caption primary_black_1--text"},[e._v(e._s(e.printStock(e.item.stock)))])])],1),r("v-row",{staticClass:"px-1"},[r("v-col",{staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""},on:{click:function(t){return e.$router.push({name:"supplierStorefront",params:{storeId:e.supplier.storeId._id}})}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",["-"===e.supplier.storeId.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),"-"!==e.supplier.storeId.image?r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(e.supplier.storeId.image)}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.supplier.storeId.name))]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.supplier.addressId.name))]),e.supplier.storeId.isOpen?e._e():r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v("Toko sedang tutup")])])])],1)],1)],1),r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"3"}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v("QTY")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("div",{staticClass:"caption text-center primary_grey_1--text"},[e._v("Total harga")])])],1),r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"3"}},[r("v-text-field",{attrs:{disabled:!e.item.isSale||0==e.item.stock,type:"number",min:"1",dense:"",outlined:"",color:"primary_red_1"},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:"quantity"}})],1),r("v-col",{staticClass:"px-0 pb-0",attrs:{cols:"6"}},[r("v-text-field",{attrs:{value:e.totalPrice,disabled:"",dense:"",outlined:"",color:"primary_red_1"},model:{value:e.totalPrice,callback:function(t){e.totalPrice=t},expression:"totalPrice"}})],1),r("v-col",{staticClass:"pb-0",attrs:{cols:"3"}},[r("v-btn",{attrs:{disabled:!e.item.isSale||0==e.item.stock||!e.supplier.storeId.isOpen,dark:e.darkButton(e.item.isSale,e.item.stock,e.supplier.storeId.isOpen),block:"",height:"40",color:"primary_red_1"},on:{click:e.orderItem}},[e._v("pesan")])],1),e.item.isSale&&0!=e.item.stock&&e.supplier.storeId.isOpen?e._e():r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",{staticClass:"text-center font-weight-bold text-lg-start text-xl-start caption primary_red_1--text"},[e._v("Barang sedang tidak dijual")])]),e.quantity>e.item.stock&&!e.item.isSale?r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",{staticClass:"text-center font-weight-bold text-lg-start text-xl-start caption primary_red_1--text"},[e._v("Stock barang tidak mencukupi")])]):e._e()],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.addToCartSuccess,callback:function(t){e.addToCartSuccess=t},expression:"addToCartSuccess"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesan barang")]),r("v-card-text",[e._v(e._s(e.orderMessage))]),r("v-card-actions",[r("v-spacer",[r("v-btn",{attrs:{block:"",color:"primary_green_1",text:""},on:{click:function(t){e.addToCartSuccess=!1}}},[e._v("ok")])],1)],1)],1)],1)],1)],1)],1)},jt=[],Rt={methods:{apiImage:function(e){return"".concat(p,"/").concat(e)}}},Vt={mounted:function(){var e=this;Promise.all([this.loadProductDetail()]).then((function(){e.isLoading=!1})),this.$store.dispatch("setCarts")},data:function(){return{isLoading:!0,lazyImg:u.a,quantity:1,item:{},supplier:{},addToCartSuccess:!1,orderMessaege:"",total:0}},methods:{darkButton:function(e,t,r){return console.log(e,t,r),!!(e&&t>0&&r)},printStock:function(e){return e<20&&e>=10?"Stock tersisa > ".concat(e):e<10&&e>=5?"Stock tersisa > 5":e<5&&e>0?"Stock tersisa < 5":0==e?"Stock tersisa 0":void 0},orderItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(+e.quantity>0)){t.next=22;break}return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={sellerId:e.supplier._id,productId:e.item._id,isEmpty:!1,quantity:+e.quantity},s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/shopping-carts"),i={headers:s,method:"POST",url:o,data:n},t.next=7,g()(i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,1!=a){t.next=22;break}return t.prev=6,t.next=9,r();case 9:e.quantity=1,e.addToCartSuccess=!0,e.orderMessage="Barang berhasil ditambah ke keranjang",e.totalPrice="Rp0",e.$store.dispatch("setCarts"),e.loadProductDetail(),t.next=22;break;case 17:t.prev=17,t.t0=t["catch"](6),e.addToCartSuccess=!0,e.orderMessage=t.t0.response.data.message,e.loadProductDetail();case 22:case"end":return t.stop()}}),t,null,[[6,17]])})))()},loadProductDetail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.productId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/products/").concat(n),i={headers:s,method:"GET",url:o},t.abrupt("return",g()(i));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=12;break}return t.next=7,r();case 7:return n=t.sent,console.log(n.data),e.item=n.data,e.supplier=n.data.userCustomerId,t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})))()}},components:{Navbar:q},computed:{totalPrice:{get:function(){return this.numberWithPeriod({currency:"Rp",separator:".",number:this.quantity*this.item.masterProductId.price})},set:function(e){this.numberWithPeriod({currency:"Rp",separator:".",number:this.quantity*this.item.masterProductId.price})}}},mixins:[le,Rt]},Dt=Vt,Tt=(r("7b78"),Object(y["a"])(Dt,Ot,jt,!1,null,null,null)),At=Tt.exports;C()(Tt,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var Et=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Profil Toko")])]},proxy:!0}])}),e.isLoading?r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",{staticClass:"px-1"},[r("v-col",{staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",{attrs:{size:"100"}},["-"===e.supplier.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),"-"!==e.supplier.image?r("v-img",{attrs:{src:e.apiImage(e.supplier.image)}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.supplier.name))]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.supplier.userId.addressId.name))]),e.supplier.isOpen?e._e():r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v("Toko sedang tutup")])])])],1)],1)],1),r("v-divider",{staticClass:"my-3"}),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Produk yang tersedia")])])],1),r("v-row",{staticClass:"px-1"},e._l(e.products,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{flat:"",hover:""},on:{click:function(r){return e.$router.push({name:"itemDetailSupplier",params:{productId:t._id}})}}},[t.masterProductId&&t.masterProductId.image&&t.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.masterProductId.image[0].image),"aspect-ratio":"1.78",contain:""}}):e._e(),t.masterProductId&&t.masterProductId.image&&0!==t.masterProductId.image.length?e._e():r("v-img",{attrs:{src:e.lazyImg,"aspect-ratio":"1"}}),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(" "+e._s(t.masterProductId&&t.masterProductId.name?t.masterProductId.name:"Nama produk tidak tersedia")+" ")])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price}))+" ")])])],1)],1)})),1)],1)],1),r("v-footer",[r("v-layout",{attrs:{"justify-center":""}},[e.products.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.productCountAll/e.productCount),"total-visible":6},model:{value:e.pageProduct,callback:function(t){e.pageProduct=t},expression:"pageProduct"}})],1):e._e()])],1)],1)},Nt=[],Mt={mounted:function(){var e=this;Promise.all([this.loadStore()]).then((function(){e.isLoading=!1}))},data:function(){return{isLoading:!0,lazyImg:u.a,supplier:{},products:[],supplierId:"",customerId:"",pageProduct:1,productCount:6,productCountAll:0}},methods:{loadStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.storeId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/stores/").concat(n),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:c=t.sent,console.log("store",c.data),e.supplier=c.data,e.supplierId=e.supplier.userId._id,e.customerId=e.supplier.userId.customerId,e.loadProduct(e.customerId);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s="".concat(p,"/api/products?customerId=").concat(e,"&page=").concat(t.pageProduct,"&count=").concat(t.productCount),r.abrupt("return",g()({headers:{Authorization:"Bearer "+n,"Content-Type":"application/json"},method:"GET",url:s}));case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),r.next=3,b();case 3:if(n=r.sent,1!=n){r.next=14;break}return r.next=7,a();case 7:return s=r.sent,t.products=s.data.products,t.productCountAll=s.data.count,console.log(t.pageProduct),console.log(t.productCount),console.log("load product",s.data),r.abrupt("return",s);case 14:case"end":return r.stop()}}),r)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q,VClamp:ce["a"]},computed:{currentUser:function(){return this.$store.state.currentUser.currentUser}},mixins:[le],watch:{pageProduct:function(){this.loadProduct(this.customerId)}}},zt=Mt,Ut=Object(y["a"])(zt,Et,Nt,!1,null,null,null),Lt=Ut.exports;C()(Ut,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDivider:A["a"],VFooter:Xe["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var Bt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Profile Toko")])]},proxy:!0}])}),e.isLoading?r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1),r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}}),r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),e.hasStore?e._e():r("v-row",{staticClass:"px-1",attrs:{justify:"center"}},[r("v-layout",{staticClass:"py-3",attrs:{"justify-center":""}},[r("div",{staticClass:"text-center font-weight-bold primary_grey_1--text"},[e._v("Anda belum memiliki toko")])])],1),e.hasStore?e._e():r("v-row",{staticClass:"px-1",attrs:{justify:"center"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{attrs:{color:"primary_red_1",dark:""},on:{click:function(t){return e.openDialogStorefront({edit:!1})}}},[e._v("buat toko")])],1)],1),e.hasStore?r("v-row",{staticClass:"px-1"},[r("v-col",{staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",{attrs:{size:"100"}},[e.hasStore?r("v-img",{attrs:{src:e.apiImage(e.store.image)}}):e._e(),e.hasStore?e._e():r("v-img",{attrs:{src:e.lazyImg}})],1)],1),r("div",{staticClass:"pa-2"},[e.hasStore?r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.store.name))]):e._e()]),r("v-spacer"),r("div",{staticClass:"pr-2"},[r("v-btn",{attrs:{color:"primary_red_1",text:"",fab:"",small:""},on:{click:function(t){return e.openDialogStorefront({edit:!0})}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)],1)],1):e._e(),r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("div",{staticClass:"caption"},[e._v("Status Toko ( "+e._s(e.store.isOpen?"Buka":"Tutup")+" )")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-switch",{attrs:{color:"primary_red_1"},on:{change:e.setIsOpenStore},model:{value:e.store.isOpen,callback:function(t){e.$set(e.store,"isOpen",t)},expression:"store.isOpen"}})],1)],1)],1),e.hasStore?r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[e.addresses.length>0?r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.addresses[0].name))]):e._e(),0==e.addresses.length?r("div",{staticClass:"caption primary_grey_1--text"},[e._v("Alamat belum tersedia")]):e._e()]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{attrs:{outlined:"",small:"",dark:"",color:"primary_green_1"},on:{click:function(t){return e.$router.push({name:"userAddress"})}}},[e._v(e._s(e.addressButtonTitle))])],1)],1):e._e(),e.hasStore?r("v-divider",{staticClass:"my-3"}):e._e(),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Porduk yang tersedia")])])],1),e.hasStore&&0==e.products.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"caption primary_grey_1--text text-center"},[e._v("Belum ada produk")])])],1)],1):e._e(),e.hasStore?r("v-row",{staticClass:"px-1"},e._l(e.products,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"6",sm:"6",md:"4",lg:"3"}},[r("v-card",{attrs:{flat:"",hover:""}},[t.masterProductId&&t.masterProductId.image&&t.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.masterProductId.image[0].image),"aspect-ratio":"1.78",contain:""}}):e._e(),t.masterProductId&&t.masterProductId.image&&0!==t.masterProductId.image.length?e._e():r("v-img",{attrs:{src:e.lazyImg,"aspect-ratio":"1.78",contain:!1}}),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[r("v-clamp",{attrs:{autoresize:"","max-lines":2}},[e._v(e._s(t.masterProductId&&t.masterProductId.name?t.masterProductId.name:"Nama produk tidak tersedia"))])],1),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price}))+" ")])])],1)],1)})),1):e._e()],1)],1),r("v-footer",[r("v-layout",{attrs:{"justify-center":""}},[e.products.length>0?r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.productCountAll/e.productCount),"total-visible":6},model:{value:e.pageProduct,callback:function(t){e.pageProduct=t},expression:"pageProduct"}})],1):e._e()])],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogStorefront,callback:function(t){e.dialogStorefront=t},expression:"dialogStorefront"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formStorefront",attrs:{"lazy-validation":""},model:{value:e.validStorefront,callback:function(t){e.validStorefront=t},expression:"validStorefront"}},[r("v-row",[null==e.image&&""!=e.store.image?r("v-img",{attrs:{src:e.apiImage(e.store.image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[null!=e.store?r("v-text-field",{attrs:{rules:e.nameRules,label:"Nama Toko"},model:{value:e.store.name,callback:function(t){e.$set(e.store,"name",t)},expression:"store.name"}}):e._e()],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:[!1,!0],label:"Buka","return-object":""},model:{value:e.store.isOpen,callback:function(t){e.$set(e.store,"isOpen",t)},expression:"store.isOpen"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["H1","H2","H3","H12","H23","H13","H123"],label:"Status",rules:e.statusRules,"item-text":"name","return-object":""},model:{value:e.store.status,callback:function(t){e.$set(e.store,"status",t)},expression:"store.status"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.imageErrorMessage))])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogStorefront}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Simpan")])],1)],1)],1)],1)},$t=[],Ft=r("5a30"),Jt=r.n(Ft),qt={mounted:function(){var e=this;Promise.all([this.loadStore(),this.loadProduct(),this.loadUserMainAddress()]).then((function(){e.isLoading=!1}))},data:function(){return{formTitle:"",editStore:!1,imageUrl:"",image:null,imageErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",nameRules:[function(e){return!!e||"Name is required"}],areaRules:[function(e){return!!e||"Area is required"}],statusRules:[function(e){return!!e||"Status is required"}],isOpenRules:[function(e){return!!e||"Is Open is required"}],isLoading:!0,validStorefront:!0,dialogStorefront:!1,lazyImg:u.a,store:{_id:"",name:"",status:"",userId:"",image:"",isOpen:!0},products:[{_id:0,name:"Lorem ipsum item",price:999999,image:u.a},{_id:1,name:"Lorem ipsum item",price:999999,image:u.a},{_id:2,name:"Lorem ipsum item",price:999999,image:u.a},{_id:3,name:"Lorem ipsum item",price:999999,image:u.a},{_id:4,name:"Lorem ipsum item",price:999999,image:u.a},{_id:5,name:"Lorem ipsum item",price:999999,image:u.a}],addresses:[],hasStore:!0,pageProduct:1,productCount:6,productCountAll:0}},methods:{stringToBoolean:function(e){return"true"==e},setIsOpenStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/stores/").concat(t._id),o={headers:n,method:"PUT",url:s,data:{isOpen:e.store.isOpen}};return g()(o)},t.prev=1,a={_id:e.store._id},t.next=5,r(a);case 5:e.successAlert("Toko berhasil diubah"),e.loadStore(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.errorAlert(t.t0);case 12:console.log(e.store.isOpen);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},validateStorefront:function(){return this.$refs.formStorefront.validate()},resetValidationStorefront:function(){this.$refs.formStorefront.resetValidation()},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},openDialogStorefront:function(e){var t=e.edit;t?(this.formTitle="Edit Toko",this.editStore=!0):(this.formTitle="Buat Toko",this.editStore=!1),this.dialogStorefront=!0},closeDialogStorefront:function(){this.dialogStorefront=!1,this.resetImage()},resetImage:function(){this.imageUrl="",this.image=null,this.imageErrorMessage=""},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},updateStorefront:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=new Jt.a;s.append("image",t),s.append("name",e.name),s.append("isOpen",e.isOpen),s.append("status",e.status),console.log("data store",e);var o="".concat(p,"/api/stores/").concat(e._id),i={headers:n,method:"PUT",url:o,data:s};return g()(i)},a=e.validateStorefront(),!a){t.next=19;break}return t.prev=3,JSON.parse(localStorage.getItem("currentUser")),n={_id:e.store._id,name:e.store.name,status:e.store.status,isOpen:e.store.isOpen},t.next=8,r(n,e.image);case 8:e.successAlert("Toko berhasil diubah"),e.closeDialogStorefront(),e.loadProduct(),e.loadStore(),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](3),e.errorAlert(t.t0);case 17:t.next=20;break;case 19:e.errorAlert("invalid input!");case 20:case"end":return t.stop()}}),t,null,[[3,14]])})))()},saveStorefront:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=new Jt.a;s.append("image",t),s.append("name",e.name),s.append("isOpen",e.isOpen),s.append("userId",e.userId);var o="".concat(p,"/api/stores"),i={headers:n,method:"POST",url:o,data:s};return g()(i)},a=e.validateStorefront(),!e.image||!a){t.next=16;break}return t.prev=3,n=JSON.parse(localStorage.getItem("currentUser")),s={userId:n._id,customerId:n.customerId,pic:n.name,name:e.store.name,isOpen:e.store.isOpen,status:e.store.status},t.next=8,r(s,e.image);case 8:return t.abrupt("return",t.sent);case 11:throw t.prev=11,t.t0=t["catch"](3),new Error(t.t0);case 14:t.next=18;break;case 16:throw e.imageErrorMessage="Image not selected!",new Error("invalid input!");case 18:case"end":return t.stop()}}),t,null,[[3,11]])})))()},loadUserMainAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("currentUser")),t=e._id,r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/addresses?userId=").concat(t,"&isMain=true"),o={headers:n,method:"GET",url:s};return g()(o)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.addresses=n.data.addresses,console.log("main address",n.data);case 10:case"end":return t.stop()}}),t)})))()},loadStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=JSON.parse(localStorage.getItem("currentUser")),console.log("currentUser",n),s=n._id,o={Authorization:"Bearer "+a,"Content-Type":"application/json"},i="".concat(p,"/api/stores?userId=").concat(s),c={headers:o,method:"GET",url:i},t.next=9,g()(c);case 9:l=t.sent,u=l.data.stores,0==u.length?e.hasStore=!1:(e.store=u[0],e.hasStore=!0),console.log("store",e.store);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=JSON.parse(localStorage.getItem("currentUser")),n._id,s=n.customerId,o={headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"},method:"GET",url:"".concat(p,"/api/products?customerId=").concat(s,"&page=").concat(e.pageProduct,"&count=").concat(e.productCount)},t.abrupt("return",g()(o));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=12;break}return t.next=7,r();case 7:return n=t.sent,e.products=n.data.products,e.productCountAll=n.data.count,console.log("product",n.data),t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)},save:function(){var e=this;this.editStore?this.updateStorefront():this.saveStorefront().then((function(){e.successAlert("Toko berhasil dibuat"),e.closeDialogStorefront(),e.loadProduct(),e.loadStore()})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q,VClamp:ce["a"]},computed:{addressButtonTitle:function(){return"Ubah Alamat"}},mixins:[le],watch:{pageProduct:function(){this.loadProduct()}}},Gt=qt,Ht=r("4bd4"),Wt=r("b73d"),Qt=Object(y["a"])(Gt,Bt,$t,!1,null,null,null),Kt=Qt.exports;C()(Qt,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VDivider:A["a"],VFooter:Xe["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VSwitch:Wt["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var Yt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-content",[r("v-container",[r("v-row",[r("v-col",[r("div",{staticClass:"font-weight-bold primary_grey_1--text text-center"},[e._v(" PESANAN BERHASIL ")])])],1),r("v-row",{staticClass:"px-10",attrs:{justify:"center"}},[r("v-col",{attrs:{sm:"12",md:"4",lg:"3",xl:"3"}},[r("v-avatar",{staticClass:"px-5",attrs:{size:"100%"}},[r("v-img",{attrs:{src:e.avatar}})],1)],1)],1),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_red_1--text text-center"},[e._v(" PESANAN DIKIRIM ")]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text text-center"},[e._v(" Rileks aja, kami akan melanjutkan pesanan ini ke pemasok ")])])],1),r("v-row",{attrs:{justify:"center"}},[r("v-col",{attrs:{cols:"12",xl:"3"}},[r("v-btn",{attrs:{dark:"",block:"",color:"primary_red_1"},on:{click:e.goToHome}},[e._v("kembali ke beranda")])],1)],1)],1)],1)],1)},Zt=[],Xt={mounted:function(){},data:function(){return{avatar:Ee.a}},methods:{goToHome:function(){this.$router.push("/")}},components:{Navbar:q}},er=Xt,tr=Object(y["a"])(er,Yt,Zt,!1,null,null,null),rr=tr.exports;C()(tr,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VImg:N["a"],VRow:$["a"]});var ar=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Konfirmasi")])]},proxy:!0}])}),e.isLoading?r("v-content",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item, list-item-avatar-three-line, list-item, list-item"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item, actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Pesanan dikirim ke pemasok")])])],1),r("v-row",{staticClass:"px-1"},[r("v-col",{staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:""},on:{click:function(t){return e.$router.push({name:"supplierStorefront",params:{storeId:e.supplier.sellerId.storeId._id}})}}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",{attrs:{size:"80"}},["-"===e.supplier.sellerId.storeId.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),"-"!==e.supplier.sellerId.storeId.image?r("v-img",{attrs:{src:e.apiImage(e.supplier.sellerId.storeId.image)}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"font-weight-bold primary_grey_1--text"},[e._v(e._s(e.supplier.sellerId.storeId.name))]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(e._s(e.supplier.sellerId.addressId.name))])])])],1)],1)],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang dikirim ke alamat")]),e.addresses.length>0?r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.addresses[0].name))]):e._e(),0==e.addresses.length?r("div",{staticClass:"caption primary_grey_1--text"},[e._v("Alamat belum tersedia")]):e._e(),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(e._s(e.addressError))])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{attrs:{outlined:"",small:"",dark:"",color:"primary_green_1"},on:{click:function(t){return e.$router.push({name:"userAddress"})}}},[e._v(e._s(e.addressButtonTitle))])],1)],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang pesanan")])])],1),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",{staticClass:"px-1"},e._l(e.orders,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[0===t.productId.masterProductId.image.length?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),t.productId.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.productId.masterProductId.image[0].image)}}):e._e()],1)],1),r("v-spacer",[t.productId.isSale?r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(" "+e._s(t.productId.isSale)+" ")])],1),r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(" "+e._s(t.productId.masterProductId.name)+" ")])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(" "+e._s(t.productId.masterProductId.partCode)+" ")])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(" "+e._s(t.productId.masterProductId.localShopName)+" ")])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.productId.masterProductId.price}))+" ")]),r("div",{staticClass:"text-lg-start text-xl-start caption primary_black_1--text"},[e._v(e._s(e.printStock(t.productId.stock)))])]):e._e(),t.productId.isSale?e._e():r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" Barang sedang tidak dapat dibeli, silahkan dihapus ")])])]),r("div",{staticClass:"pr-2"},[r("v-text-field",{staticClass:"tf mt-4",staticStyle:{"min-width":"80px"},attrs:{rules:[e.rules.quantityRules(t.quantity,t.productId.stock)],color:"primary_red_1",outlined:"",dense:"",type:"number",min:"1"},model:{value:t.quantity,callback:function(r){e.$set(t,"quantity",r)},expression:"order.quantity"}})],1)],1),r("v-divider"),r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{attrs:{dark:"",fab:"",small:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.prepateDelete(t)}}},[r("v-icon",[e._v("mdi-delete")])],1)],1)],1)],1)})),1)],1),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Total pesanan")]),r("div",{staticClass:"font-weight-bold primary_grey_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:e.totalOrder}))+" ")])])],1),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text text-center mb-3"},[e._v("Tekan tombol untuk melanjutkan")]),r("v-btn",{attrs:{disabled:e.disableOrderButton(),dark:!e.disableOrderButton(),block:"",color:"primary_red_1"},on:{click:e.clickOrder}},[e._v("pesan")])],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.orderDialog,callback:function(t){e.orderDialog=t},expression:"orderDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesanan")]),r("v-card-text",[e._v("Lanjutkan proses pemesanan ke dealer?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.orderDialog=!1}}},[e._v("tidak")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.makeOrder}},[e._v("ya")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogOrderNotSufficientItem,callback:function(t){e.dialogOrderNotSufficientItem=t},expression:"dialogOrderNotSufficientItem"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesanan")]),r("v-card-text",[e._v("Stock produk tidak cukup")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.dialogOrderNotSufficientItem=!1}}},[e._v("tutup")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogDeleteOrder,callback:function(t){e.dialogDeleteOrder=t},expression:"dialogDeleteOrder"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesanan")]),r("v-card-text",[e._v("Hapus produk ?")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.dialogDeleteOrder=!1}}},[e._v("Batal")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.deleteCartItem}},[e._v("Ya")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.dialogError,callback:function(t){e.dialogError=t},expression:"dialogError"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesanan Error")]),r("v-card-text",[e._v(e._s(e.dialogErrorMessage))]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.dialogError=!1}}},[e._v("Tutup")])],1)],1)],1)],1)},nr=[],sr=(r("a623"),{mounted:function(){var e=this;Promise.all([this.loadShoppingCartDetail(),this.loadUserMainAddress()]).then((function(){e.isLoading=!1}))},data:function(){return{dialogError:!1,dialogErrorMessage:"",tempOrder:{},tempDelete:{},dialogOrderNotSufficientItem:!1,dialogDeleteOrder:!1,valid:!0,addressError:"",orderDialog:!1,isLoading:!0,lazyImg:u.a,supplier:{sellerId:{storeId:{name:""},addressId:{name:""}}},orders:[],orderId:"",addresses:[],quantityRules:[function(e,t){return e<=t||"Stock tidak mencukupi"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"},confirmOldPasswordRules:function(e,t){return e===t||"confirm password not match"},quantityRules:function(e,t){return e<=t||"Stock tidak cukup"}}}},methods:{prepateDelete:function(e){this.dialogDeleteOrder=!0,this.tempDelete=e},disableOrderButton:function(){var e=this.orders.filter((function(e){return 0==e.productId.isSale||0==e.productId.stock}));return e.length>0||0==this.orders.length},deleteCartItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.orders.filter((function(t){return t._id!==e.tempDelete._id})),e.orders=r,e.dialogDeleteOrder=!1,a=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/shopping-cart-items/").concat(e),s={headers:a,method:"DELETE",url:n};return g()(s)},t.next=6,b();case 6:if(n=t.sent,!0!==n){t.next=10;break}return t.next=10,a(e.tempDelete._id);case 10:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},printStock:function(e){return e<20&&e>=10?"Stock tersisa > ".concat(e):e<10&&e>=5?"Stock tersisa > 5":e<=4?"Stock tersisa ".concat(e):void 0},loadShoppingCartDetail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$route.params.shoppingCartId,a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/shopping-carts/").concat(r),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:c=t.sent,console.log("shopping cart detail",c),e.supplier=c.data,e.orders=c.data.cartItem,e.orderId=c.data._id;case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadUserMainAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("currentUser")),t=e._id,r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/addresses?userId=").concat(t,"&isMain=true"),o={headers:n,method:"GET",url:s};return g()(o)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.addresses=n.data.addresses,console.log("main address",n.data);case 10:case"end":return t.stop()}}),t)})))()},clickOrder:function(){var e=this.orders.map((function(e){return{quantity:e.quantity,isSale:e.productId.isSale,stock:e.productId.stock}}));console.log(e);var t=e.every((function(e){return 1==e.isSale&&e.quantity<=e.stock}));console.log("validateOrder",t);var r=this.validate();this.addresses.length>0&&r?this.orderDialog=!0:(0==this.addresses.length&&(this.addressError="(alamat belum ada, tidak bisa melanjutkan pemesanan!)"),r||(this.dialogOrderNotSufficientItem=!0))},makeOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a=JSON.parse(localStorage.getItem("currentUser")),n=a._id,s=e.supplier.sellerId._id,o=e.supplier.sellerId.customerId;console.log("orders",e.orders);var i=e.orders.map((function(e){return{confirmedQuantity:e.quantity,quantity:e.quantity,productId:e.productId._id,productPartCode:e.productId.productPartCode,masterProductId:e.productId.masterProductId._id,price:e.productId.masterProductId.price}})),c=e.addresses[0],l=i.reduce((function(e,t){return e+t.quantity*t.price}),0),u={userId:n,buyerAddressId:c,sellerId:s,customerId:o,cartItem:i,total:l,cartId:e.orderId},d={Authorization:"Bearer "+r,"Content-Type":"application/json"},m="".concat(p,"/api/purchase-orders"),v={headers:d,method:"POST",url:m,data:u};return g()(v)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=21;break}return t.prev=5,t.next=8,r();case 8:n=t.sent,console.log(n.data),e.orderDialog=!1,e.$router.push({name:"orderSuccess",query:{sellerId:e.supplier.sellerId._id,storeId:e.supplier.sellerId.storeId._id}}),t.next=21;break;case 14:t.prev=14,t.t0=t["catch"](5),e.orderDialog=!1,e.dialogError=!0,e.dialogErrorMessage=t.t0.response.data.message,e.loadShoppingCartDetail(),console.log(t.t0);case 21:case"end":return t.stop()}}),t,null,[[5,14]])})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},computed:{totalOrder:function(){var e=this.orders.reduce((function(e,t){return e+t.quantity*t.productId.masterProductId.price}),0);return e},addressButtonTitle:function(){return 0==this.addresses.length?"Tambah Alamat":"Ganti Alamat"}},components:{Navbar:q,VClamp:ce["a"]},mixins:[le]}),or=sr,ir=(r("207a"),Object(y["a"])(or,ar,nr,!1,null,null,null)),cr=ir.exports;C()(ir,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var lr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Daftar barang dibeli")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"4",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}})],1),r("v-col",{attrs:{cols:"8",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Pesanan dikirim ke pemasok")])])],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"4"}},[r("v-avatar",{staticClass:"mx-2",attrs:{size:"80"}},["-"!==e.supplier.storeId.image?r("v-img",{attrs:{src:e.apiImage(e.supplier.storeId.image)}}):e._e(),"-"===e.supplier.storeId.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("v-col",{attrs:{cols:"8"}},[r("div",{staticClass:"font-weight-bold primary_grey_1--text"},[e._v(e._s(e.supplier.storeId.name))]),null!=e.supplier.addressId?r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(e._s(e.supplier.addressId.name))]):e._e(),null==e.supplier.addressId?r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("alamat belum ada")]):e._e()])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang dikirim ke alamat")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.user.name+", "+e.buyerAddress.name+", "+e.buyerAddress.description))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Tanggal pembelian")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.dateOrder))])])],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang pesanan")])])],1),r("v-row",{staticClass:"px-1"},e._l(e.purchaseOrderItem,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[t.productId.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.productId.masterProductId.image[0].image)}}):e._e(),0===t.productId.masterProductId.image.length?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.name))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.localShopName))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.partCode))])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price*t.quantity}))+" ")]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Dipesan "+e._s(t.quantity)+" "+e._s(!0===e.purchaseOrder.isConfirmItem?"/ Dikirim "+t.confirmedQuantity:"")+" ")])])])],1)],1)})),1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Total pesanan")]),e.totalOrder!==e.totalConfirmedOrder?r("div",{staticStyle:{"text-decoration":"line-through"}},[e._v(e._s(e.totalOrder))]):e._e(),r("div",[e._v(e._s(e.totalConfirmedOrder))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Status pesanan")]),r("div",{staticClass:"font-weight-bold primary_green_1--text"},[e._v(e._s(e.orderStatus))])])],1),r("v-row",[e.purchaseOrder.isDone?e._e():r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-btn",{attrs:{dark:"",block:"",color:"primary_red_1"},on:{click:function(t){e.confirmIsDoneDialog=!0}}},[e._v("pesanan selesai")])],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmIsDoneDialog,callback:function(t){e.confirmIsDoneDialog=t},expression:"confirmIsDoneDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Pesanan Selesai")]),r("v-card-text",[e._v("Konfirmasi pesanan Anda telah selesai?")]),r("v-card-text",[e._v("(pesanan akan otomatis konfirmasi setelah 2 hari)")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.confirmIsDoneDialog=!1}}},[e._v("tidak")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.confirmOrderIsDone}},[e._v("ya")])],1)],1)],1)],1)},ur=[],dr={mounted:function(){var e=this;Promise.all([this.loadPurchaseOrderItem()]).then((function(){e.isLoading=!1}))},data:function(){return{confirmIsDoneDialog:!1,isLoading:!0,lazyImg:u.a,supplier:{storeId:{image:"",name:""},addressId:{name:""}},purchaseOrder:{isDone:!0,isConfirmItem:!0,isConfirmSendItem:!0,createdAt:""},buyerAddress:{isMain:!0,name:"",description:""},purchaseOrderItem:[],user:{name:""}}},methods:{loadPurchaseOrderItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:c=t.sent,console.log(c.data),e.user=c.data.userId,e.purchaseOrder={_id:c.data._id,isDone:c.data.isDone,isConfirmItem:c.data.isConfirmItem,isConfirmSendItem:c.data.isConfirmSendItem,createdAt:c.data.createdAt},e.supplier=c.data.sellerId,e.buyerAddress=c.data.buyerAddressId,e.purchaseOrderItem=c.data.purchaseOrderItem;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},confirmOrderIsDone:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.purchaseOrderItem),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={isDone:!0},c={headers:s,method:"PUT",url:o,data:i},t.abrupt("return",g()(c));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,1!=a){t.next=17;break}return t.prev=6,t.next=9,r();case 9:e.purchaseOrder.isDone=!0,e.purchaseOrder.isConfirmItem=!0,e.purchaseOrder.isConfirmSendItem=!0,e.confirmIsDoneDialog=!1,t.next=17;break;case 15:t.prev=15,t.t0=t["catch"](6);case 17:case"end":return t.stop()}}),t,null,[[6,15]])})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},computed:{totalOrder:function(){var e=this.purchaseOrderItem.reduce((function(e,t){return e+t.price*t.quantity}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:e})},totalConfirmedOrder:function(){var e=this.purchaseOrderItem.reduce((function(e,t){return e+t.price*t.confirmedQuantity}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:e})},orderStatus:function(){var e=this.purchaseOrder,t=e.isDone,r=e.isConfirmItem,a=e.isConfirmSendItem;return t?"Pesanan selesai":r||a?r&&!a?"Sudah dikonfirmasi":r&&a?"Pesanan dikirim, otomatis selesai dalam 2 hari":"":"Menunggu konfirmasi"},dateOrder:function(){var e=f()(this.purchaseOrder.createdAt).format("DD MMMM YYYY - HH:mm");return e}},components:{Navbar:q,VClamp:ce["a"]},mixins:[le]},mr=dr,pr=(r("ee2d"),Object(y["a"])(mr,lr,ur,!1,null,null,null)),vr=pr.exports;C()(pr,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VToolbarTitle:_e["a"]});var fr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Daftar barang dijual")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"4",md:"4"}},[r("v-skeleton-loader",{attrs:{height:"100",type:"image"}})],1),r("v-col",{attrs:{cols:"8",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"6",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-two-line"}})],1)],1),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Pesanan masuk dari")])])],1),r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"4"}},[r("v-avatar",{staticClass:"mx-2",attrs:{size:"80"}},["-"!==e.buyer.image?r("v-img",{attrs:{src:e.apiImage(e.buyer.image)}}):e._e(),"-"===e.buyer.image?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("v-col",{attrs:{cols:"8"}},[r("div",{staticClass:"font-weight-bold primary_grey_1--text"},[e._v(e._s(e.buyer.name))]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(e._s(e.buyerAddress.name))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang dikirim ke alamat")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.buyer.name+", "+e.buyerAddress.name+", "+e.buyerAddress.description))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Tanggal pemesanan")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(e.dateOrder))])])],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Barang pesanan")])])],1),r("v-row",{staticClass:"px-1"},e._l(e.purchaseOrderItems,(function(t){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[t.productId.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.productId.masterProductId.image[0].image)}}):e._e(),0===t.productId.masterProductId.image.length?r("v-img",{attrs:{src:e.lazyImg}}):e._e()],1)],1),r("v-spacer",[r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.name))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.localShopName))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.partCode))])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.price*t.quantity}))+" ")]),r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(" Dipesan "+e._s(t.quantity)+" "+e._s(!0===e.purchaseOrder.isConfirmItem?"/ Dikirim "+t.confirmedQuantity:"")+" ")])])]),r("div",{staticClass:"pr-2"},[r("v-text-field",{staticClass:"tf mt-4",staticStyle:{"min-width":"60px","max-width":"80px"},attrs:{disabled:e.purchaseOrder.isConfirmItem,color:"primary_red_1",outlined:"",dense:"",type:"number"},model:{value:t.confirmedQuantity,callback:function(r){e.$set(t,"confirmedQuantity",r)},expression:"item.confirmedQuantity"}})],1)],1)],1)],1)})),1),r("v-row",{staticClass:"mb-3 mt-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Total pesanan")]),r("div",[e._v(e._s(e.totalOrder))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Total pesanan yang dikonfirmasi")]),r("div",[e._v(e._s(e.totalOrderConfirmed))])])],1),r("v-row",{staticClass:"mb-3"},[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v("Status pesanan")]),r("div",{staticClass:"font-weight-bold primary_green_1--text"},[e._v(e._s(e.orderStatus))])])],1),e.purchaseOrder.isDone?e._e():r("v-row",[e.purchaseOrder.isConfirmItem?e._e():r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-btn",{attrs:{dark:"",block:"",color:"primary_red_1"},on:{click:function(t){e.confirmItemDialog=!0}}},[e._v("konfirmasi barang")])],1),e.showSendItem(e.purchaseOrder.isConfirmItem,e.purchaseOrder.isConfirmSendItem)?r("v-col",{staticClass:"py-0",attrs:{cols:"12"}},[r("v-btn",{attrs:{dark:"",block:"",color:"primary_red_1"},on:{click:function(t){e.confirmSendItemDialog=!0}}},[e._v("kirim")])],1):e._e()],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmItemDialog,callback:function(t){e.confirmItemDialog=t},expression:"confirmItemDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Konfirmasi Barang")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.confirmItemDialog=!1}}},[e._v("tidak")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.confirmOrderIsConfirmItem}},[e._v("ya")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmSendItemDialog,callback:function(t){e.confirmSendItemDialog=t},expression:"confirmSendItemDialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline"},[e._v("Konfirmasi Kirim")]),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.confirmSendItemDialog=!1}}},[e._v("tidak")]),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:e.confirmOrderIsConfirmSendItem}},[e._v("ya")])],1)],1)],1)],1)},hr=[],gr={mounted:function(){var e=this;Promise.all([this.loadPurchaseOrderItem()]).then((function(){e.isLoading=!1}))},data:function(){return{confirmItemDialog:!1,confirmSendItemDialog:!1,isLoading:!0,lazyImg:u.a,supplier:{storeId:{}},purchaseOrder:{isDone:!0,isConfirmItem:!0,isConfirmSendItem:!0,createdAt:""},purchaseOrderItems:[],buyer:{name:""},buyerAddress:{isMain:!1,name:"",description:""}}},methods:{showSendItem:function(e,t){return console.log("kirim",e!=t),e!=t},loadPurchaseOrderItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:c=t.sent,console.log(c.data),e.buyer=c.data.userId,e.purchaseOrder={_id:c.data._id,isDone:c.data.isDone,isConfirmItem:c.data.isConfirmItem,isConfirmSendItem:c.data.isConfirmSendItem,createdAt:c.data.createdAt},e.buyerAddress=c.data.buyerAddressId,e.supplier=c.data.sellerId,e.purchaseOrderItems=c.data.purchaseOrderItem;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},confirmOrderIsConfirmItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={isConfirmItem:!0,purchaseOrderItems:e.purchaseOrderItems.map((function(e){return{_id:e._id,productId:e.productId._id,confirmedQuantity:e.confirmedQuantity}}))},c={headers:s,method:"PUT",url:o,data:i},t.abrupt("return",g()(c));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,t.prev=4,1!=a){t.next=10;break}return t.next=8,r();case 8:e.purchaseOrder.isConfirmItem=!0,e.confirmItemDialog=!1;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))()},confirmOrderIsConfirmSendItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={isConfirmSendItem:!0},c={headers:s,method:"PUT",url:o,data:i},t.abrupt("return",g()(c));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,t.prev=4,1!=a){t.next=10;break}return t.next=8,r();case 8:e.purchaseOrder.isConfirmSendItem=!0,e.confirmSendItemDialog=!1;case 10:t.next=14;break;case 12:t.prev=12,t.t0=t["catch"](4);case 14:case"end":return t.stop()}}),t,null,[[4,12]])})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},computed:{totalOrder:function(){var e=this.purchaseOrderItems.reduce((function(e,t){return e+t.price*t.quantity}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:e})},totalOrderConfirmed:function(){var e=this.purchaseOrderItems.reduce((function(e,t){return e+t.price*t.confirmedQuantity}),0);return this.numberWithPeriod({currency:"Rp",separator:".",number:e})},orderStatus:function(){var e=this.purchaseOrder,t=e.isDone,r=e.isConfirmItem,a=e.isConfirmSendItem;return!0===a&&!1===t?"Dikirim":!0===a&&!0===t?"Pesanan Sudah Diterima":r&&!a?"Pesanan masuk, sudah dikonfirmasi":!1===a&&!1===t?"Pesanan masuk, menunggu konfirmasi":""},dateOrder:function(){var e=f()(this.purchaseOrder.createdAt).format("DD MMMM YYYY - HH:mm");return e}},components:{Navbar:q,VClamp:ce["a"]},mixins:[le]},br=gr,xr=(r("65d8"),Object(y["a"])(br,fr,hr,!1,null,null,null)),_r=xr.exports;C()(xr,{VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var kr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Setting")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-card",{staticClass:"pa-3"},[r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("div",[e._v("Lock Depot to Dealer")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-switch",{attrs:{color:"primary_red_1"},on:{change:e.toggleLoctDepotToDealer},model:{value:e.setting.lockDepotToDealer,callback:function(t){e.$set(e.setting,"lockDepotToDealer",t)},expression:"setting.lockDepotToDealer"}})],1)],1),r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("div",[e._v("Point multiplier")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6"}},[r("v-layout",{attrs:{"justify-end":"","align-center":""}},[r("div",{staticClass:"mr-2"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:e.setting.pointMultiplier}))+" ")]),r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){e.dialogPoint=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogPoint,callback:function(t){e.dialogPoint=t},expression:"dialogPoint"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Point Multiplier")])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",[r("v-text-field",{attrs:{color:"primary_red_1",type:"number"},model:{value:e.setting.pointMultiplier,callback:function(t){e.$set(e.setting,"pointMultiplier",t)},expression:"setting.pointMultiplier"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogPoint=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"success darken-1",text:""},on:{click:e.savePoint}},[e._v("Save")])],1)],1)],1)],1)},Ir=[],yr={mounted:function(){var e=this;Promise.all([this.getSetting()]).then((function(){e.isLoading=!1}))},data:function(){return{dialogPoint:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,success:!1,error:!1,errorMessage:"",successMessage:"",setting:{_id:"",lockDepotToDealer:!0,pointMultiplier:1e3}}},computed:{},watch:{},created:function(){},methods:{toggleLoctDepotToDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/settings/").concat(e.setting._id),s={headers:a,method:"PUT",url:n,data:{lockDepotToDealer:e.setting.lockDepotToDealer}};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=14;break}return t.prev=5,t.next=8,r();case 8:e.successAlert("Updated"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](5),e.successAlert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})))()},setSetting:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/settings"),n={headers:r,method:"POST",url:a,data:{pointMultiplier:1e3,lockDepotToDealer:!0}};return g()(n)},e.next=3,b();case 3:if(r=e.sent,!0!==r){e.next=9;break}return e.next=7,t();case 7:a=e.sent,console.log("setting",a.data);case 9:case"end":return e.stop()}}),e)})))()},getSetting:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/settings"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=17;break}return t.next=7,r();case 7:if(n=t.sent,!n.data){t.next=13;break}e.setting=n.data,console.log("setting",e.setting),t.next=17;break;case 13:return t.next=15,e.setSetting();case 15:return t.next=17,e.getSetting();case 17:case"end":return t.stop()}}),t)})))()},savePoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/settings/").concat(e.setting._id),s={headers:a,method:"PUT",url:n,data:{pointMultiplier:e.setting.pointMultiplier}};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=15;break}return t.prev=5,t.next=8,r();case 8:e.successAlert("point updated"),e.dialogPoint=!1,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](5),e.successAlert(t.t0);case 15:case"end":return t.stop()}}),t,null,[[5,12]])})))()},apiImage:function(e){return"".concat(p,"/").concat(e)},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)}},components:{Navbar:q},mixins:[le]},wr=yr,Cr=(r("2af0"),Object(y["a"])(wr,kr,Ir,!1,null,null,null)),Pr=Cr.exports;C()(Cr,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VSwitch:Wt["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var Sr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Keranjang")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line, actions"}})],1)],1),r("v-skeleton-loader",{attrs:{type:"list-item"}}),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line, actions"}})],1)],1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(" "+e._s(e.successMessage)+" ")]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(" "+e._s(e.errorMessage)+" ")]),0==e.carts.length?r("v-row",[r("v-col",[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("div",{staticClass:"text-center caption"},[e._v("Keranjang kosong")])])],1)],1):e._e(),e._l(e.carts,(function(t,a){return r("div",{key:t._id},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("div",{staticClass:"caption font-weight-bold primary_grey_1--text"},[e._v(e._s(t.sellerId.storeId.name))]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s("("+t.cartItem.length+" jenis barang)"))])]),r("v-col",{staticClass:"py-0",attrs:{cols:"6",lg:"6",md:"6",sm:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.showProduct(t)}}},[r("v-icon",[e._v(e._s(1==t.show?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1)],1)],1),t.show?r("v-row",{staticClass:"px-1"},e._l(t.cartItem,(function(t,n){return r("v-col",{key:t._id,staticClass:"pa-2",attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"pa-2"},[r("v-avatar",[0===t.productId.masterProductId.image.length?r("v-img",{attrs:{src:e.lazyImg}}):e._e(),t.productId.masterProductId.image.length>0?r("v-img",{attrs:{src:e.apiImage(t.productId.masterProductId.image[0].image)}}):e._e()],1)],1),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.name))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.localShopName))])],1),r("div",{staticClass:"caption primary_black_1--text"},[r("v-clamp",{attrs:{autoresize:"","max-lines":1}},[e._v(e._s(t.productId.masterProductId.partCode))])],1),r("div",{staticClass:"caption font-weight-bold primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.productId.masterProductId.price*t.quantity}))+" ")]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(t.quantity)+" pc")])]),r("v-spacer"),r("div",{staticClass:"mr-2"},[r("v-btn",{attrs:{small:"",fab:"",text:"",dark:"",color:"primary_red_1"},on:{click:function(r){return e.deleteCartItem(t,a,n)}}},[r("v-icon",[e._v("mdi-delete")])],1)],1)],1)],1)],1)})),1):e._e(),r("v-row",{attrs:{align:"center"}},[r("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",[r("div",{staticClass:"text-center font-weight-bold primary_grey_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:e.subTotal(t.cartItem)}))+" ")])])],1),r("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:function(r){return e.gotoOrderConfirmation(t)}}},[e._v("pesan")])],1)],1)],1)],1)}))],2)],1),r("v-footer",[r("v-layout",{attrs:{"justify-center":""}},[r("div",{staticClass:"text-center"},[r("v-pagination",{attrs:{color:"primary_red_1",length:Math.ceil(e.cartCountAll/e.cartCount),"total-visible":7},model:{value:e.pageCart,callback:function(t){e.pageCart=t},expression:"pageCart"}})],1)])],1)],1)},Or=[],jr={mounted:function(){var e=this;Promise.all([this.loadShoppingCart()]).then((function(){e.isLoading=!1})),this.$store.dispatch("setCarts"),console.log("length paginate",Math.ceil(this.cartCountAll/this.cartCount)),console.log("cartCountAll",this.cartCountAll),console.log("cartCount",this.cartCount)},data:function(){return{success:!1,error:!1,errorMessage:"",successMessage:"",isLoading:!0,lazyImg:u.a,carts:[],pageCart:1,cartCount:5,cartCountAll:0}},methods:{gotoOrderConfirmation:function(e){this.$router.push({name:"orderConfirmation",params:{shoppingCartId:e._id}})},showProduct:function(e){1==e.show?e.show=!1:e.show=!0},deleteCartItem:function(e,t,r){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/shopping-cart-items/").concat(e),s={headers:a,method:"DELETE",url:n};return g()(s)},t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=21;break}return t.prev=6,t.next=9,r(e._id);case 9:return console.log(e),a.successAlert("".concat(e.productId.masterProductId.name," terhapus")),t.next=13,a.$store.dispatch("setCarts");case 13:return t.next=15,a.loadShoppingCart();case 15:t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](6),console.log(t.t0),a.errorAlert(t.t0);case 21:case"end":return t.stop()}}),t,null,[[6,17]])})))()},loadShoppingCart:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=JSON.parse(localStorage.getItem("currentUser")),o=s._id,i="".concat(p,"/api/shopping-carts?")+"isEmpty=".concat(!1,"&userId=",o)+"&page=".concat(e.pageCart-1,"&count=").concat(e.cartCount),c={headers:n,method:"GET",url:i},t.abrupt("return",g()(c));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=1,t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=14;break}return t.next=8,r();case 8:return n=t.sent,e.carts=n.data.carts.map((function(e){return Object(ie["a"])({},e,{show:!0})})),e.cartCountAll=n.data.count,console.log("load data count",n.data.count),console.log("load data",n.data),t.abrupt("return",n);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](1),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))()},apiImage:function(e){return"".concat(p,"/").concat(e)},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},subTotal:function(e){var t=e.reduce((function(e,t){return e+t.quantity*t.productId.masterProductId.price}),0);return t}},components:{Navbar:q,VClamp:ce["a"]},computed:{},mixins:[le],watch:{pageCart:function(){this.loadShoppingCart()}}},Rr=jr,Vr=Object(y["a"])(Rr,Sr,Or,!1,null,null,null),Dr=Vr.exports;C()(Vr,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VFooter:Xe["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VPagination:Ge["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VToolbarTitle:_e["a"]});var Tr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Profil Akun")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-layout",{attrs:{"align-end":"","justify-center":""}},[r("div",[r("v-layout",{attrs:{"align-end":"","justify-end":""}},[r("v-avatar",{attrs:{size:"200"}},[r("v-img",{attrs:{src:e.apiImage(e.currentUser.image)}})],1),r("div",{staticStyle:{position:"absolute"}},[r("v-btn",{attrs:{color:"primary_red_1",dark:"",small:"",fab:""},on:{click:function(t){e.dialogImage=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)])],1),r("v-col",{staticClass:"py-2",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-card",{staticClass:"pa-2",attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("div",[r("div",{staticClass:"caption primary_black_1--text"},[e._v("Nama")]),r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.currentUser.name))])]),r("v-spacer"),r("div",["admin"===e.currentUser.role.name?r("v-btn",{attrs:{color:"primary_grey_3",small:"",fab:"",text:""},on:{click:function(t){e.dialogName=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1):e._e()],1)],1)],1)],1),r("v-col",{staticClass:"py-2",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-card",{staticClass:"pa-2",attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("div",[r("div",{staticClass:"caption primary_black_1--text"},[e._v("Email")]),r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.currentUser.email))])]),r("v-spacer"),r("div",[r("v-btn",{attrs:{color:"primary_grey_3",small:"",fab:"",text:""},on:{click:function(t){e.dialogEmail=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)],1),r("v-col",{staticClass:"py-2",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-card",{staticClass:"pa-2",attrs:{flat:""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("div",[r("div",{staticClass:"caption primary_black_1--text"},[e._v("Phone")]),r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(e.currentUser.phone))])]),r("v-spacer"),r("div",[r("v-btn",{attrs:{color:"primary_grey_3",small:"",fab:"",text:""},on:{click:function(t){e.dialogPhone=!0}}},[r("v-icon",[e._v("mdi-pencil")])],1)],1)],1)],1)],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[r("v-btn",{attrs:{color:"primary_red_1",block:"",dark:""},on:{click:e.openDialogPassword}},[e._v("ganti password")])],1)])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogName,callback:function(t){e.dialogName=t},expression:"dialogName"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Ganti Nama")])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formName",attrs:{"lazy-validation":""},model:{value:e.validName,callback:function(t){e.validName=t},expression:"validName"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Nama",rules:e.nameRules},model:{value:e.currentUser.name,callback:function(t){e.$set(e.currentUser,"name",t)},expression:"currentUser.name"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogName}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveName}},[e._v("Simpan")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogEmail,callback:function(t){e.dialogEmail=t},expression:"dialogEmail"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Ganti Email")])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formEmail",attrs:{"lazy-validation":""},model:{value:e.validEmail,callback:function(t){e.validEmail=t},expression:"validEmail"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Email",rules:e.emailRules},model:{value:e.currentUser.email,callback:function(t){e.$set(e.currentUser,"email",t)},expression:"currentUser.email"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogEmail}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveEmail}},[e._v("Simpan")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogPhone,callback:function(t){e.dialogPhone=t},expression:"dialogPhone"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Ganti Nomor Telepon")])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formPhone",attrs:{"lazy-validation":""},model:{value:e.validPhone,callback:function(t){e.validPhone=t},expression:"validPhone"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Phone",rules:e.phoneRules},model:{value:e.currentUser.phone,callback:function(t){e.$set(e.currentUser,"phone",t)},expression:"currentUser.phone"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogPhone}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.savePhone}},[e._v("Simpan")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogPassword,callback:function(t){e.dialogPassword=t},expression:"dialogPassword"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Ganti Password")])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formPassword",attrs:{"lazy-validation":""},model:{value:e.validPassword,callback:function(t){e.validPassword=t},expression:"validPassword"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password lama",rules:[e.rules.required,e.rules.min],type:e.showOldPassword?"text":"password","append-icon":e.showOldPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showOldPassword=!e.showOldPassword}},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password baru",rules:[e.rules.required,e.rules.min],type:e.showNewPassword?"text":"password","append-icon":e.showNewPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showNewPassword=!e.showNewPassword}},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Konfirmasi password baru",rules:[e.rules.required,e.rules.min,e.rules.confirmNewPasswordRules(e.confirmNewPassword,e.newPassword)],type:e.showConfirmNewPassword?"text":"password","append-icon":e.showConfirmNewPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showConfirmNewPassword=!e.showConfirmNewPassword}},model:{value:e.confirmNewPassword,callback:function(t){e.confirmNewPassword=t},expression:"confirmNewPassword"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogPassword}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.savePassword}},[e._v("Simpan")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImage,callback:function(t){e.dialogImage=t},expression:"dialogImage"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Ganti Foto")])]),r("v-card-text",[r("v-container",[r("v-row",[null==e.image?r("v-img",{attrs:{src:e.apiImage(e.currentUser.image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-row",[r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.imageErrorMessage))])])],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogImage}},[e._v("Batal")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveImage}},[e._v("Simpan")])],1)],1)],1)],1)},Ar=[],Er={mounted:function(){var e=this;Promise.all([this.loadCurrentUser(),this.loadCurrentUserLocal()]).then((function(t){e.testUser=t[1],e.isLoading=!1}))},data:function(){return{image:null,imageUrl:"",imageErrorMessage:"",testUser:{},showOldPassword:!1,showNewPassword:!1,showConfirmNewPassword:!1,oldPassword:"",confirmNewPassword:"",newPassword:"",success:!1,error:!1,errorMessage:"",successMessage:"",validName:!1,validEmail:!1,validPhone:!1,validPassword:!1,validImage:!1,dialogName:!1,dialogEmail:!1,dialogPhone:!1,dialogPassword:!1,dialogImage:!1,nameRules:[function(e){return!!e||"Name is required"}],phoneRules:[function(e){return!!e||"Phone is required"}],emailRules:[function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"},confirmNewPasswordRules:function(e,t){return e===t||"confirm password not match"}},isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,currentUser:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},currentUserStore:function(){return this.$store.state.currentUser}},watch:{dialog:function(e){e||this.close()}},created:function(){},methods:{onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},setCurrentUser:function(e){this.$store.commit("setCurrentUser",e)},openDialogPassword:function(){this.resetFormPassword(),this.dialogPassword=!0},resetFormPassword:function(){this.oldPassword="",this.confirmNewPassword="",this.newPassword=""},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},validateName:function(){return this.$refs.formName.validate()},resetValidationName:function(){this.$refs.formName.resetValidation()},validateEmail:function(){return this.$refs.formEmail.validate()},resetValidationEmail:function(){this.$refs.formEmail.resetValidation()},validatePhone:function(){return this.$refs.formPhone.validate()},resetValidationPhone:function(){this.$refs.formPhone.resetValidation()},validatePassword:function(){return this.$refs.formPassword.validate()},resetValidationPassword:function(){this.$refs.formPassword.resetValidation()},resetImageForm:function(){this.image=null,this.imageUrl="",this.imageErrorMessage=""},updateCurrentUserLocal:function(e,t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.loadCurrentUserLocal();case 2:return n=a.sent,n[e]=t,s=JSON.stringify(n),r.setCurrentUser(n),a.next=8,localStorage.setItem("currentUser",s);case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}}),a)})))()},requestUpdateUser:function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/users/").concat(e),i={method:"PUT",headers:n,url:o,data:s};return g()(i)},requestUpdatePassword:function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s={oldPassword:e,confirmNewPassword:t},o="".concat(p,"/api/auth/update-password"),i={method:"POST",headers:n,url:o,data:s};return g()(i)},requestUpdateImage:function(e,t){var r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=new Jt.a;s.append("image",t);var o="".concat(p,"/api/users/").concat(e),i={method:"PUT",headers:n,url:o,data:s};return g()(i)},saveName:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validateName(),!r){t.next=18;break}return t.prev=2,t.next=5,e.requestUpdateUser(e.currentUser._id,{name:e.currentUser.name});case 5:return t.sent,t.next=8,e.updateCurrentUserLocal("name",e.currentUser.name);case 8:e.successAlert("Nama berhasil di ubah"),e.loadCurrentUser(),e.closeDialogName(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.errorAlert(t.t0);case 16:t.next=19;break;case 18:e.errorAlert("invalid input!");case 19:case"end":return t.stop()}}),t,null,[[2,13]])})))()},saveEmail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validateEmail(),!r){t.next=18;break}return t.prev=2,t.next=5,e.requestUpdateUser(e.currentUser._id,{email:e.currentUser.email});case 5:return t.sent,t.next=8,e.updateCurrentUserLocal("email",e.currentUser.email);case 8:e.successAlert("Email berhasil diubah"),e.loadCurrentUser(),e.closeDialogEmail(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.errorAlert(t.t0);case 16:t.next=19;break;case 18:e.errorAlert("invalid input!");case 19:case"end":return t.stop()}}),t,null,[[2,13]])})))()},savePhone:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validatePhone(),!r){t.next=18;break}return t.prev=2,t.next=5,e.requestUpdateUser(e.currentUser._id,{phone:e.currentUser.phone});case 5:return t.sent,t.next=8,e.updateCurrentUserLocal("phone",e.currentUser.phone);case 8:e.successAlert("Phone berhasil diubah"),e.loadCurrentUser(),e.closeDialogPhone(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),e.errorAlert(t.t0);case 16:t.next=19;break;case 18:e.errorAlert("invalid input!");case 19:case"end":return t.stop()}}),t,null,[[2,13]])})))()},saveImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.image){t.next=17;break}return t.prev=1,t.next=4,e.requestUpdateImage(e.currentUser._id,e.image);case 4:return r=t.sent,t.next=7,e.updateCurrentUserLocal("image",r.data.image);case 7:e.successAlert("Foto berhasil diubah"),e.loadCurrentUser(),e.closeDialogImage(),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),e.errorAlert(t.t0);case 15:t.next=18;break;case 17:e.closeDialogImage();case 18:case"end":return t.stop()}}),t,null,[[1,12]])})))()},savePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validatePassword(),!r){t.next=18;break}return t.prev=2,t.next=5,e.requestUpdatePassword(e.oldPassword,e.confirmNewPassword);case 5:t.sent,e.successAlert("Password berhasil diubah"),e.resetFormPassword(),e.closeDialogPassword(),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),console.log(t.t0.response),e.errorAlert(t.t0.response.data.message);case 16:t.next=19;break;case 18:e.errorAlert("invalid input!");case 19:case"end":return t.stop()}}),t,null,[[2,11]])})))()},closeDialogName:function(){this.dialogName=!1,this.resetValidationName()},closeDialogEmail:function(){this.dialogEmail=!1,this.resetValidationEmail()},closeDialogPhone:function(){this.dialogPhone=!1,this.resetValidationPhone()},closeDialogPassword:function(){this.dialogPassword=!1,this.resetValidationPassword()},closeDialogImage:function(){this.dialogImage=!1,this.resetImageForm()},loadCurrentUserLocal:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("currentUser")));case 1:case"end":return e.stop()}}),e)})))()},loadCurrentUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users/").concat(e._id),s={headers:a,method:"GET",url:n};return g()(s)},t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=13;break}return t.next=7,e.loadCurrentUserLocal();case 7:return n=t.sent,t.next=10,r(n);case 10:return s=t.sent,e.currentUser=Object(ie["a"])({},s.data.user,{role:n.role}),t.abrupt("return",s);case 13:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q}},Nr=Er,Mr=(r("2a37"),Object(y["a"])(Nr,Tr,Ar,!1,null,null,null)),zr=Mr.exports;C()(Mr,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var Ur=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Alamat")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-row",{staticClass:"px-1 mb-2"},e._l(e.addresses,(function(t){return r("v-col",{key:t._id,staticClass:"py-1",attrs:{cols:"12",lg:"4",md:"6",sm:"12"}},[r("v-card",{attrs:{flat:"",hover:"",outlined:""}},[r("v-layout",{staticClass:"px-2",attrs:{"align-center":""}},[r("div",[r("div",{staticClass:"caption font-weight-bold primary_black_1--text"},[e._v(e._s(t.name))]),r("div",{staticClass:"caption primary_grey_1--text"},[e._v(e._s(t.description))])]),r("v-spacer"),r("v-checkbox",{staticClass:"py-0",attrs:{color:"primary_red_1"},on:{change:function(r){return e.updateUserAddressIsMain(t)}},model:{value:t.isMain,callback:function(r){e.$set(t,"isMain",r)},expression:"address.isMain"}})],1),r("v-layout",{attrs:{"align-center":""}},[r("v-col",{staticClass:"py-0"},[r("v-btn",{attrs:{block:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.editItem(t)}}},[e._v(" edit ")])],1),r("v-col",{staticClass:"py-0"},[r("v-btn",{attrs:{block:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.deleteItem(t)}}},[e._v(" hapus ")])],1)],1)],1)],1)})),1),0==e.addresses.length?r("v-row",{staticClass:"px-1"},[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",block:"",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("tambah alamat")])],1)],1):e._e()],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Alamat",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Area",rules:e.areaRules},model:{value:e.editedItem.area,callback:function(t){e.$set(e.editedItem,"area",t)},expression:"editedItem.area"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Description",rules:e.descriptionRules},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],label:"Is Main",rules:e.isMainRules,"return-object":""},model:{value:e.editedItem.isMainAlt,callback:function(t){e.$set(e.editedItem,"isMainAlt",t)},expression:"editedItem.isMainAlt"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Hapus Alamat")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},Lr=[],Br=(r("a4d3"),r("e01a"),r("c975"),r("a434"),{mounted:function(){var e=this;Promise.all([this.loadUserAddress()]).then((function(){e.isLoading=!1})),this.loadCurrentUser().then((function(e){console.log(e)}))},data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Jalan is required"}],isMainRules:[function(e){return!!e||"Is Main is required"}],areaRules:[function(e){return!!e||"Area is required"}],customerIdRules:[function(e){return!!e||"Customer Id is required"}],descriptionRules:[function(e){return!!e||"Description is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,points:[],addresses:[],user:{},dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"User Id",value:"userId.name"},{text:"Description",value:"description"},{text:"Is Main",value:"isMain"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:"",area:"",customerId:"",userId:null,description:"",isMain:""},defaultItem:{_id:"",name:"",area:"",customerId:"",userId:null,description:"",isMain:""},item:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"Tambah Alamat":"Edit Alamat"}},methods:{updateUserAddressIsMain:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={_id:e._id,name:e.name,customerId:e.customerId,userId:e.userId._id,description:e.description,isMain:e.isMain},n=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/addresses/user-main-address"),o={headers:a,method:"POST",url:s,data:n};try{return g()(o)}catch(i){throw new Error(i)}},r.next=4,n(a);case 4:t.loadUserAddress();case 5:case"end":return r.stop()}}),r)})))()},stringToBoolean:function(e){return"true"==e},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},updateAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/addresses/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,customerId:e.editedItem.customerId,area:e.editedItem.area,userId:e.editedItem.userId._id,description:e.editedItem.description,isMain:e.stringToBoolean(e.editedItem.isMainAlt)},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/addresses"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=15;break}return t.next=5,e.loadCurrentUser();case 5:return n=t.sent,console.log(n),s={name:e.editedItem.name,customerId:n.customerId,area:e.editedItem.area,userId:n._id,description:e.editedItem.description,isMain:e.stringToBoolean(e.editedItem.isMainAlt)},t.next=10,b();case 10:if(i=t.sent,!0!==i){t.next=13;break}return t.abrupt("return",r(s));case 13:t.next=16;break;case 15:throw new Error("invalid input!");case 16:case"end":return t.stop()}}),t)})))()},loadCurrentUser:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(localStorage.getItem("currentUser")));case 1:case"end":return e.stop()}}),e)})))()},loadUserAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},t.next=4,e.loadCurrentUser();case 4:return s=t.sent,o="".concat(p,"/api/addresses?userId=").concat(s._id),i={headers:n,method:"GET",url:o},t.abrupt("return",g()(i));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,1!=a){t.next=11;break}return t.next=7,r();case 7:n=t.sent,s=n.data.addresses,s.length>0&&(e.addresses=n.data.addresses.map((function(e){return Object(ie["a"])({},e,{isMainAlt:e.isMain.toString()})})),console.log(e.addresses)),console.log(s);case 11:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.addresses.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.addresses.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this.addresses.indexOf(this.item);this.addresses.splice(e,1),this.addresses=this.addresses.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deleteAddress(),this.closeDelete()},deleteAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/addresses/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:t.sent,e.successAlert("Deleted"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.errorAlert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;console.log(this.editedIndex),this.editedIndex>-1?this.updateAddress().then((function(){e.loadUserAddress(),e.successAlert("Updated"),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})):this.saveNewAddress().then((function(){e.loadUserAddress(),e.successAlert("Added"),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q}}),$r=Br,Fr=(r("19bc"),Object(y["a"])($r,Ur,Lr,!1,null,null,null)),Jr=Fr.exports;C()(Fr,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCheckbox:ft["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var qr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Barang")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.desserts,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("My CRUD")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[e._v("New Item")])]}}],null,!1,731274521),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Dessert name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Calories"},model:{value:e.editedItem.calories,callback:function(t){e.$set(e.editedItem,"calories",t)},expression:"editedItem.calories"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Fat (g)"},model:{value:e.editedItem.fat,callback:function(t){e.$set(e.editedItem,"fat",t)},expression:"editedItem.fat"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Carbs (g)"},model:{value:e.editedItem.carbs,callback:function(t){e.$set(e.editedItem,"carbs",t)},expression:"editedItem.carbs"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Protein (g)"},model:{value:e.editedItem.protein,callback:function(t){e.$set(e.editedItem,"protein",t)},expression:"editedItem.protein"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}],null,!1,2985193289)})]],2)],1)],1)},Gr=[],Hr={mounted:function(){this.isLoading=!1},data:function(){return{isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,headers:[{text:"Dessert (100g serving)",align:"left",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Actions",value:"action",sortable:!1}],desserts:[],editedIndex:-1,editedItem:{name:"",calories:0,fat:0,carbs:0,protein:0},defaultItem:{name:"",calories:0,fat:0,carbs:0,protein:0}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize()},methods:{initialize:function(){this.desserts=[{name:"Frozen Yogurt",calories:159,fat:6,carbs:24,protein:4},{name:"Ice cream sandwich",calories:237,fat:9,carbs:37,protein:4.3},{name:"Eclair",calories:262,fat:16,carbs:23,protein:6},{name:"Cupcake",calories:305,fat:3.7,carbs:67,protein:4.3},{name:"Gingerbread",calories:356,fat:16,carbs:49,protein:3.9},{name:"Jelly bean",calories:375,fat:0,carbs:94,protein:0},{name:"Lollipop",calories:392,fat:.2,carbs:98,protein:0},{name:"Honeycomb",calories:408,fat:3.2,carbs:87,protein:6.5},{name:"Donut",calories:452,fat:25,carbs:51,protein:4.9},{name:"KitKat",calories:518,fat:26,carbs:65,protein:7}]},editItem:function(e){this.editedIndex=this.desserts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){var t=this.desserts.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.desserts.splice(t,1)},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){this.editedIndex>-1?Object.assign(this.desserts[this.editedIndex],this.editedItem):this.desserts.push(this.editedItem),this.close()}},components:{Navbar:q}},Wr=Hr,Qr=(r("65f9"),r("71d9")),Kr=Object(y["a"])(Wr,qr,Gr,!1,null,null,null),Yr=Kr.exports;C()(Kr,{VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VIcon:E["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbar:Qr["a"],VToolbarTitle:_e["a"]});var Zr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Promo")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container")],1)],1)},Xr=[],ea={mounted:function(){this.isLoading=!1},data:function(){return{isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a}},components:{Navbar:q}},ta=ea,ra=(r("4fdd"),Object(y["a"])(ta,Zr,Xr,!1,null,null,null)),aa=ra.exports;C()(ra,{VApp:X["a"],VBtn:j["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VIcon:E["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var na=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Featured")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-row",e._l(e.collections,(function(t,a){return r("v-col",{key:a,attrs:{cols:"6",lg:"3",md:"6",sm:"6"}},[r("v-card",{staticClass:"primary_green_1 lighten-2"},[r("v-layout",{staticClass:"pa-5"},[r("div",{staticClass:"white--text"},[e._v(e._s(a))])]),r("v-layout",{staticClass:"px-5 pb-2 pt-0",attrs:{"justify-end":""}},[r("div",{staticClass:"display-1 white--text"},[e._v(e._s(t))])]),r("v-divider",{staticClass:"white"}),r("v-card-actions",{staticClass:"justify-center"},[r("v-btn",{attrs:{dark:"",block:"",text:""},on:{click:function(t){return e.goToCountPage(a)}}},[e._v("Go to Page")])],1)],1)],1)})),1),r("TopSellers"),r("Recommended")],1)],1)],1)},sa=[],oa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"display-1 font-weight-thin"},[e._v("3 Top Sell Dealer")])]),e._l(e.topSellDealers,(function(t){return r("v-col",{key:t._id.customerId,attrs:{cols:"12",lg:"4",md:"4",sm:"12"}},[r("v-card",{staticClass:"pa-3",attrs:{outlined:""}},[r("v-layout",{attrs:{"justify-center":""}},[t.user.length>0?r("div",[e._v(e._s(t.user[0].name))]):r("div",[e._v(e._s("Nama tidak tersedia"))])]),r("v-divider"),r("v-layout",{attrs:{"align-center":""}},[r("div",{staticClass:"mr-3"},[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(t.store[0].image)}})],1)],1),r("v-row",[r("v-col",[r("div",{staticClass:"caption font-weight-bold"},[e._v(e._s(t.store[0].name))]),r("div",{staticClass:"caption"},[e._v(e._s(t.address[0].name))])])],1)],1),r("v-row",[r("v-col",{staticClass:"py-0"},[r("div",{staticClass:"caption text-end"},[e._v(e._s("total produk terjual "+t.total))])])],1)],1)],1)}))],2)},ia=[],ca={mounted:function(){this.setTopSellDealer()},data:function(){return{topSellDealers:[]}},methods:{getTopSellDealer:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,e.next=3,g()({headers:{Authorization:"Bearer "+r,"Content-Type":"application/json"},method:"GET",url:"".concat(p,"/api/sellers/top-sellers")});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))()},setTopSellDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTopSellDealer();case 2:e.topSellDealers=t.sent,console.log("top sell dealer",e.topSellDealers);case 4:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}}},la=ca,ua=Object(y["a"])(la,oa,ia,!1,null,null,null),da=ua.exports;C()(ua,{VAvatar:S["a"],VCard:R["a"],VCol:D["a"],VDivider:A["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"]});var ma=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",[r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("div",{staticClass:"display-1 font-weight-thin"},[e._v("Selected Product")])]),e._l(e.recommendeds,(function(t,a){return r("v-col",{key:a,attrs:{cols:"6",lg:"3",md:"3",sm:"3"}},[r("v-card",{attrs:{outlined:""}},[0==t.masterProduct.image.length?r("v-img",{attrs:{"aspect-ratio":"1.78",src:e.lazyImg}}):e._e(),t.masterProduct.image.length>0?r("v-img",{attrs:{"aspect-ratio":"1.78",contain:"",src:e.apiImage(t.masterProduct.image[0].image)}}):e._e(),r("div",{staticClass:"pa-2"},[r("div",{staticClass:"caption font-weight-bold"},[e._v(e._s(t.masterProduct.name))]),r("div",{staticClass:"caption primary_red_1--text"},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:t.masterProduct.price}))+" ")])]),r("v-divider"),r("v-layout",{staticClass:"py-2",staticStyle:{postition:"absolute"},attrs:{"justify-space-around":""}},[r("v-btn",{attrs:{small:"",text:"",color:"primary_red_1"},on:{click:function(r){return e.editSelectedProduct(t,a+1)}}},[e._v(" select ")]),r("v-btn",{attrs:{small:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.removeSelectedProduct(a+1)}}},[e._v(" remove ")])],1)],1)],1)}))],2),[r("v-dialog",{attrs:{"max-width":"1600px"},model:{value:e.dialogMasterProduct,callback:function(t){e.dialogMasterProduct=t},expression:"dialogMasterProduct"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Master Product")]),r("v-spacer"),r("v-btn",{attrs:{fab:"",text:"",dark:"",small:"",color:"primary_red_1"},on:{click:e.closeDialogMasterProduct}},[r("v-icon",[e._v(" mdi-close ")])],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.masterProductHeaders,items:e.masterProducts,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0"},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTableMasterProduct(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTableMasterProduct}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}]),model:{value:e.searchMasterProduct,callback:function(t){e.searchMasterProduct=t},expression:"searchMasterProduct"}})],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){t.on;return[r("v-chip",{attrs:{dark:"",color:"primary_red_1"},on:{click:function(t){return e.setSelectedProduct(a)}}},[e._v("Select")])]}}],null,!0)},[r("span",[e._v("Select")])])],1)]}},{key:"item.image[0].image",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("v-avatar",{attrs:{tile:""}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(a.image[0].image),"aspect-ratio":"3"}})],1)],1)]}}])})]],2)],1),r("v-divider")],1)],1)],r("v-snackbar",{model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.snackbarText)+" "),r("v-btn",{attrs:{color:"primary_red_1",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v(" Close ")])],1)],2)},pa=[],va=r("3835"),fa={mounted:function(){Promise.allSettled([this.getMasterProducts(),this.getSelectedProducts()]).then((function(){})).catch((function(e){}))},data:function(){return{snackbar:!1,snackbarText:"",lazyImg:u.a,update:!1,recommendeds:[],position:0,selectedProduct:{},searchMasterProduct:"",masterProducts:[],dialogMasterProduct:!1,masterProductHeaders:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Part Code",value:"partCode"},{text:"Image",value:"image[0].image"},{text:"Actions",value:"action",sortable:!1}]}},methods:{getSelectedProducts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/selected-products"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=12;break}return t.next=7,r();case 7:n=t.sent,s=Object(va["a"])(n.data.selectedProducts,4),o=s[0],i=s[1],c=s[2],l=s[3],u={_id:"",productPartCode:"",postition:0,masterProduct:{name:"No Item",price:0,image:[],partCode:""}},e.recommendeds=[o||u,i||u,c||u,l||u],console.log(n.data);case 12:case"end":return t.stop()}}),t)})))()},getMasterProducts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/master-products"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},removeSelectedProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={productPartCode:"",postition:e,masterProduct:{name:"No Item",price:0,image:[],partCode:""}},t.$set(t.recommendeds,e-1,a),r.prev=2,r.next=5,t.deleteSelectedProduct({position:e});case 5:t.showSnacbar("removed"),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),t.showSnacbar(r.t0);case 11:case"end":return r.stop()}}),r,null,[[2,8]])})))()},editSelectedProduct:function(e,t){this.dialogMasterProduct=!0,this.selectedProduct=e,this.position=t},closeDialogMasterProduct:function(){this.dialogMasterProduct=!1},searchDataTableMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products?keyword=").concat(e.searchMasterProduct),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},setSelectedProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={productPartCode:e.partCode,masterProduct:e,position:t.position},t.recommendeds[t.position-1]=a,r.prev=2,r.next=5,t.createSelectedProduct({productPartCode:e.partCode,masterProductId:e._id,position:t.position});case 5:t.showSnacbar("success"),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),t.showSnacbar(r.t0);case 11:t.closeDialogMasterProduct();case 12:case"end":return r.stop()}}),r,null,[[2,8]])})))()},showSnacbar:function(e){this.snackbar=!0,this.snackbarText=e},deleteSelectedProduct:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/selected-products/").concat(e.position),s={headers:a,method:"DELETE",url:n};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=7;break}return t.next=7,r(e);case 7:case"end":return t.stop()}}),t)})))()},createSelectedProduct:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/selected-products"),s={headers:a,method:"POST",url:n,data:e};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=7;break}return t.next=7,r(e);case 7:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)}},mixins:[le]},ha=fa,ga=Object(y["a"])(ha,ma,pa,!1,null,null,null),ba=ga.exports;C()(ga,{VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSnackbar:ee["a"],VSpacer:F["a"],VTextField:xe["a"],VTooltip:xt["a"]});var xa={mounted:function(){var e=this;Promise.all([this.loadCollection()]).then((function(t){e.isLoading=!1}))},data:function(){return{isLoading:!0,value1:[423,446,675,510,590,610,760],value2:[423,590,760,510,675,446,610],skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,collections:{},charts:{"Purchase Last 12 Month":[{month:1},{month:2},{month:3},{month:4},{month:5},{month:6},{month:7},{month:8},{month:9},{month:10},{month:11},{month:12}],"Purchase Last 6 Month":[{month:1},{month:2},{month:3},{month:4},{month:5},{month:6}],"Purchase Last 3 Month":[{month:1},{month:2},{month:3}]}}},methods:{goToCountPage:function(e){"Master Product Count"==e?this.$router.push("/master-products"):"Purchase Order Count"==e?this.$router.push("/purchases"):"Dealer Count"==e?this.$router.push("/dealers"):"Depot Count"==e&&this.$router.push("/depots")},loadCollection:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/collections"),n={headers:r,method:"GET",url:a};return g()(n)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.collections=n.data;case 9:case"end":return t.stop()}}),t)})))()}},components:{Navbar:q,TopSellers:da,Recommended:ba}},_a=xa,ka=(r("bf80"),Object(y["a"])(_a,na,sa,!1,null,null,null)),Ia=ka.exports;C()(ka,{VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDivider:A["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VToolbarTitle:_e["a"]});var ya=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Report")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.purchaseOrderItems,"sort-by":"index",loading:e.loading,page:e.page,options:e.options,"server-items-length":e.serverItemLength,"items-per-page":e.perPage},on:{"update:page":function(t){e.page=t},"update:options":function(t){e.options=t},"update:itemsPerPage":function(t){e.perPage=t},"update:items-per-page":function(t){e.perPage=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.exportReportPurchaseOrder}},[e._v("Export Report")]),r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},[r("v-icon",[e._v("mdi-arrow-expand")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.productId.price",fn:function(t){var a=t.item;return[r("div",[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.productId.price}))+" ")])]}},{key:"item.quantity",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("div",[e._v(e._s(a.quantity))])])]}},{key:"item.confirmedQuantity",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("div",[e._v(e._s(a.confirmedQuantity))])])]}},{key:"item.createdAt",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(e.printDate(a.createdAt)))])]}}],null,!1,1905680236)})]],2)],1)],1)},wa=[],Ca=(r("466d"),{mounted:function(){var e=this,t=[this.setPurchaseState()];Promise.all(t).then((function(){e.isLoading=!1}))},data:function(){return{loading:!1,search:"",headers:[{text:"Dealer Store",value:"purchaseOrderId.sellerId.storeId.name"},{text:"Depot",value:"purchaseOrderId.userId.name"},{text:"Purchase Date",value:"createdAt"}],toggleHeader:!0,purchaseOrderItems:[],backupPurchaseOrderItems:[],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],page:1,perPage:10,options:{},serverItemLength:0}},methods:{expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Dealer Store",value:"purchaseOrderId.sellerId.storeId.name"},{text:"Depot",value:"purchaseOrderId.userId.name"},{text:"Purchase Date",value:"createdAt"}],t=[{text:"No",value:"index"},{text:"Dealer Store",value:"purchaseOrderId.sellerId.storeId.name"},{text:"Depot",value:"purchaseOrderId.userId.name"},{text:"Product Name",value:"productId.masterProductId.name"},{text:"Product Local Shop Name",value:"productId.masterProductId.localShopName"},{text:"Product Part Code",value:"productId.masterProductId.partCode"},{text:"Price",value:"productId.price"},{text:"Quantity",value:"quantity"},{text:"Confirmed Quantity",value:"confirmedQuantity"},{text:"Purchase Date",value:"createdAt"}];this.toggleHeader?this.headers=e:this.headers=t},searchDataTable:function(){console.log("searching");var e=this.search.toLowerCase(),t=this.backupPurchaseOrderItems;if(e.length>0){var r=t.filter((function(t){return t.productId.masterProductId.name.toLowerCase().match(e)||t.productId.masterProductId.partCode.toLowerCase().match(e)||t.productId.masterProductId.localShopName.toLowerCase().match(e)||t.purchaseOrderId._id.toLowerCase().match(e)||t.purchaseOrderId.userId.name.toLowerCase().match(e)||t.purchaseOrderId.sellerId.name.toLowerCase().match(e)}));this.purchaseOrderItems=r}else this.purchaseOrderItems=this.backupPurchaseOrderItems},getPurchaseOrder:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/purchase-order-items"),o={params:{page:e.page,perPage:e.perPage},headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})))()},setPurchaseState:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getPurchaseOrder();case 2:r=t.sent,console.log(r),e.purchaseOrderItems=r.data.purchaseOrderItems.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.serverItemLength=r.data.count,console.log(e.purchaseOrderItems),e.backupPurchaseOrderItems=e.purchaseOrderItems;case 8:case"end":return t.stop()}}),t)})))()},printDate:function(e){return f()(e).format("dddd, DD MMMM YYYY")},exportReportPurchaseOrder:function(){var e=this,t=this.backupPurchaseOrderItems;t=t.map((function(t){return{No:t.index+1,"Dealer Name":t.purchaseOrderId&&t.purchaseOrderId.sellerId?t.purchaseOrderId.sellerId.name:"Nama tidak tersedia","Dealer Store":t.purchaseOrderId&&t.purchaseOrderId.sellerId&&t.purchaseOrderId.sellerId.storeId?t.purchaseOrderId.sellerId.storeId.name:"Nama toko tidak tersedia","Depot Name":t.purchaseOrderId&&t.purchaseOrderId.userId?t.purchaseOrderId.userId.name:"Nama depot tidak tersedia","Purhchase ID":t._id,"Product Name":t.productId&&t.productId.masterProductId?t.productId.masterProductId.name:"Nama produk tidak tersedia","Product Local Shop Name":t.productId&&t.productId.masterProductId?t.productId.masterProductId.localShopName:"Nama bahasa bengkel produk tidak tersedia","Product Part Code":t.productId&&t.productId.masterProductId?t.productId.masterProductId.partCode:"Kode part produk tidak tersedia",Price:t.productId?t.productId.price:"Harga tidak tersedia",Quantity:t.quantity,"Confirmed Quantity":t.confirmedQuantity,Date:e.printDate(t.created)}}));var r=[];for(var a in t[0])r.push(a);var n=t.map((function(e){return r.map((function(t){return e[t]}))})),s=[r].concat(Object(ae["a"])(n)),o="";s.forEach((function(e,t){e.forEach((function(e,t){o+=e+","})),o+="\r\n"})),o="data:application/csv,"+encodeURIComponent(o);var i=document.createElement("A");i.setAttribute("href",o),i.setAttribute("download","purchase order report.csv"),document.body.appendChild(i),i.click()}},created:function(){},computed:{},components:{Navbar:q},mixins:[le],watch:{options:{handler:function(){this.setPurchaseState()},deep:!0}}}),Pa=Ca,Sa=Object(y["a"])(Pa,ya,wa,!1,null,null,null),Oa=Sa.exports;C()(Sa,{VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VTextField:xe["a"],VToolbarTitle:_e["a"]});var ja=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Slide")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"sort-by":"index",items:e.slides},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Slide")])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("v-avatar",{attrs:{tile:""}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(a.image),"aspect-ratio":"3"}})],1)],1)]}},{key:"item.isActive",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"true"==a.isActive?"success":"primary_red_1",dark:""}},[e._v(e._s(a.isActive))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1851472428)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))]),r("v-spacer"),r("v-btn",{attrs:{fab:"",text:"",dark:"",small:"",color:"primary_red_1"},on:{click:e.closeEditOrNew}},[r("v-icon",[e._v(" mdi-close ")])],1)],1),r("v-card-text",[r("v-container",[r("v-row",[null==e.image&&-1!==e.editedIndex?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Description",rules:e.descriptionRules},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],rules:e.isActiveRules,label:"isActive","return-object":""},model:{value:e.editedItem.isActive,callback:function(t){e.$set(e.editedItem,"isActive",t)},expression:"editedItem.isActive"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.imageErrorMessage)+" ")])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Download template untuk import data dalam bentuk Microsoft Excel (xls) ")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.csvErrorMessage)+" ")])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},Ra=[],Va={mounted:function(){var e=this;Promise.all([this.loadSlide()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Name is required"}],descriptionRules:[function(e){return!!e||"Description is required"}],isActiveRules:[function(e){return!!e||"Is Active is required"}],imageErrorMessage:"",imageUrl:"",image:null,fileImage:{},search:"",success:!1,error:!1,errorMessage:"",successMessage:"",item:{},slides:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Is Active",value:"isActive"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:"",isActive:"",image:"",description:""},defaultItem:{_id:"",name:"",isActive:"",image:"",description:""},tempDelete:0,dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Slide":"Edit Slide"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},fileSize:function(e){if(e>=1024&&e<1048576){var t=e/1024;return t=this.roundUp(t,2),"(".concat(t," KB)")}if(e>=1048576){var r=e/1048576;return r=this.roundUp(r,2),"(".concat(r," MB)")}},stringToBoolean:function(e){return"true"==e},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/slides?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.slides=n.data.slides.map((function(e,t){return Object(ie["a"])({index:t},e)}));case 9:case"end":return t.stop()}}),t)})))()},resetErrorMessage:function(){this.imageErrorMessage=""},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},updateSlide:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r,a){var n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("auth")),s=n.token,o={Authorization:"Bearer "+s,"Content-Type":"multipart/form-data"},i=new Jt.a,i.append("image",a),i.append("name",r.name),i.append("description",r.description),i.append("isActive",e.stringToBoolean(r.isActive)),c="".concat(p,"/api/slides/").concat(r._id),l={headers:o,method:"PUT",url:c,data:i},t.prev=9,t.next=12,g()(l);case 12:return t.abrupt("return",t.sent);case 15:throw t.prev=15,t.t0=t["catch"](9),new Error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e,r){return t.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,isActive:e.editedItem.isActive,description:e.editedItem.description},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewSlide:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r,a){var n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(localStorage.getItem("auth")),s=n.token,o={Authorization:"Bearer "+s,"Content-Type":"application/json"},i=new Jt.a,i.append("image",a),i.append("name",r.name),i.append("description",r.description),i.append("isActive",e.stringToBoolean(r.isActive)),c="".concat(p,"/api/slides"),l={headers:o,method:"POST",url:c,data:i},t.prev=9,t.next=12,g()(l);case 12:return t.abrupt("return",t.sent);case 15:throw t.prev=15,t.t0=t["catch"](9),new Error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e,r){return t.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,description:e.editedItem.description,isActive:e.editedItem.isActive},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},emptyFormData:function(){this.image=null,this.imageUrl=""},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadSlide:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/slides"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.slides=n.data.slides.map((function(e,t){return Object(ie["a"])({},e,{isActive:e.isActive.toString(),index:t})}));case 9:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.slides.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.slides.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteSlide().then((function(){var t=e.slides.indexOf(e.item);e.slides.splice(t,1),e.slides=e.slides.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteSlide:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/slides/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetErrorMessage(),this.emptyFormData(),this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateSlide().then((function(){e.closeEditOrNew(),e.loadSlide(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewSlide().then((function(){e.closeEditOrNew(),e.loadSlide(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q},mixins:[le]},Da=Va,Ta=(r("be49"),Object(y["a"])(Da,ja,Ra,!1,null,null,null)),Aa=Ta.exports;C()(Ta,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Ea=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Master Product")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.masterProducts,"sort-by":"index",loading:e.loadingMasterProduct,page:e.page,options:e.options,"server-items-length":e.serverItemLength,"items-per-page":e.perPage},on:{"update:page":function(t){e.page=t},"update:options":function(t){e.options=t},"update:itemsPerPage":function(t){e.perPage=t},"update:items-per-page":function(t){e.perPage=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.loadMasterProduct(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.loadMasterProduct}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,3278202704),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{disabled:e.masterProductImport.isImporting,dark:!e.masterProductImport.isImporting,color:"primary_red_1"},on:{click:function(t){e.importDialog=!0}}},a),[e.masterProductImport.isImporting?r("v-progress-circular",{staticClass:"mr-2",attrs:{size:20,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),r("v-icon",[e._v("mdi-file-import")])],1)]}}],null,!1,2933222540)},[r("span",[e._v("Import CSV")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialogMonitoringImport=!0}}},a),[r("v-icon",[e._v("mdi-progress-upload")])],1)]}}],null,!1,154463025)},[r("span",[e._v("Import Progress")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},a),[r("v-icon",[e._v("mdi-plus-box")])],1)]}}],null,!1,4141623889)},[r("span",[e._v("New Product")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},a),[r("v-icon",[e._v("mdi-arrow-expand")])],1)]}}],null,!1,3649623414)},[r("span",[e._v("Expand Table")])])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.lowestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.lowestPrice}))+" ")])]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.highestPrice}))+" ")])]}},{key:"item.image[0].image",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("v-avatar",{attrs:{tile:""}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(a.image[0].image),"aspect-ratio":"3"}})],1)],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,3684552859)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[null==e.image&&-1!==e.editedIndex?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image[0].image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.localShopNameRules,label:"Nama Bengkel"},model:{value:e.editedItem.localShopName,callback:function(t){e.$set(e.editedItem,"localShopName",t)},expression:"editedItem.localShopName"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.priceRules,label:"Price",type:"number"},model:{value:e.editedItem.price,callback:function(t){e.$set(e.editedItem,"price",t)},expression:"editedItem.price"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.lowestPriceRules,label:"Lowest Price",type:"number"},model:{value:e.editedItem.lowestPrice,callback:function(t){e.$set(e.editedItem,"lowestPrice",t)},expression:"editedItem.lowestPrice"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.highestPriceRules,label:"Highest Price",type:"number"},model:{value:e.editedItem.highestPrice,callback:function(t){e.$set(e.editedItem,"highestPrice",t)},expression:"editedItem.highestPrice"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.productBrands,rules:e.productBrandIdRules,"item-text":"name",label:"Product Brand Id","return-object":""},model:{value:e.editedItem.productBrandId,callback:function(t){e.$set(e.editedItem,"productBrandId",t)},expression:"editedItem.productBrandId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.productCategories,rules:e.productCategoryIdRules,"item-text":"name",label:"Product Category Id","return-object":""},model:{value:e.editedItem.productCategoryId,callback:function(t){e.$set(e.editedItem,"productCategoryId",t)},expression:"editedItem.productCategoryId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.partCodeRules,label:"Part Code"},model:{value:e.editedItem.partCode,callback:function(t){e.$set(e.editedItem,"partCode",t)},expression:"editedItem.partCode"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.sellerCountRules,label:"Seller Count",type:"number"},model:{value:e.editedItem.sellersCount,callback:function(t){e.$set(e.editedItem,"sellersCount",t)},expression:"editedItem.sellersCount"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.units,rules:e.unitIdRules,"item-text":"name",label:"Unit Id","return-object":""},model:{value:e.editedItem.unitId,callback:function(t){e.$set(e.editedItem,"unitId",t)},expression:"editedItem.unitId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.descriptionRules,label:"Description"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.vehicleTypeRules,label:"Vehicle Type"},model:{value:e.editedItem.vehicleType,callback:function(t){e.$set(e.editedItem,"vehicleType",t)},expression:"editedItem.vehicleType"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.imageErrorMessage))])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.importDialog,callback:function(t){e.importDialog=t},expression:"importDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplateMasterProduct}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[e.isProgressImport?r("v-progress-circular",{attrs:{size:30,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),e.isProgressImport?r("div",{staticClass:"ml-3 primary_grey_1--text"},[e._v("importing")]):e._e(),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1"},on:{click:e.closeImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("Import")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.dialogMonitoringImport,callback:function(t){e.dialogMonitoringImport=t},expression:"dialogMonitoringImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import Master Product")]),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){e.dialogMonitoringImport=!1}}},[e._v("close")])],1),r("v-card-text",[r("v-container",[r("span",{},[e._v("Progress")]),r("span",[e._v(" "+e._s("("+e.currentPosition+" of "+e.json.length+") "+(e.json.length>0?e.roundUp(100*e.currentPosition/e.json.length,2)+"%":""))+" "),e.currentPosition==e.json.length&&e.json.length>0?r("v-chip",{attrs:{small:"",color:"success"}},[e._v("done")]):e._e()],1),r("v-alert",{attrs:{value:e.importError,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.importError,callback:function(t){e.importError=t},expression:"importError"}},[e._v(e._s("error "+e.importErrorMessage+", data number "+e.currentPosition))]),r("v-layout",{staticClass:"mb-2"},[e.importError?r("v-btn",{staticClass:"mr-2",attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.executeImport}},[e._v("continue import")]):e._e(),e.importError?r("v-btn",{attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.importContinueAll}},[e._v("continue import all")]):e._e()],1),r("v-data-table",{staticClass:"elevation-1",attrs:{"loading-text":"loading import products...",headers:e.jsonHeaders,items:e.json,"sort-by":"index"},scopedSlots:e._u([{key:"item.isSale",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(1==a.isSale?"yes":"no"))])]}},{key:"item.statusImport",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"success"==a.statusImport?"success":"error"==a.statusImport?"primary_red_1":"grey",dark:""}},[e._v(e._s(a.statusImport))])]}}])})],1)],1),r("v-card-actions",[r("v-spacer"),r("div",[r("v-row",[r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{staticClass:"mx-1",attrs:{text:"",dark:"",color:"blue darken-1"},on:{click:e.downloadImportReport}},[e._v("download import report")])],1)],1),r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.pauseImportState}},a),[r("v-icon",[e._v("mdi-pause")])],1)]}}])},[r("span",[e._v("pause")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.continueImportState}},a),[r("v-icon",[e._v("mdi-play")])],1)]}}])},[r("span",[e._v("continue")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.resetImportState}},a),[r("v-icon",[e._v("mdi-stop")])],1)]}}])},[r("span",[e._v("stop")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.dialogMonitoringImport=!1}}},a),[r("v-icon",[e._v("mdi-window-minimize")])],1)]}}])},[r("span",[e._v("minimize")])])],1)],1)],1)],1)],1)],1)],1)],1)},Na=[],Ma={mounted:function(){var e=this;Promise.all([this.importStatus(),this.loadMasterProduct(),this.loadUnit(),this.loadProductBrand(),this.loadProductCategory()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",csvUrl:"",csv:null,csvName:"",csvErrorMessage:"",importDialog:!1,isProgressImport:!1,image:null,imageUrl:"",imageErrorMessage:"",valid:!0,nameRules:[function(e){return!!e||"Name is required"}],localShopNameRules:[function(e){return!!e||"Local shop name is required"}],priceRules:[function(e){return!!e||"Price is required"}],lowestPriceRules:[function(e){return!!e||"Lowest price is required"}],highestPriceRules:[function(e){return!!e||"Highest price is required"}],productBrandIdRules:[function(e){return!!e||"Product Brand is required"}],productCategoryIdRules:[function(e){return!!e||"Product Brand is required"}],partCodeRules:[function(e){return!!e||"Part code is required"}],sellerCountRules:[function(e){return e>-1||"Seller Count is required"}],unitIdRules:[function(e){return!!e||"Unit is required"}],descriptionRules:[function(e){return!!e||"description is required"}],vehicleTypeRules:[function(e){return!!e||"vehicle type is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},productBrands:[],productCategories:[],units:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,editedIndex:-1,editedItem:{_id:"",name:"",localShopName:"",price:0,lowestPrice:0,highestPrice:0,productCategoryId:null,productBrandId:null,partCode:"",unitId:null,description:""},defaultItem:{_id:"",name:"",localShopName:"",price:0,lowestPrice:0,highestPrice:0,productCategoryId:null,productBrandId:null,partCode:"",unitId:null,description:""},masterProducts:[],tempDelete:0,masterProductImport:{name:"master-product",isImporting:!1},json:[],backupI:0,currentPosition:0,continueAll:!1,continue:!0,importError:!1,importErrorMessage:"",jsonHeaders:[{text:"no",value:"no"},{text:"partCode",value:"partCode"},{text:"name",value:"name"},{text:"localShopName",value:"localShopName"},{text:"description",value:"description"},{text:"price",value:"price"},{text:"lowestPrice",value:"lowestPrice"},{text:"highestPrice",value:"highestPrice"},{text:"productCategory",value:"productCategory"},{text:"unit",value:"unit"},{text:"productBrand",value:"productBrand"},{text:"vehicleType",value:"vehicleType"},{text:"statusImport",value:"statusImport"},{text:"message",value:"message"}],dialogMonitoringImport:!1,page:1,perPage:10,loadingMasterProduct:!1,options:{},serverItemLength:0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Product":"Edit Product"}},watch:{dialog:function(e){e||this.closeEditOrNew()},options:{handler:function(){this.loadMasterProduct()},deep:!0}},created:function(){},methods:{downloadImportReport:function(){var e=this.json,t=[],r=[];for(var a in console.log("templates",e),e=e.length>0?e.map((function(e){return{partCode:e.partCode,name:e.name,localShopName:e.localShopName,description:e.description,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,productCategory:e.productCategory,unit:e.unit,productBrand:e.productBrand,vehicleType:e.vehicleType,statusImport:e.statusImport,message:e.message}})):[{partCode:"",name:"",localShopName:"",description:"",price:0,lowestPrice:0,highestPrice:0,productCategory:"",unit:"",productBrand:"",vehicleType:"",statusImport:"",message:""}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","import-report-master-products.csv"),document.body.appendChild(o),o.click()},importContinueAll:function(){this.continueAll=!0,this.executeImport()},requestImport:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products/import-master-product"),o={headers:n,method:"POST",url:s,data:e},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})))()},parsingCsv:function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/csv-parser/master-products"),n=new Jt.a;n.append("csv",this.csv);var s={headers:r,method:"POST",url:a,data:n};return g()(s)},submitImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=18;break}return e.backupI=0,e.currentPosition=0,e.isProgressImport=!0,t.next=9,e.parsingCsv();case 9:a=t.sent,e.isProgressImport=!1,e.importDialog=!1,console.log(a.data),n=a.data,e.json=n.json,e.json=e.json.map((function(e,t){return Object(ie["a"])({},e,{no:t+1,statusImport:"processing",message:"waiting"})})),e.dialogMonitoringImport=!0,e.executeImport();case 18:case"end":return t.stop()}}),t)})))()},executeImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=42;break}a=(new Date).valueOf(),e.backupI=e.currentPosition,e.resetImportError(),n=e.backupI;case 8:if(!(n<e.json.length)){t.next=41;break}return t.prev=9,t.next=12,e.requestImport(e.json[n]);case 12:if(s=t.sent,e.json[n].statusImport=s.data.statusImport,e.json[n].message=s.data.message,e.currentPosition=n+1,e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),!e.continue){t.next=21;break}return t.abrupt("continue",38);case 21:return t.abrupt("break",41);case 22:t.next=38;break;case 24:if(t.prev=24,t.t0=t["catch"](9),e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),console.log(t.t0.response),e.currentPosition=n+1,e.json[n].statusImport=t.t0.response.data.statusImport,e.json[n].message=t.t0.response.data.message,e.importErrorMessage=t.t0.response.data.message,e.importError=!0,!e.continueAll){t.next=37;break}return t.abrupt("continue",38);case 37:return t.abrupt("break",41);case 38:n++,t.next=8;break;case 41:console.log("imported in ".concat((new Date).valueOf()-a,"ms"));case 42:case"end":return t.stop()}}),t,null,[[9,24]])})))()},resetImportError:function(){this.importError=!1,this.importErrorMessage=""},resetImportState:function(){this.resetImportError(),this.backupI=0,this.currentPosition=0,this.continueAll=!1,this.continue=!0,this.json=[]},continueImportState:function(){this.continue=!0,this.executeImport()},pauseImportState:function(){this.continue=!1},importStatus:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("master-product").on("value",(function(t){var r;for(var a in console.log("master-product",t.val()),t.val())r=t.val()[a];e.masterProductImport=r,e.loadMasterProduct()}));case 1:case"end":return t.stop()}}),t)})))()},expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Lowest Price",value:"lowestPrice"},{text:"Highest Price",value:"highestPrice"},{text:"Product Brand Id",value:"productBrandId.name"},{text:"Product Category Id",value:"productCategoryId.name"},{text:"Part Code",value:"partCode"},{text:"Seller Count",value:"sellersCount"},{text:"Unit Id",value:"unitId.name"},{text:"Description",value:"description"},{text:"Image",value:"image[0].image"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},downloadTemplateMasterProduct:function(){var e=[],t=[],r=[];for(var a in e=e.length>0?e.map((function(e){return{partCode:e.partCode,name:e.name,localShopName:e.localShopName,description:e.description,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,productCategory:e.productCategoryId.name,unit:e.unitId.name,productBrand:e.productBrandId.name,vehicleType:e.vehicleType}})):[{partCode:"",name:"",localShopName:"",description:"",price:0,lowestPrice:0,highestPrice:0,productCategory:"",unit:"",productBrand:"",vehicleType:""}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","master-product-template.csv"),document.body.appendChild(o),o.click()},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},apiImage:function(e){return"".concat(p,"/").concat(e)},closeImport:function(){this.importDialog=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"},s=new Jt.a,s.append("csv",t),o="".concat(p,"/api/master-products/bulk"),i={headers:n,method:"POST",url:o,data:s},e.prev=6,g.a.defaults.timeout=6e5,e.next=10,g()(Object(ie["a"])({},i,{timeout:6e5}));case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e["catch"](6),new Error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},fileSize:function(e){if(e>=1024&&e<1048576){var t=e/1024;return t=this.roundUp(t,2),"(".concat(t," KB)")}if(e>=1048576){var r=e/1048576;return r=this.roundUp(r,2),"(".concat(r," MB)")}},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updateMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/master-products/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,localShopName:e.editedItem.localShopName,price:e.editedItem.price,lowestPrice:e.editedItem.lowestPrice,highestPrice:e.editedItem.highestPrice,productBrandId:e.editedItem.productBrandId._id,productCategoryId:e.editedItem.productCategoryId._id,partCode:e.editedItem.partCode,sellersCount:e.editedItem.sellersCount,unitId:e.editedItem.unitId._id,description:e.editedItem.description,vehicleType:e.editedItem.vehicleType},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("name",t.name),o.append("localShopName",t.localShopName),o.append("partCode",t.partCode),o.append("price",t.price),o.append("lowestPrice",t.lowestPrice),o.append("highestPrice",t.highestPrice),o.append("productBrandId",t.productBrandId),o.append("productCategoryId",t.productCategoryId),o.append("sellersCount",t.sellersCount),o.append("unitId",t.unitId),o.append("description",t.description),o.append("vehicleType",t.vehicleType),o.append("image",r),i="".concat(p,"/api/master-products"),c={headers:s,method:"POST",url:i,data:o},e.prev=18,e.next=21,g()(c);case 21:return e.abrupt("return",e.sent);case 24:throw e.prev=24,e.t0=e["catch"](18),new Error(e.t0);case 27:case"end":return e.stop()}}),e,null,[[18,24]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,localShopName:e.editedItem.localShopName,price:e.editedItem.price,lowestPrice:e.editedItem.lowestPrice,highestPrice:e.editedItem.highestPrice,productBrandId:e.editedItem.productBrandId._id,productCategoryId:e.editedItem.productCategoryId._id,sellersCount:e.editedItem.sellersCount,partCode:e.editedItem.partCode,unitId:e.editedItem.unitId._id,description:e.editedItem.description},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},successAlert:function(e){this.successMessage=e,this.success=!0},errorAlert:function(e){this.errorMessage=e,this.error=!0},loadUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/units"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.units=i.data.units;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadProductCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-categories"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.productCategories=i.data.productCategories;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadProductBrand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-brands"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.productBrands=i.data.productBrands;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loadingMasterProduct=!0,r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products?keyword=").concat(e.search,"&page=").concat(e.page,"&perPage=").concat(e.perPage),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=14;break}return t.next=8,r();case 8:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.serverItemLength=n.data.count,e.loadingMasterProduct=!1,console.log("master product",e.page),console.log("master product data",n.data);case 14:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.masterProducts.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e,this.deleteDialog=!0},confirmDelete:function(){var e=this.masterProducts.indexOf(this.item);this.masterProducts.splice(e,1),this.masterProducts=this.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deleteMasterProduct(),this.closeDelete()},deleteMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/master-products/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:return c=t.sent,e.successAlert("Deleted"),t.abrupt("return",c);case 12:throw t.prev=12,t.t0=t["catch"](4),e.errorAlert(t.t0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products?keyword=").concat(e.search,"&page=").concat(e.page,"&perPage=").concat(e.perPage),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=10;break}return t.next=8,r();case 8:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({index:t},e)}));case 10:case"end":return t.stop()}}),t)})))()},resetErrorMessage:function(){this.imageErrorMessage=""},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetErrorMessage(),this.image=null,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateMasterProduct().then((function(){e.successAlert("Updated"),e.loadMasterProduct(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})):this.saveNewMasterProduct().then((function(){e.successAlert("Added"),e.loadMasterProduct(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le,ut]},za=Ma,Ua=(r("b18f"),Object(y["a"])(za,Ea,Na,!1,null,null,null)),La=Ua.exports;C()(Ua,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VProgressCircular:gt["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Ba=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Product")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-card",{staticClass:"px-3 pt-3"},[r("v-form",{ref:"formUser",attrs:{"lazy-validation":""},model:{value:e.validUser,callback:function(t){e.validUser=t},expression:"validUser"}},[r("v-select",{attrs:{dense:"",outlined:"",items:e.users,"item-text":"name",label:"Dealer","return-object":"",color:"primary_red_1",rules:e.selectedUserRules},on:{change:e.loadProduct},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}})],1)],1)],1)],1),[r("v-data-table",{staticClass:"elevation-1",attrs:{"loading-text":"loading products...",loading:e.isLoadingProduct,headers:e.headers,items:e.products,"sort-by":"index",page:e.page,options:e.options,"server-items-length":e.serverItemLength,"items-per-page":e.perPage},on:{"update:page":function(t){e.page=t},"update:options":function(t){e.options=t},"update:itemsPerPage":function(t){e.perPage=t},"update:items-per-page":function(t){e.perPage=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadProduct(t)}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.loadProduct}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,67907660),model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{disabled:e.productImport.isImporting,dark:!e.productImport.isImporting,color:"primary_red_1"},on:{click:e.openDialogImportProduct}},a),[e.productImport.isImporting?r("v-progress-circular",{staticClass:"mr-2",attrs:{size:20,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),r("v-icon",[e._v("mdi-file-import")])],1)]}}],null,!1,603062089)},[r("span",[e._v("Import CSV")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialogMonitoringImport=!0}}},a),[r("v-icon",[e._v("mdi-progress-upload")])],1)]}}],null,!1,154463025)},[r("span",[e._v("Import Progress")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},a),[r("v-icon",[e._v("mdi-arrow-expand")])],1)]}}],null,!1,3649623414)},[r("span",[e._v("Expand Table")])])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.isSale",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"true"==a.isSale?"success":"primary_red_1",dark:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(e._s(a.isSale))])]}},{key:"item.masterProductId.image[0].image",fn:function(t){var a=t.item;return[r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(a.masterProductId.image[0].image)}})]}},{key:"item.stock",fn:function(t){var a=t.item;return[r("div",{class:0==a.stock?"primary_red_1--text":""},[e._v(e._s(a.stock))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.lowestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.lowestPrice}))+" ")])]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.highestPrice}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])])],1)]}}],null,!1,2389684402)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{disabled:"",label:"Master Product Name",color:"primary_red_1",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Stock",type:"number",color:"primary_red_1",rules:e.stockRules},model:{value:e.editedItem.stock,callback:function(t){e.$set(e.editedItem,"stock",t)},expression:"editedItem.stock"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:["false","true"],"item-text":"_id",label:"Is Sale","return-object":"",color:"primary_red_1",rules:e.isSaleRules},model:{value:e.editedItem.isSale,callback:function(t){e.$set(e.editedItem,"isSale",t)},expression:"editedItem.isSale"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"1600px"},model:{value:e.dialogMasterProduct,callback:function(t){e.dialogMasterProduct=t},expression:"dialogMasterProduct"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Master Product")]),r("v-spacer"),r("v-btn",{attrs:{fab:"",text:"",dark:"",small:"",color:"primary_red_1"},on:{click:e.closeDialogMasterProduct}},[r("v-icon",[e._v("mdi-close")])],1)],1),r("v-divider"),r("v-card-text",[r("v-container",{staticClass:"px-0 pb-0"},[[r("v-data-table",{staticClass:"elevation-1",attrs:{"show-select":"",headers:e.masterProductHeaders,items:e.masterProducts,"sort-by":"index",loading:e.loadingMasterProduct,page:e.pageMaster,options:e.optionsMaster,"server-items-length":e.serverItemLengthMaster,"items-per-page":e.perPageMaster},on:{"update:page":function(t){e.pageMaster=t},"update:options":function(t){e.optionsMaster=t},"update:itemsPerPage":function(t){e.perPageMaster=t},"update:items-per-page":function(t){e.perPageMaster=t}},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0"},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTableMasterProduct(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTableMasterProduct}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}]),model:{value:e.searchMasterProduct,callback:function(t){e.searchMasterProduct=t},expression:"searchMasterProduct"}})],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.stock",fn:function(t){var a=t.item;return[r("v-text-field",{staticClass:"mt-2",staticStyle:{"min-width":"60px","max-width":"100px"},attrs:{dense:"",outlined:"",type:"number"},model:{value:a.stock,callback:function(t){e.$set(a,"stock",t)},expression:"item.stock"}})]}},{key:"item.isSale",fn:function(t){var a=t.item;return[r("v-select",{staticStyle:{"min-width":"80px"},attrs:{items:["false","true"],"item-text":"isSale",label:"Is Sale","return-object":"",color:"primary_red_1"},model:{value:a.isSale,callback:function(t){e.$set(a,"isSale",t)},expression:"item.isSale"}})]}},{key:"item.price",fn:function(t){var a=t.item;return[r("v-text-field",{staticClass:"mt-2",staticStyle:{"min-width":"150px","max-width":"200px"},attrs:{dense:"",outlined:"",type:"number"},model:{value:a.price,callback:function(t){e.$set(a,"price",t)},expression:"item.price"}})]}},{key:"item.lowestPrice",fn:function(t){var a=t.item;return[r("v-text-field",{staticClass:"mt-2",staticStyle:{"min-width":"150px","max-width":"200px"},attrs:{dense:"",outlined:"",type:"number"},model:{value:a.lowestPrice,callback:function(t){e.$set(a,"lowestPrice",t)},expression:"item.lowestPrice"}})]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-text-field",{staticClass:"mt-2",staticStyle:{"min-width":"150px","max-width":"200px"},attrs:{dense:"",outlined:"",type:"number"},model:{value:a.highestPrice,callback:function(t){e.$set(a,"highestPrice",t)},expression:"item.highestPrice"}})]}},{key:"item.image[0].image",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[r("v-avatar",{attrs:{tile:""}},[r("v-img",{attrs:{alt:e.lazyImg,src:e.apiImage(a.image[0].image),"aspect-ratio":"3"}})],1)],1)]}}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})]],2)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{text:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogMasterProduct}},[e._v("Cancel")]),r("v-btn",{attrs:{text:"",color:"success darken-1"},on:{click:e.saveMasterProducts}},[e._v("save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImportProduct,callback:function(t){e.dialogImportProduct=t},expression:"dialogImportProduct"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplateProduct}},[e.isProgressDownloadTemplate?r("v-progress-circular",{staticClass:"mr-3",attrs:{size:24,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),e._v("download template ")],1)],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[e.isProgressImport?r("v-progress-circular",{attrs:{size:30,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),e.isProgressImport?r("div",{staticClass:"ml-3 primary_grey_1--text"},[e._v("importing")]):e._e(),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImportProduct}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.dialogMonitoringImport,callback:function(t){e.dialogMonitoringImport=t},expression:"dialogMonitoringImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import Product")]),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){e.dialogMonitoringImport=!1}}},[e._v("close")])],1),r("v-card-text",[r("v-container",[r("span",{},[e._v("Progress")]),r("span",[e._v(" "+e._s("("+e.currentPosition+" of "+e.json.length+") "+(e.json.length>0?e.roundUp(100*e.currentPosition/e.json.length,2)+"%":""))+" "),e.currentPosition==e.json.length&&e.json.length>0?r("v-chip",{attrs:{small:"",color:"success"}},[e._v("done")]):e._e()],1),r("v-alert",{attrs:{value:e.importError,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.importError,callback:function(t){e.importError=t},expression:"importError"}},[e._v(e._s("error "+e.importErrorMessage+", data number "+e.currentPosition))]),r("v-layout",{staticClass:"mb-2"},[e.importError?r("v-btn",{staticClass:"mr-2",attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.executeImport}},[e._v("continue import")]):e._e(),e.importError?r("v-btn",{attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.importContinueAll}},[e._v("continue import all")]):e._e()],1),r("v-data-table",{staticClass:"elevation-1",attrs:{"loading-text":"loading import products...",headers:e.jsonHeaders,items:e.json,"sort-by":"index"},scopedSlots:e._u([{key:"item.isSale",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(1==a.isSale?"yes":"no"))])]}},{key:"item.statusImport",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"success"==a.statusImport?"success":"error"==a.statusImport?"primary_red_1":"grey",dark:""}},[e._v(e._s(a.statusImport))])]}}])})],1)],1),r("v-card-actions",[r("v-spacer"),r("div",[r("v-row",[r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{staticClass:"mx-1",attrs:{text:"",dark:"",color:"blue darken-1"},on:{click:e.downloadImportReport}},[e._v("download import report")])],1)],1),r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.pauseImportState}},a),[r("v-icon",[e._v("mdi-pause")])],1)]}}])},[r("span",[e._v("pause")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.continueImportState}},a),[r("v-icon",[e._v("mdi-play")])],1)]}}])},[r("span",[e._v("continue")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.resetImportState}},a),[r("v-icon",[e._v("mdi-stop")])],1)]}}])},[r("span",[e._v("stop")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.dialogMonitoringImport=!1}}},a),[r("v-icon",[e._v("mdi-window-minimize")])],1)]}}])},[r("span",[e._v("minimize")])])],1)],1)],1)],1)],1)],1)],1)],1)},$a=[],Fa=(r("7db0"),r("4fad"),{mounted:function(){var e=this;Promise.all([this.loadMasterProduct(),this.importStatus(),this.loadUser()]).then((function(){e.isLoading=!1}))},data:function(){return{jsonHeaders:[{text:"no",value:"no"},{text:"customerId",value:"customerId"},{text:"productPartCode",value:"productPartCode"},{text:"stock",value:"stock"},{text:"isSale",value:"isSale"},{text:"statusImport",value:"statusImport"},{text:"message",value:"message"}],dialogMonitoringImport:!1,isProgressImport:!1,isProgressDownloadTemplate:!1,isLoadingProduct:!1,productsAll:[],search:"",searchMasterProduct:"",selected:[],valid:!0,validUser:!0,masterProductIdRules:[function(e){return!(0===Object.entries(e).length&&e.constructor===Object)||"Master Product is required"}],nameRules:[function(e){return!!e||"Name is required"}],priceRules:[function(e){return!!e||"Price is required"}],lowestPriceRules:[function(e){return!!e||"Lowest price is required"}],highestPriceRules:[function(e){return!!e||"Highest price is required"}],stockRules:[function(e){return!!e||"Stock is required"}],selectedUserRules:[function(e){return!!e||"Dealer is required"}],isSaleRules:[function(e){return!!e||"Is Sale is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Stock",value:"stock"},{text:"Part Code",value:"productPartCode"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,masterProductHeaders:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Stock",value:"stock"},{text:"Is Sale",value:"isSale"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Lowest Price",value:"lowestPrice"},{text:"Highest Price",value:"highestPrice"},{text:"Product Brand Id",value:"productBrandId.name"},{text:"Product Category Id",value:"productCategoryId.name"},{text:"Part Code",value:"partCode"},{text:"Unit Id",value:"unitId.name"},{text:"Description",value:"description"},{text:"Image",value:"image[0].image"}],editedIndex:-1,editedItem:{_id:"",masterProductId:{},price:0,lowestPrice:0,highestPrice:0,isSale:"",stock:0},defaultItem:{_id:"",masterProductId:{},price:0,lowestPrice:0,highestPrice:0,isSale:"",stock:0},products:[],masterProducts:[],dealers:[],users:[],selectedUser:null,dialogMasterProduct:!1,dialogImportProduct:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:"",backupProducts:[],productImport:{_id:"",name:"product",isImporting:!1},json:[],backupI:0,currentPosition:0,continue:!0,continueAll:!1,importError:!1,importErrorMessage:"",page:1,perPage:10,options:{},serverItemLength:0,serverItemLengthMaster:0,loadingMasterProduct:!1,optionsMaster:{},searchMaster:"",pageMaster:1,perPageMaster:10,keyword:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Product":"Edit Product"}},watch:{dialog:function(e){e||this.closeEditOrNew()},csv:function(e){this.csv=e},options:{handler:function(){this.selectedUser&&this.loadProduct()},deep:!0},optionsMaster:{handler:function(){this.loadMasterProduct()},deep:!0}},created:function(){},methods:{downloadImportReport:function(){var e=this.json,t=[],r=[];for(var a in console.log("templates",e),e=e.length>0?e.map((function(e){return{customerId:e.customerId,productPartCode:e.productPartCode,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,stock:e.stock,isSale:e.isSale,statusImport:e.statusImport,message:e.message}})):[{customerId:"",productPartCode:"",price:0,lowestPrice:0,highestPrice:0,stock:0,isSale:0,statusImport:"",message:""}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","import-report-all-users-products.csv"),document.body.appendChild(o),o.click()},importContinueAll:function(){this.continueAll=!0,this.executeImport()},requestImport:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/products/import-product"),o={headers:n,method:"POST",url:s,data:e},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})))()},parsingCsv:function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/csv-parser/products"),n=new FormData;n.append("csv",this.csv);var s={headers:r,method:"POST",url:a,data:n};return g()(s)},submitImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=23;break}return t.prev=4,e.backupI=0,e.currentPosition=0,e.isProgressImport=!0,t.next=10,e.parsingCsv();case 10:a=t.sent,e.isProgressImport=!1,e.dialogImportProduct=!1,n=a.data,e.json=n.json,e.json=e.json.map((function(e,t){return Object(ie["a"])({},e,{no:t+1,statusImport:"processing",message:"waiting"})})),e.dialogMonitoringImport=!0,e.executeImport(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](4),e.errorAlert(t.t0.response.data);case 23:case"end":return t.stop()}}),t,null,[[4,20]])})))()},executeImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=42;break}a=(new Date).valueOf(),e.backupI=e.currentPosition,e.resetImportError(),n=e.backupI;case 8:if(!(n<e.json.length)){t.next=41;break}return t.prev=9,t.next=12,e.requestImport(e.json[n]);case 12:if(s=t.sent,e.json[n].statusImport=s.data.statusImport,e.json[n].message=s.data.message,e.currentPosition=n+1,e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),!e.continue){t.next=21;break}return t.abrupt("continue",38);case 21:return t.abrupt("break",41);case 22:t.next=38;break;case 24:if(t.prev=24,t.t0=t["catch"](9),e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),console.log(t.t0.response),e.currentPosition=n+1,e.json[n].statusImport=t.t0.response.data.statusImport,e.json[n].message=t.t0.response.data.message,e.importErrorMessage=t.t0.response.data.message,e.importError=!0,!e.continueAll){t.next=37;break}return t.abrupt("continue",38);case 37:return t.abrupt("break",41);case 38:n++,t.next=8;break;case 41:console.log("imported in ".concat((new Date).valueOf()-a,"ms"));case 42:case"end":return t.stop()}}),t,null,[[9,24]])})))()},resetImportError:function(){this.importError=!1,this.importErrorMessage=""},resetImportState:function(){this.resetImportError(),this.backupI=0,this.currentPosition=0,this.continueAll=!1,this.continue=!0,this.json=[]},continueImportState:function(){this.continue=!0,this.executeImport()},pauseImportState:function(){this.continue=!1},importStatus:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("product").on("value",(function(t){var r;for(var a in console.log("product",t.val()),t.val())r=t.val()[a];e.productImport=r}));case 1:case"end":return t.stop()}}),t)})))()},expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Name",value:"name"},{text:"Nama Bengkel",value:"localShopName"},{text:"Price",value:"price"},{text:"Stock",value:"stock"},{text:"Part Code",value:"productPartCode"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Customer Id",value:"userCustomerId.customerId"},{text:"Nama Bengkel",value:"localShopName"},{text:"Is Sale",value:"isSale"},{text:"Dealer",value:"userCustomerId.name"},{text:"Price",value:"price"},{text:"Lowest Price",value:"lowestPrice"},{text:"Highest Price",value:"highestPrice"},{text:"Stock",value:"stock"},{text:"Product Brand Id",value:"productBrandId.name"},{text:"Product Category Id",value:"productCategoryId.name"},{text:"Part Code",value:"productPartCode"},{text:"Unit Id",value:"unitId.name"},{text:"Description",value:"description"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},downloadTemplateProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(s in e.isProgressDownloadTemplate=!0,r=[],a=[],n=[],console.log("templates",r),r=r.length>0?r.map((function(e){return{customerId:e.customerId,productPartCode:e.productPartCode,price:e.price,lowestPrice:e.lowestPrice,highestPrice:e.highestPrice,stock:e.stock,isSale:e.isSale?1:0}})):[{customerId:"",productPartCode:"",price:0,lowestPrice:0,highestPrice:0,stock:0,isSale:0}],r[0])a.push(s);n=r.map((function(e){return a.map((function(t){return e[t]}))})),o=[a].concat(Object(ae["a"])(n)),i="",o.forEach((function(e){e.forEach((function(e){i+=e+dt})),i+="\r\n"})),i="data:application/csv,"+encodeURIComponent(i),c=document.createElement("A"),c.setAttribute("href",i),c.setAttribute("download","all-users-products-template.csv"),document.body.appendChild(c),c.click(),e.isProgressDownloadTemplate=!1;case 18:case"end":return t.stop()}}),t)})))()},searchDataTableMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products?keyword=").concat(e.searchMasterProduct),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t,isSale:!0,stock:0})}));case 9:case"end":return t.stop()}}),t)})))()},searchDataTable:function(){},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this;this.$emit("change",e);var r=e.target.files;console.log(e);var a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImportProduct:function(){this.dialogImportProduct=!0},closeDialogImportProduct:function(){this.dialogImportProduct=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"},s=new FormData,s.append("csv",t),o="".concat(p,"/api/products/bulk"),i={headers:n,method:"POST",url:o,data:s},e.prev=6,e.next=9,g()(i);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](6),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},resetCsv:function(){this.csv=null,this.csvName="",this.csvUrl=""},fileSize:function(e){if(e>=1024&&e<1048576){var t=e/1024;return t=this.roundUp(t,2),"(".concat(t," KB)")}if(e>=1048576){var r=e/1048576;return r=this.roundUp(r,2),"(".concat(r," MB)")}},stringToBoolean:function(e){return"true"==e},saveMasterProduct:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={userId:t.selectedUser._id,productPartCode:e.partCode,price:+e.price,lowestPrice:+e.lowestPrice,highestPrice:+e.highestPrice,isSale:e.isSale,stock:+e.stock},r.next=3,t.assignMasterProduct(a);case 3:case"end":return r.stop()}}),r)})))()},saveMasterProducts:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.selected.map((function(t){return e.masterProducts.find((function(e){return e.partCode==t.partCode}))})).map((function(t){return{userId:e.selectedUser._id,customerId:e.selectedUser.customerId,productPartCode:t.partCode,price:+t.price,lowestPrice:+t.lowestPrice,highestPrice:+t.highestPrice,isSale:e.stringToBoolean(t.isSale),stock:+t.stock}})),a={userId:e.selectedUser._id,docs:r},t.next=5,e.assignMasterProducts(a);case 5:e.closeDialogMasterProduct(),e.loadProduct(),e.successAlert("Products added"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.errorAlert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},assignMasterProduct:function(e){return e},assignMasterProducts:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=9;break}return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/products/bulk"),i={headers:s,method:"POST",url:o,data:e},t.abrupt("return",g()(i));case 9:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetValidation:function(){this.$refs.form.resetValidation()},validateUser:function(){return this.$refs.formUser.validate()},resetValidationUser:function(){this.$refs.formUser.resetValidation()},openDialogMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validateUser(),!r){t.next=6;break}return t.next=4,e.loadProduct();case 4:e.dialogMasterProduct=!0,e.masterProducts=e.masterProducts.map((function(t){return e.selected.find((function(e){return e.partCode==t.partCode}))||Object(ie["a"])({},t,{isSale:t.isSale.toString()})})).map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 6:case"end":return t.stop()}}),t)})))()},closeDialogMasterProduct:function(){this.dialogMasterProduct=!1},loadUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users?role=dealer"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users;case 9:case"end":return t.stop()}}),t)})))()},loadMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products?keyword=").concat(e.searchMaster,"&page=").concat(e.pageMaster,"&perPage=").concat(e.perPageMaster),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.masterProducts=n.data.masterProducts.map((function(e,t){return Object(ie["a"])({},e,{index:t,isSale:!0,stock:1})})),e.serverItemLengthMaster=n.data.count;case 10:case"end":return t.stop()}}),t)})))()},updateProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/products/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,isSale:e.stringToBoolean(e.editedItem.isSale),stock:+e.editedItem.stock},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/products"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={partCode:e.editedItem.masterProductId.partCode,userId:e.editedItem.userId._id,stock:e.editedItem.stock},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},loadProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("load product"),e.isLoadingProduct=!0,r=function(){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/products"),s={params:{customerId:e.selectedUser.customerId,page:e.page,count:e.perPage,keyword:e.keyword},headers:a,method:"GET",url:n};return g()(s)},t.next=5,b();case 5:if(a=t.sent,!0!==a){t.next=15;break}return t.next=9,r();case 9:n=t.sent,console.log(n),e.products=n.data.products.map((function(e,t){return Object(ie["a"])({},e,{index:t,userCustomerId:e.dealerProduct[0].userCustomerId,isSale:e.dealerProduct[0].isSale.toString(),stock:e.dealerProduct[0].stock,productPartCode:e.dealerProduct[0].productPartCode,_id:e.dealerProduct[0]._id})})),console.log(e.products),e.serverItemLength=n.data.count,e.isLoadingProduct=!1;case 15:case"end":return t.stop()}}),t)})))()},loadProductAll:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/products"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.productsAll=i.data.products.map((function(e,t){return Object(ie["a"])({},e,{index:t,isSale:e.isSale.toString()})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.products.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e,this.deleteDialog=!0},confirmDelete:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r=e.products.indexOf(e.item),e.products.splice(r,1),e.products=e.products.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),t.next=6,e.deleteProduct();case 6:e.closeDelete(),e.successAlert("Deleted"),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.errorAlert(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},deleteProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/products/").concat(e._id),o={headers:a,method:"DELETE",url:s,data:n};return g()(o)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=7;break}return n=Object(ie["a"])({},e.item),t.abrupt("return",r(n));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},successAlert:function(e){this.successMessage=e,this.success=!0},errorAlert:function(e){this.errorMessage=e,this.error=!0},save:function(){var e=this;this.editedIndex>-1?this.updateProduct().then((function(){e.loadProduct(),e.successAlert("Updated"),e.closeEditOrNew()})).catch((function(t){return e.errorAlert(t)})):this.saveNewProduct().then((function(){e.loadProduct(),e.successAlert("Added"),e.closeEditOrNew()})).catch((function(t){return e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q},mixins:[le,ut]}),Ja=Fa,qa=(r("5a23"),Object(y["a"])(Ja,Ba,$a,!1,null,null,null)),Ga=qa.exports;C()(qa,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VProgressCircular:gt["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Ha=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Product Category")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.productCategories,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Category")])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1826763045)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Download template untuk import data dalam bentuk Microsoft Excel (xls) ")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.csvErrorMessage)+" ")])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},Wa=[],Qa={mounted:function(){var e=this;Promise.all([this.loadProductCategory()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Name is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},productCategories:[],units:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:""},defaultItem:{_id:"",name:""},tempDelete:0,search:"",dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Category":"Edit Category"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new FormData,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updateProductCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/product-categories/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewProductCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/product-categories"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={name:e.editedItem.name},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-categories?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=10;break}return t.next=8,r();case 8:n=t.sent,e.productCategories=n.data.productCategories.map((function(e,t){return Object(ie["a"])({index:t},e)}));case 10:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadProductCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-categories"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.productCategories=i.data.productCategories.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.productCategories.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.productCategories.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteProductCategory().then((function(){var t=e.productCategories.indexOf(e.item);e.productCategories.splice(t,1),e.productCategories=e.productCategories.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteProductCategory:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-categories/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateProductCategory().then((function(){Object.assign(e.productCategories[e.editedIndex],e.editedItem),e.closeEditOrNew(),e.loadProductCategory(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewProductCategory().then((function(){e.loadProductCategory(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le]},Ka=Qa,Ya=(r("a399"),Object(y["a"])(Ka,Ha,Wa,!1,null,null,null)),Za=Ya.exports;C()(Ya,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Xa=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Product Brand")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,"sort-by":"index",items:e.productBrands},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Brand")])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,691824654)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",color:"primary_red_1",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},en=[],tn={mounted:function(){var e=this;Promise.all([this.loadProductBrand()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Name is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},productBrands:[],units:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:""},defaultItem:{_id:"",name:""},search:"",dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Brand":"Edit Brand"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"},s=new FormData,s.append("csv",t),o="".concat(p,"/api/master-products/bulk"),i={headers:n,method:"POST",url:o,data:s},e.prev=6,e.next=9,g()(i);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](6),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-brands?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=10;break}return t.next=8,r();case 8:n=t.sent,e.productBrands=n.data.productBrands.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 10:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updateProductBrand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/product-brands/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewProductBrand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/product-brands"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={name:e.editedItem.name},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadProductBrand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/product-brands"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.productBrands=n.data.productBrands.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.productBrands.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e,this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteProductBrand().then((function(){var t=e.productBrands.indexOf(e.item);e.productBrands.splice(t,1),e.productBrands=e.productBrands.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteProductBrand:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-brands/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateProductBrand().then((function(){e.closeEditOrNew(),e.loadProductBrand(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewProductBrand().then((function(){e.loadProductBrand(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le]},rn=tn,an=(r("f77b"),Object(y["a"])(rn,Xa,en,!1,null,null,null)),nn=an.exports;C()(an,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var sn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Product Image")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.productImages,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("Product Image")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{tile:"",size:"50"}},[r("v-img",{attrs:{src:e.apiImage(a.image),"aspect-ratio":"1"}})],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services",staticStyle:{"white-space":"nowrap"}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,2701702370)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[null==e.image&&-1!==e.editedIndex?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{items:e.masterProducts,"item-text":"_id",label:"Master Product","return-object":"",color:"primary_red_1","error-messages":e.masterProductIdErrorMessage},model:{value:e.editedItem.masterProductId,callback:function(t){e.$set(e.editedItem,"masterProductId",t)},expression:"editedItem.masterProductId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{disabled:"",label:"Product Part Code"},model:{value:e.editedItem.masterProductId.partCode,callback:function(t){e.$set(e.editedItem.masterProductId,"partCode",t)},expression:"editedItem.masterProductId.partCode"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{disabled:"",label:"Product Name"},model:{value:e.editedItem.masterProductId.name,callback:function(t){e.$set(e.editedItem.masterProductId,"name",t)},expression:"editedItem.masterProductId.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{disabled:"",label:"Product Local Shop Name"},model:{value:e.editedItem.masterProductId.localShopName,callback:function(t){e.$set(e.editedItem.masterProductId,"localShopName",t)},expression:"editedItem.masterProductId.localShopName"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Description","error-messages":e.descriptionErrorMessage},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.imageErrorMessage)+" ")])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")])]),r("v-row",[r("div",[e._v(e._s(e.item._id))]),e.item?r("v-img",{attrs:{src:e.apiImage(e.item.image)}}):e._e()],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},on=[],cn={mounted:function(){var e=this;Promise.all([this.loadProductImage(),this.loadMasterProduct()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,masterProductIdErrorMessage:"",imageErrorMessage:"",descriptionErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",imageUrl:"",image:null,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Image",value:"image"},{text:"Product Part Code",value:"masterProductId.partCode"},{text:"Product Name",value:"masterProductId.name"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",image:"",partCode:"",masterProductId:{},description:""},item:{},defaultItem:{_id:"",image:"",partCode:"",masterProductId:{},description:""},masterProducts:[],productImages:[],tempDelete:0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},updateProductImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={_id:e.editedItem._id,description:e.editedItem.description,productPartCode:e.editedItem.masterProductId.partCode},a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",e.image),o.append("description",r.description),o.append("productPartCode",r.productPartCode),i="".concat(p,"/api/product-images/").concat(r._id),c={headers:s,method:"PUT",url:i,data:o},t.prev=8,void 0!=r.productPartCode&&0!=r.description.length){t.next=15;break}throw void 0==r.productPartCode&&(e.masterProductIdErrorMessage="master product not selected!"),0==r.description.length&&(e.descriptionErrorMessage="description is empty!"),new Error("invalid input!");case 15:return t.next=17,g()(c);case 17:return l=t.sent,e.successAlert("Updated"),t.abrupt("return",l);case 20:t.next=26;break;case 22:throw t.prev=22,t.t0=t["catch"](8),new Error(t.t0);case 26:case"end":return t.stop()}}),t,null,[[8,22]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},saveNewProductImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={description:e.editedItem.description,productPartCode:e.editedItem.masterProductId.partCode},a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",e.image),o.append("description",r.description),o.append("productPartCode",r.productPartCode),i="".concat(p,"/api/product-images"),c={headers:s,method:"POST",url:i,data:o},console.log(r.productPartCode),t.prev=9,e.image&&void 0!=r.productPartCode&&0!=r.description.length){t.next=17;break}throw e.image||(e.imageErrorMessage="image not selected!"),void 0==r.productPartCode&&(e.masterProductIdErrorMessage="master product not selected!"),0==r.description.length&&(e.descriptionErrorMessage="description is empty!"),new Error("invalid input!");case 17:return t.next=19,g()(c);case 19:return l=t.sent,e.successAlert("Added"),t.abrupt("return",l);case 22:t.next=28;break;case 24:throw t.prev=24,t.t0=t["catch"](9),new Error(t.t0);case 28:case"end":return t.stop()}}),t,null,[[9,24]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},resetErrorMessage:function(){this.imageErrorMessage="",this.descriptionErrorMessage="",this.masterProductIdErrorMessage=""},loadProductImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/product-images"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.productImages=i.data.productImages.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},loadMasterProduct:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/master-products"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.masterProducts=i.data.masterProducts;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.productImages.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.productImages.indexOf(e);this.deleteDialog=!0},closeEditOrNew:function(){var e=this;this.dialog=!1,this.imageUrl="",this.image=null,this.resetErrorMessage(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},confirmDelete:function(){var e=this.productImages.indexOf(this.item);this.productImages.splice(e,1),this.productImages=this.productImages.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deleteProductImage(),this.closeDelete()},deleteProductImage:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/product-images/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:return c=t.sent,e.successAlert("Deleted"),t.abrupt("return",c);case 12:throw t.prev=12,t.t0=t["catch"](4),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;this.editedIndex>-1?this.updateProductImage().then((function(){Object.assign(e.productImages[e.editedIndex],e.editedItem),e.closeEditOrNew(),e.loadProductImage()})):this.saveNewProductImage().then((function(){e.closeEditOrNew(),e.loadProductImage()}))},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q},mixins:[le]},ln=cn,un=(r("f7a1"),Object(y["a"])(ln,sn,on,!1,null,null,null)),dn=un.exports;C()(un,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbar:Qr["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Unit")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.units,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Unit")])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1402350515)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Description",rules:e.descriptionRules},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},pn=[],vn=(r("498a"),{mounted:function(){var e=this;Promise.all([this.loadUnit()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Name is required"}],descriptionRules:[function(e){return!!e||"Description is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:"",description:""},defaultItem:{_id:"",name:"",description:""},units:[],search:"",dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Unit":"Edit Unit"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new FormData,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/units?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=10;break}return t.next=8,r();case 8:n=t.sent,e.units=n.data.units.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 10:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updateUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/units/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name.trim(),description:e.editedItem.description.trim()},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/units"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={name:e.editedItem.name.trim(),description:e.editedItem.description.trim()},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/units"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.units=i.data.units.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.units.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.units.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteUnit().then((function(){var t=e.units.indexOf(e.item);e.units.splice(t,1),e.units=e.units.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),a=t.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/units/").concat(r._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateUnit().then((function(){Object.assign(e.units[e.editedIndex],e.editedItem),e.closeEditOrNew(),e.loadUnit(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewUnit().then((function(){e.loadUnit(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le]}),fn=vn,hn=(r("5a09"),Object(y["a"])(fn,mn,pn,!1,null,null,null)),gn=hn.exports;C()(hn,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var bn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Purchase")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.purchases,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.isDone",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:e.isBoolStatus(a.isDone),dark:""}},[e._v(e._s(a.isDone))])]}},{key:"item.isConfirmItem",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:e.isBoolStatus(a.isConfirmItem),dark:""}},[e._v(e._s(a.isConfirmItem))])]}},{key:"item.isConfirmSendItem",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:e.isBoolStatus(a.isConfirmSendItem),dark:""}},[e._v(e._s(a.isConfirmSendItem))])]}},{key:"item.total",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.total}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.goToPurchaseDetail(a._id)}}},n),[e._v("mdi-magnify")])]}}],null,!0)},[r("span",[e._v("Detail")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,4101364122)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],rules:e.isDoneRules,label:"Is Done","return-object":""},model:{value:e.editedItem.isDone,callback:function(t){e.$set(e.editedItem,"isDone",t)},expression:"editedItem.isDone"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],rules:e.isConfirmSendItemRules,label:"Is Confirm Send Item","return-object":""},model:{value:e.editedItem.isConfirmSendItem,callback:function(t){e.$set(e.editedItem,"isConfirmSendItem",t)},expression:"editedItem.isConfirmSendItem"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],rules:e.isConfirmItemRules,label:"Is Confirm Item","return-object":""},model:{value:e.editedItem.isConfirmItem,callback:function(t){e.$set(e.editedItem,"isConfirmItem",t)},expression:"editedItem.isConfirmItem"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{dense:"",items:e.users,"item-text":"name",label:"Buyer/Depot","return-object":"",color:"primary_red_1",rules:e.userRules},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{dense:"",items:e.users,"item-text":"name",label:"Seller/Dealer","return-object":"",color:"primary_red_1",rules:e.userRules},model:{value:e.editedItem.sellerId,callback:function(t){e.$set(e.editedItem,"sellerId",t)},expression:"editedItem.sellerId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12",lg:"12"}},[r("v-text-field",{attrs:{label:"Total",type:"number"},model:{value:e.editedItem.total,callback:function(t){e.$set(e.editedItem,"total",t)},expression:"editedItem.total"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},xn=[],_n={mounted:function(){var e=this;Promise.all([this.loadPurchase(),this.loadUser()]).then((function(){e.isLoading=!1}))},data:function(){return{valid:!0,isDoneRules:[function(e){return!!e||"Is Done is required"}],isConfirmItemRules:[function(e){return!!e||"Is Confirm Item is required"}],isConfirmSendItemRules:[function(e){return!!e||"Is Confirm Send Item is required"}],userIdRules:[function(e){return!!e||"User is required"}],sellerIdRules:[function(e){return!!e||"Seller is required"}],totalRules:[function(e){return!!e||"Total is required"}],userRules:[function(e){return!!e||"User is required"}],search:"",success:!1,error:!1,errorMessage:"",successMessage:"",item:{},purchases:[],units:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Buyer/Depot",value:"userId.name"},{text:"Store",value:"sellerId.storeId.name"},{text:"Total",value:"total"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",isDone:"",isConfirmItem:"",isConfirmSendItem:"",userId:null,sellerId:null,total:0},defaultItem:{_id:"",isDone:"",isConfirmItem:"",isConfirmSendItem:"",userId:null,sellerId:null,total:0},tempDelete:0,users:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{goToPurchaseDetail:function(e){this.$router.push({name:"purchaseDetail",params:{purchaseOrderId:e}})},isBoolStatus:function(e){return e?"success":"primary_red_1"},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},stringToBoolean:function(e){return"true"==e},loadUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users;case 9:case"end":return t.stop()}}),t)})))()},searchDataTable:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},updatePurchase:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/purchases/").concat(e._id),o={headers:a,method:"PUT",url:s,data:n};return g()(o)},a=e.validate(),!a){t.next=17;break}return t.next=5,b();case 5:if(n=t.sent,!0!==n){t.next=15;break}return t.prev=7,s={_id:e.editedItem._id,isDone:e.stringToBoolean(e.editedItem.isDone),isConfirmItem:e.stringToBoolean(e.editedItem.isConfirmItem),isConfirmSendItem:e.stringToBoolean(e.editedItem.isConfirmSendItem),sellerId:e.editedItem.sellerId._id,total:e.editedItem.total},t.abrupt("return",r(s));case 12:throw t.prev=12,t.t0=t["catch"](7),new Error(t.t0);case 15:t.next=18;break;case 17:throw new Error("invalid input!");case 18:case"end":return t.stop()}}),t,null,[[7,12]])})))()},saveNewPurchase:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a=purchase,n="".concat(p,"/api/purchases"),s={headers:r,method:"POST",url:n,data:a};return g()(s)},t.next=3,b();case 3:if(a=t.sent,n=e.validate(),!n){t.next=17;break}if(!0!==a){t.next=15;break}return t.prev=7,{isDone:e.stringToBoolean(e.editedItem.isDone),isConfirmItem:e.stringToBoolean(e.editedItem.isConfirmItem),isConfirmSendItem:e.stringToBoolean(e.editedItem.isConfirmSendItem),sellerId:e.editedItem.sellerId._id,total:e.editedItem.total},t.abrupt("return",r());case 12:throw t.prev=12,t.t0=t["catch"](7),new Error(t.t0);case 15:t.next=18;break;case 17:throw new Error("invalid input!");case 18:case"end":return t.stop()}}),t,null,[[7,12]])})))()},loadPurchase:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/purchases"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.purchases=i.data.purchases.map((function(e,t){return Object(ie["a"])({},e,{isDone:e.isDone.toString(),isConfirmItem:e.isConfirmItem.toString(),isConfirmSendItem:e.isConfirmSendItem.toString(),index:t})})),console.log(i.data);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.purchases.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.purchases.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this.purchases.indexOf(this.item);this.purchases.splice(e,1),this.purchases=this.purchases.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deletePurchase(),this.closeDelete()},deletePurchase:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:t.sent,e.successMessage="Deleted",e.success=!0,setTimeout((function(){e.success=!1}),5e3),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),alert("something went wrong!");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},save:function(){var e=this;this.editedIndex>-1?(Object.assign(this.purchases[this.editedIndex],this.editedItem),this.updatePurchase().then((function(){e.successAlert("Updated"),e.loadPurchase(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)}))):(this.purchases.push(Object(ie["a"])({},this.editedItem,{index:this.purchases.length})),this.saveNewPurchase().then((function(){e.successAlert("Added"),e.loadPurchase(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})))}},components:{Navbar:q},mixins:[le]},kn=_n,In=(r("1751"),Object(y["a"])(kn,bn,xn,!1,null,null,null)),yn=In.exports;C()(In,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var wn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Purchase Detail")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.purchaseItems,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"pa-3",attrs:{flat:""}},e._l(e.purchaseDetails,(function(t,a){return r("v-list",{key:a,attrs:{subheader:"","three-line":""}},[r("v-list-item",[r("v-avatar",{staticClass:"mr-2",attrs:{color:"Total"==a?"primary_red_1":""}},["Total"==a?r("span",{staticClass:"white--text headline"},[e._v("Rp")]):e._e(),"Total"!=a?r("v-img",{attrs:{src:e.apiImage(t.image)}}):e._e()],1),r("v-list-item-content",[r("v-list-item-subtitle",[e._v(e._s(a))]),r("v-list-item-title",[e._v(" "+e._s("Total"==a?e.numberWithPeriod({currency:"Rp",separator:".",number:t}):t.name)+" ")])],1)],1)],1)})),1),r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("div",[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.productId.masterProductId.image[0].image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{tile:""}},[r("v-img",{attrs:{"aspect-ratio":"1",src:e.apiImage(a.productId.masterProductId.image[0].image)}})],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,2644019456)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Quantity",type:"number",rules:e.quantityRules},model:{value:e.editedItem.quantity,callback:function(t){e.$set(e.editedItem,"quantity",t)},expression:"editedItem.quantity"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Confirmed Quantity",type:"number",rules:e.confirmedQuantityRules},model:{value:e.editedItem.confirmedQuantity,callback:function(t){e.$set(e.editedItem,"confirmedQuantity",t)},expression:"editedItem.confirmedQuantity"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Price",type:"number",rules:e.priceRules},model:{value:e.editedItem.price,callback:function(t){e.$set(e.editedItem,"price",t)},expression:"editedItem.price"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},Cn=[],Pn=r("ade3"),Sn={mounted:function(){var e=this;Promise.all([this.loadPurchaseDetail()]).then((function(){e.isLoading=!1}))},data:function(){var e;return e={valid:!0,quantityRules:[function(e){return e>0||"Quantity is required"}],confirmedQuantityRules:[function(e){return e>0||"Quantity is required"}],priceRules:[function(e){return!!e||"Price is required"}],search:"",quantityErrorMessage:"",confirmedQuantityErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",item:{},purchaseItems:[]},Object(Pn["a"])(e,"purchaseItems",[]),Object(Pn["a"])(e,"units",[]),Object(Pn["a"])(e,"select",["Vuetify","Programming"]),Object(Pn["a"])(e,"items",["Programming","Design","Vue","Vuetify"]),Object(Pn["a"])(e,"isLoading",!0),Object(Pn["a"])(e,"skeletonLoaderItem",[0,1,2,3,4]),Object(Pn["a"])(e,"lazyImg",u.a),Object(Pn["a"])(e,"dialog",!1),Object(Pn["a"])(e,"deleteDialog",!1),Object(Pn["a"])(e,"headers",[{text:"No",value:"index"},{text:"Purchase Order Id",value:"purchaseOrderId"},{text:"Product Name",value:"productId.masterProductId.name"},{text:"Product Local Shop Name",value:"productId.masterProductId.localShopName"},{text:"Quantity",value:"quantity"},{text:"Confirmed Quantity",value:"confirmedQuantity"},{text:"Price",value:"price"},{text:"Product Image",value:"productId.masterProductId.image[0].image"},{text:"Actions",value:"action",sortable:!1}]),Object(Pn["a"])(e,"editedIndex",-1),Object(Pn["a"])(e,"editedItem",{_id:"",purchaseOrderId:"",productId:{},quantity:0,confirmedQuantity:0,price:0}),Object(Pn["a"])(e,"defaultItem",{_id:"",purchaseOrderId:"",productId:{},quantity:0,confirmedQuantity:0,price:0}),Object(Pn["a"])(e,"purchaseItems",[]),Object(Pn["a"])(e,"purchaseDetail",{}),Object(Pn["a"])(e,"purchaseDetails",{}),Object(Pn["a"])(e,"tempDelete",0),Object(Pn["a"])(e,"backupPurchaseItems",[]),e},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=e.search.toLowerCase(),0==r.length?e.purchaseItems=e.backupPurchaseItems:(a=e.backupPurchaseItems.filter((function(e){return e.productId.masterProductId.name.toLowerCase().match(r)||e.productId.masterProductId.localShopName.toLowerCase().match(r)||e.productId.masterProductId.partCode.toLowerCase().match(r)||e.productId.masterProductId.description.toLowerCase().match(r)||e.productId.masterProductId.price==+r})),e.purchaseItems=a);case 2:case"end":return t.stop()}}),t)})))()},apiImage:function(e){return"".concat(p,"/").concat(e)},updatePurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/purchase-order-items/").concat(e._id),o={headers:a,method:"PUT",url:s,data:n};return g()(o)},a=e.validate(),!a){t.next=19;break}return t.next=5,b();case 5:if(n=t.sent,!0!==n){t.next=17;break}return t.prev=7,s={_id:e.editedItem._id,quantity:e.editedItem.quantity,confirmedQuantity:e.editedItem.confirmedQuantity,price:e.editedItem.price},t.next=11,r(s);case 11:return t.abrupt("return",t.sent);case 14:throw t.prev=14,t.t0=t["catch"](7),new Error(t.t0);case 17:t.next=20;break;case 19:throw new Error("invalid input!");case 20:case"end":return t.stop()}}),t,null,[[7,14]])})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},saveNewPurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.editedItem.name},console.log(r),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=r,i="".concat(p,"/api/purchase-order-items"),c={headers:s,method:"POST",url:i,data:o},t.prev=5,0!=purchaseItem.quantity.length&&0!=purchaseItem.confirmedQuantity.length){t.next=12;break}throw 0==purchaseItem.quantity.length&&(e.quantityErrorMessage="quantity is empty!"),0==purchaseItem.confirmedQuantity.length&&(e.confirmedQuantityErrorMessage="confirmed quantity is empty!"),new Error("invalid input!");case 12:return t.next=14,g()(c);case 14:return l=t.sent,e.successAlert("Added"),t.abrupt("return",l);case 17:t.next=23;break;case 19:throw t.prev=19,t.t0=t["catch"](5),e.errorAlert("invalid input!"),new Error(t.t0);case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(){return t.apply(this,arguments)}}(),t.next=5,b();case 5:if(n=t.sent,!0!==n){t.next=8;break}return t.abrupt("return",a());case 8:case"end":return t.stop()}}),t)})))()},loadPurchaseDetail:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.purchaseOrderId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-orders/").concat(n),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:c=t.sent,console.log(c.data.purchaseOrderItem),e.purchaseDetail={userId:c.data.userId,total:c.data.total,sellerId:c.data.sellerId},e.purchaseDetails={Buyer:{name:c.data.userId.name,image:c.data.userId.image},Seller:{name:c.data.sellerId.name,image:c.data.sellerId.image},Store:{name:c.data.sellerId.storeId.name,image:c.data.sellerId.storeId.image},Total:c.data.total},console.log(e.purchaseDetail),e.purchaseItems=c.data.purchaseOrderItem.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.backupPurchaseItems=e.purchaseItems;case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.purchaseItems.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.purchaseItems.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this.purchaseItems.indexOf(this.item);this.purchaseItems.splice(e,1),this.purchaseItems=this.purchaseItems.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deletePurchaseItem(),this.closeDelete()},deletePurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/purchase-order-items/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:return c=t.sent,e.successAlert("Deleted"),t.abrupt("return",c);case 12:throw t.prev=12,t.t0=t["catch"](4),e.errorAlert(t.t0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updatePurchaseItem().then((function(){e.loadPurchaseDetail(),e.successAlert("Updated"),e.closeEditOrNew()})):this.saveNewPurchaseItem().then((function(){e.loadPurchaseDetail(),e.closeEditOrNew()}))}},components:{Navbar:q},mixins:[le]},On=Sn,jn=(r("e46a"),Object(y["a"])(On,wn,Cn,!1,null,null,null)),Rn=jn.exports;C()(jn,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VList:M["a"],VListItem:z["a"],VListItemContent:U["a"],VListItemSubtitle:U["b"],VListItemTitle:U["c"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Vn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Purchase Item")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.purchaseItems,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}})],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("div",[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1727088379)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.quantityRules,type:"number",label:"Quantity"},model:{value:e.editedItem.quantity,callback:function(t){e.$set(e.editedItem,"quantity",t)},expression:"editedItem.quantity"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.confirmedQuantityRules,type:"number",label:"Confirmed Quantity"},model:{value:e.editedItem.confirmedQuantity,callback:function(t){e.$set(e.editedItem,"confirmedQuantity",t)},expression:"editedItem.confirmedQuantity"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{rules:e.priceRules,type:"number",label:"Price"},model:{value:e.editedItem.price,callback:function(t){e.$set(e.editedItem,"price",t)},expression:"editedItem.price"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.item.productId.masterProductId.name)+" ")])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},Dn=[],Tn={mounted:function(){var e=this;Promise.all([this.loadPurchaseItems()]).then((function(){e.isLoading=!1}))},data:function(){var e;return e={search:"",valid:!0,quantityRules:[function(e){return!!e||"Quantity is required"}],confirmedQuantityRules:[function(e){return!!e||"Confirmed Quantity is required"}],priceRules:[function(e){return!!e||"Price is required"}]},Object(Pn["a"])(e,"search",""),Object(Pn["a"])(e,"success",!1),Object(Pn["a"])(e,"error",!1),Object(Pn["a"])(e,"errorMessage",""),Object(Pn["a"])(e,"successMessage",""),Object(Pn["a"])(e,"item",{productId:{masterProductId:{name:""}}}),Object(Pn["a"])(e,"purchaseItems",[{productId:{masterProductId:{name:""}}}]),Object(Pn["a"])(e,"isLoading",!0),Object(Pn["a"])(e,"skeletonLoaderItem",[0,1,2,3,4]),Object(Pn["a"])(e,"lazyImg",u.a),Object(Pn["a"])(e,"dialog",!1),Object(Pn["a"])(e,"deleteDialog",!1),Object(Pn["a"])(e,"headers",[{text:"No",value:"index"},{text:"Purchase Id",value:"purchaseOrderId._id"},{text:"Buyer",value:"purchaseOrderId.userId.name"},{text:"Seller",value:"purchaseOrderId.sellerId.name"},{text:"Product Name",value:"productId.masterProductId.name"},{text:"Product Local Shop Name",value:"productId.masterProductId.localShopName"},{text:"Product Part Code",value:"productId.masterProductId.partCode"},{text:"Quantity",value:"quantity"},{text:"Confirmed Quantity",value:"confirmedQuantity"},{text:"Price",value:"price"},{text:"Actions",value:"action",sortable:!1}]),Object(Pn["a"])(e,"editedIndex",-1),Object(Pn["a"])(e,"editedItem",{_id:"",name:""}),Object(Pn["a"])(e,"defaultItem",{_id:"",name:""}),Object(Pn["a"])(e,"tempDelete",0),Object(Pn["a"])(e,"backupPurchaseItems",[]),e},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{searchDataTable:function(){var e=this.search.toLowerCase(),t=this.backupPurchaseItems;if(e.length>0){var r=t.filter((function(t){return t.productId.masterProductId.name.toLowerCase().match(e)||t.productId.masterProductId.partCode.toLowerCase().match(e)||t.productId.masterProductId.localShopName.toLowerCase().match(e)||t.purchaseOrderId._id.toLowerCase().match(e)||t.purchaseOrderId.userId.name.toLowerCase().match(e)||t.purchaseOrderId.sellerId.name.toLowerCase().match(e)}));this.purchaseItems=r}else this.purchaseItems=this.backupPurchaseItems},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updatePurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/purchase-order-items/").concat(e._id),o={headers:a,method:"PUT",url:s,data:n};return g()(o)},a=e.validate(),!a){t.next=20;break}return t.next=5,b();case 5:if(n=t.sent,!0!==n){t.next=18;break}return t.prev=7,s={_id:e.editedItem._id,quantity:e.editedItem.quantity,confirmedQuantity:e.editedItem.confirmedQuantity,price:e.editedItem.price},t.next=11,r(s);case 11:return o=t.sent,t.abrupt("return",o);case 15:throw t.prev=15,t.t0=t["catch"](7),new Error(t.t0);case 18:t.next=21;break;case 20:throw new Error("invalid input!");case 21:case"end":return t.stop()}}),t,null,[[7,15]])})))()},saveNewPurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.editedItem.name},a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=r,i="".concat(p,"/api/purchase-order-items"),c={headers:s,method:"POST",url:i,data:o},t.prev=5,t.next=8,g()(c);case 8:t.sent,e.successMessage="Added",e.success=!0,setTimeout((function(){e.success=!1}),5e3),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](5),e.error=!0,e.errorMessage=t.t0;case 18:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},loadPurchaseItems:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/purchase-order-items"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.purchaseItems=i.data.purchaseOrderItems.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.backupPurchaseItems=e.purchaseItems;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.purchaseItems.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.purchaseItems.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this,t=this.purchaseItems.indexOf(this.item);this.purchaseItems.splice(t,1),this.purchaseItems=this.purchaseItems.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),this.deletePurchaseItem().then((function(){e.successAlert("Deleted"),e.closeDelete()})).catch((function(t){e.errorAlert(t)}))},deletePurchaseItem:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/purchase-order-items/").concat(e._id),s={headers:a,method:"DELETE",url:n};return g()(s)},t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return n=Object(ie["a"])({},e.item),t.next=8,r(n);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300),this.resetValidation()},closeDelete:function(){this.deleteDialog=!1},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},save:function(){var e=this;this.editedIndex>-1?this.updatePurchaseItem().then((function(){e.successAlert("Updated"),e.loadPurchaseItems(),e.resetValidation(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})):this.saveNewPurchaseItem().then((function(){})).catch((function(e){}))}},components:{Navbar:q},mixins:[le]},An=Tn,En=(r("a3f9"),Object(y["a"])(An,Vn,Dn,!1,null,null,null)),Nn=En.exports;C()(En,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Mn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Point")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.points,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0 ",attrs:{cols:"12",lg:"6",md:"4",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"4",md:"4",sm:"12"}},[r("v-select",{attrs:{dense:"",items:e.pointOwners,outlined:"","item-text":"name",label:"Point Owner","return-object":"",color:"primary_red_1",rules:e.selectedUserRules},on:{change:e.selectPointOwner},model:{value:e.pointOwner,callback:function(t){e.pointOwner=t},expression:"pointOwner"}})],1),r("v-col",{staticClass:"py-0 ",attrs:{cols:"12",lg:"2",md:"4",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Point")]),r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},[r("v-icon",[e._v(" mdi-arrow-expand ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,2627700984)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{dense:"",outlined:"",items:e.users,"item-text":"name",label:"Dealer","return-object":"",color:"primary_red_1",rules:e.selectedUserRules},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Point",rules:e.pointRules},model:{value:e.editedItem.point,callback:function(t){e.$set(e.editedItem,"point",t)},expression:"editedItem.point"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{color:"primary_red_1",label:"Purchase Order Id",rules:e.purchaseOrderIdRules},model:{value:e.editedItem.purchaseOrderId,callback:function(t){e.$set(e.editedItem,"purchaseOrderId",t)},expression:"editedItem.purchaseOrderId"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},zn=[],Un={mounted:function(){var e=this;Promise.all([this.loadPoint(),this.loadUser()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",valid:!0,userIdRules:[function(e){return e>0||"User Id is required"}],purchaseOrderIdRules:[function(e){return!!e||"Purchase Order Id is required"}],pointRules:[function(e){return e>0||"Point is required"}],selectedUserRules:[function(e){return!!e||"User is required"}],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"User",value:"userId.name"},{text:"Point",value:"point"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,editedIndex:-1,editedItem:{_id:"",userId:"",purchaseOrderId:"",point:0},defaultItem:{_id:"",userId:"",purchaseOrderId:"",point:0},points:[],backupPoints:[],users:[],pointOwners:[{name:"Dealer",param:"dealer"},{name:"Depot",param:"depot"},{name:"All",param:""}],pointOwner:{name:"All",param:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Point":"Edit Point"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"User",value:"userId.name"},{text:"Point",value:"point"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"User",value:"userId.name"},{text:"Role",value:"userId.role.roleId.name"},{text:"Point",value:"point"},{text:"Purchase Order Id",value:"purchaseOrderId"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},selectPointOwner:function(){var e=this;if(""==this.pointOwner.param)this.points=this.backupPoints;else{var t=this.backupPoints.filter((function(t){return t.userId.role.roleId.name==e.pointOwner.param}));this.points=t}},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/points?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=12;break}return t.next=8,r();case 8:n=t.sent,e.backupPoints=n.data.points.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),console.log(n.data),e.points=e.backupPoints;case 12:case"end":return t.stop()}}),t)})))()},loadUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users?role=dealer"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users;case 9:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},updatePoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/points/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,point:e.editedItem.point,userId:e.editedItem.userId,purchaseOrderId:e.editedItem.purchaseOrderId},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewPoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/points"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={point:e.editedItem.point,userId:e.editedItem.userId,purchaseOrderId:e.editedItem.purchaseOrderId},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadPoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/points"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.backupPoints=i.data.points.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.points=e.backupPoints;case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.points.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.points.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deletePoint().then((function(){var t=e.points.indexOf(e.item);e.points.splice(t,1),e.points=e.points.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deletePoint:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),a=t.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/points/").concat(r._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updatePoint().then((function(){Object.assign(e.points[e.editedIndex],e.editedItem),e.closeEditOrNew(),e.loadPoint(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewPoint().then((function(){e.loadPoint(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le]},Ln=Un,Bn=(r("b442"),Object(y["a"])(Ln,Mn,zn,!1,null,null,null)),$n=Bn.exports;C()(Bn,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Fn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("User")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.users,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"5",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"3",md:"6",sm:"12"}},[r("v-select",{attrs:{dense:"",items:e.userRoles,outlined:"","item-text":"name",label:"User Role","return-object":"",color:"primary_red_1"},on:{change:e.selectUserRole},model:{value:e.userRole,callback:function(t){e.userRole=t},expression:"userRole"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"4",md:"12",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{disabled:e.userImport.isImporting,dark:!e.userImport.isImporting,color:"primary_red_1"},on:{click:e.openDialogImport}},a),[e.userImport.isImporting?r("v-progress-circular",{staticClass:"mr-2",attrs:{size:20,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),r("v-icon",[e._v("mdi-file-import")])],1)]}}],null,!1,1321787320)},[r("span",[e._v("Import CSV")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialogMonitoringImport=!0}}},a),[r("v-icon",[e._v("mdi-progress-upload")])],1)]}}],null,!1,154463025)},[r("span",[e._v("Import Progress")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialogUserStoreAddress=!0}}},a),[r("v-icon",[e._v("mdi-plus-box")])],1)]}}],null,!1,4008133673)},[r("span",[e._v("New User")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},a),[r("v-icon",[e._v("mdi-arrow-expand")])],1)]}}],null,!1,3649623414)},[r("span",[e._v("Expand Table")])])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.openDialogChangePassword(a)}}},n),[e._v("mdi-lock")])]}}],null,!0)},[r("span",[e._v("Change Password")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1974557355)})],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogChangePassword,callback:function(t){e.dialogChangePassword=t},expression:"dialogChangePassword"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Change Password")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v(" Change password for user "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s('"'+this.changePassword.name+'"'))])])]),r("v-form",{ref:"formChangePassword",attrs:{"lazy-validation":""},model:{value:e.validChangePassword,callback:function(t){e.validChangePassword=t},expression:"validChangePassword"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password",color:"primary_red_1",rules:[e.rules.required,e.rules.min]},model:{value:e.changePassword.password,callback:function(t){e.$set(e.changePassword,"password",t)},expression:"changePassword.password"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogChangePassword}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.saveChangePassword}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImportUser,callback:function(t){e.dialogImportUser=t},expression:"dialogImportUser"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplateUser}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[e.isProgressImport?r("v-progress-circular",{attrs:{size:30,width:3,color:"primary_red_1",indeterminate:""}}):e._e(),e.isProgressImport?r("div",{staticClass:"ml-3 primary_grey_1--text"},[e._v("importing")]):e._e(),r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"1200px"},model:{value:e.dialogUserStoreAddress,callback:function(t){e.dialogUserStoreAddress=t},expression:"dialogUserStoreAddress"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"formUserStoreAddress",attrs:{"lazy-validation":""},model:{value:e.validUserStoreAddress,callback:function(t){e.validUserStoreAddress=t},expression:"validUserStoreAddress"}},[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",{staticClass:"font-weight-thin display-1"},[e._v("User")])]),r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[null==e.userImage&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}})],1):e._e(),null!=e.userImage?r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:e.userImageUrl}})],1):e._e()],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFileUserImage}},[e._v("image")]),r("input",{ref:"fileInputUserImage",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onUserImageFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.userImageErrorMessage))])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.nameRules,label:"Name",color:"primary_red_1"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.emailRules,label:"Email",color:"primary_red_1"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.phoneRules,label:"Phone",color:"primary_red_1"},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.customerIdRules,label:"Customer Id",color:"primary_red_1"},model:{value:e.editedItem.customerId,callback:function(t){e.$set(e.editedItem,"customerId",t)},expression:"editedItem.customerId"}})],1),-1==e.editedIndex||"depot"==e.editedItem.role.name?r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{label:"Dealer Customer ID",color:"primary_red_1"},model:{value:e.editedItem.dealerCustomerId,callback:function(t){e.$set(e.editedItem,"dealerCustomerId",t)},expression:"editedItem.dealerCustomerId"}})],1):e._e(),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.roles,label:"Role",rules:e.roleRules,"item-text":"name","return-object":""},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),-1==e.editedIndex?r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.passwordRules.concat([e.rules.min]),label:"Password",color:"primary_red_1",type:e.showPassword?"text":"password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off"},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1):e._e()],1),e.showStoreForm()?r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",{staticClass:"font-weight-thin display-1"},[e._v("Store")])]),r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[null==e.storeImage&&-1!==e.editedIndex&&""!==e.editedItem.storeId.image?r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:e.apiImage(e.editedItem.storeId.image)}})],1):e._e(),null!=e.storeImage?r("v-avatar",{attrs:{size:"100"}},[r("v-img",{attrs:{src:e.storeImageUrl}})],1):e._e()],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFileStoreImage}},[e._v("image")]),r("input",{ref:"fileInputStoreImage",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onStoreImageFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.storeImageErrorMessage))])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.storeRules,label:"Store Name",color:"primary_red_1"},model:{value:e.editedItem.storeId.name,callback:function(t){e.$set(e.editedItem.storeId,"name",t)},expression:"editedItem.storeId.name"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.picRules,label:"PIC",color:"primary_red_1"},model:{value:e.editedItem.storeId.pic,callback:function(t){e.$set(e.editedItem.storeId,"pic",t)},expression:"editedItem.storeId.pic"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["H1","H2","H3","H12","H13","H23"],label:"Status",rules:e.statusRules,"item-text":"name","return-object":""},model:{value:e.editedItem.storeId.status,callback:function(t){e.$set(e.editedItem.storeId,"status",t)},expression:"editedItem.storeId.status"}})],1)],1):e._e(),e.showAddressForm()?r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",{staticClass:"font-weight-thin display-1"},[e._v("Address")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.addressRules,label:"Address Name",color:"primary_red_1"},model:{value:e.editedItem.addressId.name,callback:function(t){e.$set(e.editedItem.addressId,"name",t)},expression:"editedItem.addressId.name"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["true","false"],label:"Is Main",rules:e.isMainRules,"item-text":"name","return-object":""},model:{value:e.editedItem.addressId.isMain,callback:function(t){e.$set(e.editedItem.addressId,"isMain",t)},expression:"editedItem.addressId.isMain"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{rules:e.areaRules,label:"Area",color:"primary_red_1"},model:{value:e.editedItem.addressId.area,callback:function(t){e.$set(e.editedItem.addressId,"area",t)},expression:"editedItem.addressId.area"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{label:"Location Latitude",color:"primary_red_1"},model:{value:e.editedItem.addressId.location.latitude,callback:function(t){e.$set(e.editedItem.addressId.location,"latitude",t)},expression:"editedItem.addressId.location.latitude"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{label:"Location Longitude",color:"primary_red_1"},model:{value:e.editedItem.addressId.location.longitude,callback:function(t){e.$set(e.editedItem.addressId.location,"longitude",t)},expression:"editedItem.addressId.location.longitude"}})],1),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-text-field",{attrs:{label:"Description",color:"primary_red_1"},model:{value:e.editedItem.addressId.description,callback:function(t){e.$set(e.editedItem.addressId,"description",t)},expression:"editedItem.addressId.description"}})],1)],1):e._e()],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.dialogUserStoreAddress=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.saveUser}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"900px"},model:{value:e.dialogMonitoringImport,callback:function(t){e.dialogMonitoringImport=t},expression:"dialogMonitoringImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import User")]),r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(t){e.dialogMonitoringImport=!1}}},[e._v("close")])],1),r("v-card-text",[r("v-container",[r("span",{},[e._v("Progress")]),r("span",[e._v(" "+e._s("("+e.currentPosition+" of "+e.json.length+") "+(e.json.length>0?e.roundUp(100*e.currentPosition/e.json.length,2)+"%":""))+" "),e.currentPosition==e.json.length&&e.json.length>0?r("v-chip",{attrs:{small:"",color:"success"}},[e._v("done")]):e._e()],1),r("v-alert",{attrs:{value:e.importError,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.importError,callback:function(t){e.importError=t},expression:"importError"}},[e._v(e._s("error "+e.importErrorMessage+", data number "+e.currentPosition))]),r("v-layout",{staticClass:"mb-2"},[e.importError?r("v-btn",{staticClass:"mr-2",attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.executeImport}},[e._v("continue import")]):e._e(),e.importError?r("v-btn",{attrs:{outlined:"",dark:"",color:"primary_red_1"},on:{click:e.importContinueAll}},[e._v("continue import all")]):e._e()],1),r("v-data-table",{staticClass:"elevation-1",attrs:{"loading-text":"loading import products...",headers:e.jsonHeaders,items:e.json,"sort-by":"index"},scopedSlots:e._u([{key:"item.isSale",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(1==a.isSale?"yes":"no"))])]}},{key:"item.statusImport",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"success"==a.statusImport?"success":"error"==a.statusImport?"primary_red_1":"grey",dark:""}},[e._v(e._s(a.statusImport))])]}}])})],1)],1),r("v-card-actions",[r("v-spacer"),r("div",[r("v-row",[r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-btn",{staticClass:"mx-1",attrs:{text:"",dark:"",color:"blue darken-1"},on:{click:e.downloadImportReport}},[e._v("download import report")])],1)],1),r("v-col",{attrs:{sm:"6"}},[r("v-layout",{attrs:{"justify-center":""}},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.pauseImportState}},a),[r("v-icon",[e._v("mdi-pause")])],1)]}}])},[r("span",[e._v("pause")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.continueImportState}},a),[r("v-icon",[e._v("mdi-play")])],1)]}}])},[r("span",[e._v("continue")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:e.resetImportState}},a),[r("v-icon",[e._v("mdi-stop")])],1)]}}])},[r("span",[e._v("stop")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[r("v-btn",e._g({staticClass:"mx-1",attrs:{small:"",text:"",dark:"",color:"blue darken-1"},on:{click:function(t){e.dialogMonitoringImport=!1}}},a),[r("v-icon",[e._v("mdi-window-minimize")])],1)]}}])},[r("span",[e._v("minimize")])])],1)],1)],1)],1)],1)],1)],1)],1)},Jn=[],qn={mounted:function(){var e=this;Promise.all([this.importStatus(),this.loadUsers(),this.loadRole()]).then((function(){e.isLoading=!1}))},data:function(){return{isProgressImport:!1,dialogUserStoreAddress:!1,validUserStoreAddress:!0,userRoles:[{name:"Admin",param:"admin"},{name:"Dealer",param:"dealer"},{name:"Depot",param:"depot"},{name:"All",param:""}],userRole:{name:"All",param:""},search:"",showPassword:!1,imageUrl:"",image:null,userImageErrorMessage:"",userImageUrl:"",userImage:null,storeImageErrorMessage:"",storeImageUrl:"",storeImage:null,valid:!0,validStore:!0,validAddress:!0,nameRules:[function(e){return!!e||"Name is required"}],customerIdRules:[function(e){return!!e||"Customer Id is required"}],dealerCustomerIdRules:[function(e){return!!e||"Dealer Customer Id is required"}],roleRules:[function(e){return!!e||"Role is required"}],phoneRules:[function(e){return!!e||"Phone is required"}],passwordRules:[function(e){return!!e||"Password is required"}],storeRules:[function(e){return!!e||"Store name is required"}],picRules:[function(e){return!!e||"Pic is required"}],statusRules:[function(e){return!!e||"Status is required"}],areaRules:[function(e){return!!e||"Area is required"}],addressRules:[function(e){return!!e||"Address name is required"}],latitudeRules:[function(e){return!!e||"Latitude is required"}],longitudeRules:[function(e){return!!e||"Longitude is required"}],isMainRules:[function(e){return!!e||"Is Main is required"}],descriptionRules:[function(e){return!!e||"Description is required"}],emailRules:[function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"},confirmOldPasswordRules:function(e,t){return e===t||"confirm password not match"}},imageErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",successUser:!1,errorUser:!1,errorMessageUser:"",successMessageUser:"",successStore:!1,errorStore:!1,errorMessageStore:"",successMessageStore:"",successAddress:!1,errorAddress:!1,errorMessageAddress:"",successMessageAddress:"",dialog:!1,deleteDialog:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,headers:[{text:"Name",value:"name"},{text:"Toko",value:"storeId.name"},{text:"Alamat",value:"addressId.name"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,item:{},users:[],roles:[],editedIndex:-1,editedItem:{_id:"",customerId:"",dealerCustomerId:"",name:"",role:{name:""},email:"",phone:"",password:"",storeId:{_id:"",name:"",userId:"",status:"",pic:""},addressId:{_id:"",name:"",userId:"",area:"",description:"",location:{latitude:"",longitude:""},isMain:"true"}},defaultItem:{_id:"",customerId:"",dealerCustomerId:"",name:"",role:{name:""},email:"",phone:"",password:"",storeId:{_id:"",name:"",userId:"",status:"",pic:""},addressId:{_id:"",name:"",userId:"",area:"",description:"",location:{latitude:"",longitude:""},isMain:"true"}},dialogChangePassword:!1,changePassword:{_id:"",name:"",password:""},validChangePassword:!0,dialogImportUser:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:"",userImport:{_id:"",name:"user",isImporting:!1},json:[],backupI:0,currentPosition:0,continueAll:!1,importError:!1,importErrorMessage:"",continue:!0,jsonHeaders:[{text:"no",value:"no"},{text:"customerId",value:"customerId"},{text:"dealerCustomerId",value:"dealerCustomerId"},{text:"name",value:"name"},{text:"email",value:"email"},{text:"phone",value:"phone"},{text:"role",value:"role"},{text:"store",value:"store"},{text:"pic",value:"pic"},{text:"status",value:"status"},{text:"address",value:"address"},{text:"area",value:"area"},{text:"latitude",value:"latitude"},{text:"longitude",value:"longitude"},{text:"statusImport",value:"statusImport"},{text:"message",value:"message"}],dialogMonitoringImport:!1}},components:{Navbar:q},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"}},watch:{dialog:function(e){e||this.closeEditOrNew()},dialogUserStoreAddress:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadImportReport:function(){var e=this.json,t=[],r=[];for(var a in console.log("templates",e),e=e.length>0?e.map((function(e){return{customerId:e.customerId,dealerCustomerId:e.dealerCustomerId,name:e.name,email:e.email,phone:e.phone,role:e.role,store:e.store,pic:e.pic,status:e.status,address:e.address,area:e.area,latitude:e.latitude,longitude:e.longitude,password:"123456",statusImport:e.statusImport,message:e.message}})):[{customerId:"",dealerCustomerId:"",name:"",email:"",phone:"",role:"",store:"",pic:"",status:"",address:"",area:"",latitude:"",longitude:"",password:"123456",statusImport:"",message:""}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","import-report-users.csv"),document.body.appendChild(o),o.click()},importContinueAll:function(){this.continueAll=!0,this.executeImport()},requestImport:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users/import-users"),o={headers:n,method:"POST",url:s,data:e},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})))()},parsingCsv:function(){var e=JSON.parse(localStorage.getItem("auth")),t=e.token,r={Authorization:"Bearer "+t,"Content-Type":"application/json"},a="".concat(p,"/api/csv-parser/users"),n=new Jt.a;n.append("csv",this.csv);var s={headers:r,method:"POST",url:a,data:n};return g()(s)},submitImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=23;break}return t.prev=4,e.backupI=0,e.currentPosition=0,e.isProgressImport=!0,t.next=10,e.parsingCsv();case 10:a=t.sent,e.isProgressImport=!1,e.dialogImportUser=!1,n=a.data,e.json=n.json,e.json=e.json.map((function(e,t){return Object(ie["a"])({},e,{no:t+1,statusImport:"processing",message:"waiting"})})),e.dialogMonitoringImport=!0,e.executeImport(),t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](4),e.errorAlert(t.t0.response.data);case 23:case"end":return t.stop()}}),t,null,[[4,20]])})))()},executeImport:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=42;break}a=(new Date).valueOf(),e.backupI=e.currentPosition,e.resetImportError(),n=e.backupI;case 8:if(!(n<e.json.length)){t.next=41;break}return t.prev=9,t.next=12,e.requestImport(e.json[n]);case 12:if(s=t.sent,e.json[n].statusImport=s.data.statusImport,e.json[n].message=s.data.message,e.currentPosition=n+1,e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),!e.continue){t.next=21;break}return t.abrupt("continue",38);case 21:return t.abrupt("break",41);case 22:t.next=38;break;case 24:if(t.prev=24,t.t0=t["catch"](9),e.currentPosition%1e3==0&&console.log("imported in ".concat(e.currentPosition," ").concat((new Date).valueOf()-a,"ms")),console.log(t.t0.response),e.currentPosition=n+1,e.json[n].statusImport=t.t0.response.data.statusImport,e.json[n].message=t.t0.response.data.message,e.importErrorMessage=t.t0.response.data.message,e.importError=!0,!e.continueAll){t.next=37;break}return t.abrupt("continue",38);case 37:return t.abrupt("break",41);case 38:n++,t.next=8;break;case 41:console.log("imported in ".concat((new Date).valueOf()-a,"ms"));case 42:case"end":return t.stop()}}),t,null,[[9,24]])})))()},resetImportError:function(){this.importError=!1,this.importErrorMessage=""},resetImportState:function(){this.resetImportError(),this.backupI=0,this.currentPosition=0,this.continueAll=!1,this.continue=!0,this.json=[]},continueImportState:function(){this.continue=!0,this.executeImport()},pauseImportState:function(){this.continue=!1},importStatus:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:K.database().ref("import-job").orderByChild("name").equalTo("user").on("value",(function(t){var r;for(var a in console.log("user",t.val()),t.val())r=t.val()[a];e.userImport=r}));case 1:case"end":return t.stop()}}),t)})))()},showStoreForm:function(){return-1==this.editedIndex&&"dealer"==this.editedItem.role.name||this.editedIndex>-1&&"dealer"==this.editedItem.role.name},showAddressForm:function(){return-1==this.editedIndex&&("dealer"==this.editedItem.role.name||"depot"==this.editedItem.role.name)||this.editedIndex>-1&&("dealer"==this.editedItem.role.name||"depot"==this.editedItem.role.name)},validateUserStoreAddress:function(){return this.$refs.formUserStoreAddress.validate()},resetFormUserStoreAddress:function(){this.$refs.formUserStoreAddress.reset()},resetValidationUserStoreAddress:function(){this.$refs.formUserStoreAddress.resetValidation()},onPickFileUserImage:function(){this.$refs.fileInputUserImage.click()},onUserImageFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.userImageUrl=n.result})),n.readAsDataURL(r[0]),this.userImage=r[0],this.userImageErrorMessage=""},onPickFileStoreImage:function(){this.$refs.fileInputStoreImage.click()},onStoreImageFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.storeImageUrl=n.result})),n.readAsDataURL(r[0]),this.storeImage=r[0],this.storeImageErrorMessage=""},createUserStoreAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validateUserStoreAddress(),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b();case 2:if(r=t.sent,!0!==r){t.next=14;break}return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("users",e.userImage),o.append("user",JSON.stringify({name:e.editedItem.name,email:e.editedItem.email,phone:e.editedItem.phone,role:e.editedItem.role.name,customerId:e.editedItem.customerId,password:e.editedItem.password,dealerCustomerId:e.editedItem.dealerCustomerId})),"dealer"==e.editedItem.role.name&&(o.append("stores",e.storeImage),o.append("store",JSON.stringify({name:e.editedItem.storeId.name,customerId:e.editedItem.customerId,pic:e.editedItem.storeId.pic,status:e.editedItem.storeId.status}))),o.append("address",JSON.stringify({name:e.editedItem.addressId.name,customerId:e.editedItem.customerId,isMain:e.editedItem.addressId.isMain,area:e.editedItem.addressId.area,location:{latitude:0===e.editedItem.addressId.location.latitude.length?"-":e.editedItem.addressId.location.latitude,longitude:0===e.editedItem.addressId.location.longitude.length?"-":e.editedItem.addressId.location.longitude},description:0===e.editedItem.addressId.description.length?"-":e.editedItem.addressId.description})),i="".concat(p,"/api/users/store-address"),c={headers:s,method:"POST",url:i,data:o},t.abrupt("return",g()(c));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),!r||!e.userImage){t.next=11;break}if("dealer"!=e.editedItem.role.name||!e.storeImage){t.next=7;break}return t.abrupt("return",a());case 7:if("dealer"===e.editedItem.role.name){t.next=9;break}return t.abrupt("return",a());case 9:t.next=14;break;case 11:throw e.userImage||(e.userImageErrorMessage="User image not selected"),"dealer"!=e.editedItem.role.name||e.storeImage||(e.storeImageErrorMessage="Store image not selected"),new Error("invalid input!");case 14:case"end":return t.stop()}}),t)})))()},updateUserStoreAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.validateUserStoreAddress(),!r){t.next=18;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=16;break}return n=JSON.parse(localStorage.getItem("auth")),s=n.token,o={Authorization:"Bearer "+s,"Content-Type":"multipart/form-data"},i=new Jt.a,i.append("users",e.userImage),i.append("user",JSON.stringify({_id:e.editedItem._id,name:e.editedItem.name,email:e.editedItem.email,phone:e.editedItem.phone,role:e.editedItem.role.name,customerId:e.editedItem.customerId,dealerCustomerId:e.editedItem.dealerCustomerId})),"dealer"==e.editedItem.role.name&&(i.append("stores",e.storeImage),i.append("store",JSON.stringify({_id:e.editedItem.storeId._id,name:e.editedItem.storeId.name,customerId:e.editedItem.customerId,pic:e.editedItem.storeId.pic,status:e.editedItem.storeId.status}))),i.append("address",JSON.stringify({_id:e.editedItem.addressId._id,name:e.editedItem.addressId.name,customerId:e.editedItem.customerId,isMain:e.editedItem.addressId.isMain,area:e.editedItem.addressId.area,location:e.editedItem.addressId.location,description:e.editedItem.addressId.description})),c="".concat(p,"/api/users/store-address/").concat(e.editedItem._id),l={headers:o,method:"PUT",url:c,data:i},t.abrupt("return",g()(l));case 16:t.next=19;break;case 18:throw new Error("invalid input!");case 19:case"end":return t.stop()}}),t)})))()},expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Name",value:"name"},{text:"Toko",value:"storeId.name"},{text:"Alamat",value:"addressId.name"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Customer Id",value:"customerId"},{text:"Dealer Customer Id",value:"dealerCustomerId"},{text:"Role",value:"role.name"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Toko",value:"storeId.name"},{text:"Alamat",value:"addressId.name"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},selectUserRole:function(){this.loadUsers()},downloadTemplateUser:function(){var e=this.users,t=[],r=[];for(var a in e=e.length>0?e.map((function(e){return{customerId:e.customerId,dealerCustomerId:e.dealerCustomerId,name:e.name,email:e.email,phone:e.phone,role:e.role.name,store:e.storeId?e.storeId.name:"",pic:e.storeId?e.storeId.pic:"",status:e.storeId?e.storeId.status:"",address:e.addressId?e.addressId.name:"",area:e.addressId?e.addressId.area:"",latitude:e.addressId&&e.addressId.location?e.addressId.location.latitude:"",longitude:e.addressId&&e.addressId.location?e.addressId.location.longitude:"",password:"123456"}})):[{customerId:"",name:"",email:"",phone:"",role:"",store:"",pic:"",status:"",address:"",area:"",latitude:"",longitude:"",password:"123456"}],e[0])t.push(a);r=e.map((function(e){return t.map((function(t){return e[t]}))}));var n=[t].concat(Object(ae["a"])(r)),s="";n.forEach((function(e){e.forEach((function(e){s+=e+dt})),s+="\r\n"})),s="data:application/csv,"+encodeURIComponent(s);var o=document.createElement("A");o.setAttribute("href",s),o.setAttribute("download","users-template.csv"),document.body.appendChild(o),o.click()},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImportUser=!0},fileSize:function(e){if(e>=1024&&e<1048576){var t=e/1024;return t=this.roundUp(t,2),"(".concat(t," KB)")}if(e>=1048576){var r=e/1048576;return r=this.roundUp(r,2),"(".concat(r," MB)")}},closeDialogImport:function(){this.dialogImportUser=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"multipart/form-data"},n=new Jt.a;n.append("csv",e);var s="".concat(p,"/api/users/bulk"),o={headers:a,method:"POST",url:s,data:n};return g()(o)},!e.csv){t.next=18;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=16;break}return t.prev=6,t.next=9,r(e.csv);case 9:return n=t.sent,t.abrupt("return",n);case 13:throw t.prev=13,t.t0=t["catch"](6),new Error(JSON.stringify(t.t0.response.data.message));case 16:t.next=20;break;case 18:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 20:case"end":return t.stop()}}),t,null,[[6,13]])})))()},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users?role=&keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},validatePassword:function(){return this.$refs.formChangePassword.validate()},resetFormPassword:function(){this.$refs.formChangePassword.reset()},resetValidationPassword:function(){this.$refs.formChangePassword.resetValidation()},openDialogChangePassword:function(e){this.changePassword._id=e._id,this.changePassword.name=e.name,this.dialogChangePassword=!0},closeDialogChangePassword:function(){this.dialogChangePassword=!1,this.changePassword={_id:"",name:"",password:""},this.resetValidationPassword()},saveChangePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/auth/admin/update-password"),o={method:"POST",headers:a,url:s,data:n};return g()(o)},t.prev=1,a=e.validatePassword(),!a){t.next=10;break}return t.next=6,r(e.changePassword);case 6:e.successAlert("Password updated"),e.closeDialogChangePassword(),t.next=11;break;case 10:e.errorAlert("invalid input!");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),e.errorAlert(t.t0.response.data.message);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},resetErrorMessageUserStoreAddress:function(){this.userImageErrorMessage="",this.storeImageErrorMessage=""},emptyFormDataUserStoreAddress:function(){this.userImage=null,this.userImageUrl="",this.storeImage=null,this.storeImageUrl=""},updateUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s=new Jt.a,s.append("image",r),s.append("name",t.name.trim()),s.append("customerId",t.customerId.trim()),s.append("role",t.role.trim()),s.append("email",t.email.trim()),s.append("phone",t.phone.trim()),o={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},i="".concat(p,"/api/users/").concat(t._id),c={headers:o,method:"PUT",url:i,data:s},e.prev=11,e.next=14,g()(c);case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e["catch"](11),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=12;break}return n={_id:e.editedItem._id,name:e.editedItem.name,customerId:e.editedItem.customerId,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone},console.log("update user",n),t.next=7,b();case 7:if(s=t.sent,!0!==s){t.next=10;break}return t.abrupt("return",r(n,e.image));case 10:t.next=13;break;case 12:throw new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},saveNewUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,Accept:"application/json","Content-Type":"application/json"},o=new Jt.a,o.append("image",r),o.append("name",t.name.trim()),o.append("customerId",t.customerId.trim()),o.append("role",t.role.trim()),o.append("email",t.email.trim()),o.append("phone",t.phone.trim()),o.append("password",t.password.trim()),i="".concat(p,"/api/auth/signup"),c={headers:s,method:"POST",url:i,data:o},e.prev=12,e.next=15,g()(c);case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e["catch"](12),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,customerId:e.editedItem.customerId,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone,password:e.editedItem.password},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},loadUsers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users?role=").concat(e.userRole.param),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t,storeId:"admin"===e.role.name?{name:"",status:""}:e.storeId,addressId:"admin"===e.role.name?{name:"",area:"",description:"",isMain:"true",location:{latitude:"",longitude:""}}:Object(ie["a"])({},e.addressId,{isMain:e.addressId?e.addressId.isMain.toString():"isMain"})})})),console.log(e.users);case 10:case"end":return t.stop()}}),t)})))()},loadRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/roles"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.roles=n.data.roles;case 9:case"end":return t.stop()}}),t)})))()},successAlert:function(e){this.successMessage=e,this.success=!0},errorAlert:function(e){this.errorMessage=e,this.error=!0},editItem:function(e){this.editedIndex=this.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialogUserStoreAddress=!0},deleteItem:function(e){this.item=e,this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteUser().then((function(){var t=e.users.indexOf(e.item);e.users.splice(t,1),e.users=e.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialogUserStoreAddress=!1,this.resetValidationUserStoreAddress(),this.emptyFormDataUserStoreAddress(),this.resetErrorMessageUserStoreAddress(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},saveUser:function(){var e=this;this.editedIndex>-1?this.updateUserStoreAddress().then((function(t){console.log(t),e.loadUsers(),e.successAlert("Updated"),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})):this.createUserStoreAddress().then((function(){e.loadUsers(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){console.log(t),e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}},mixins:[ut]},Gn=qn,Hn=(r("24ee"),Object(y["a"])(Gn,Fn,Jn,!1,null,null,null)),Wn=Hn.exports;C()(Hn,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VProgressCircular:gt["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Qn=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Dealer")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.dealers,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)],1)],1)],1)]},proxy:!0},{key:"item.storeId.name",fn:function(t){var a=t.item;return[a.storeId?e._e():r("v-chip",{attrs:{small:"",dark:"",color:"primary_red_1"}},[e._v(e._s("Belum ada toko"))]),a.storeId?r("div",[e._v(e._s(a.storeId.name))]):e._e()]}},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.openDialogChangePassword(a)}}},n),[e._v("mdi-lock")])]}}],null,!0)},[r("span",[e._v("Change Password")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,383876229)})],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-row",[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e()],1)],1)],1):e._e(),null!=e.image?r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1)],1)],1):e._e(),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",color:"primary_red_1",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Customer Id",color:"primary_red_1",rules:e.customerIdRules},model:{value:e.editedItem.customerId,callback:function(t){e.$set(e.editedItem,"customerId",t)},expression:"editedItem.customerId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.roles,label:"Role",rules:e.roleRules,"item-text":"name","return-object":""},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Email",color:"primary_red_1",rules:e.emailRules},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Phone",color:"primary_red_1",rules:e.phoneRules},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.imageErrorMessage))])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogChangePassword,callback:function(t){e.dialogChangePassword=t},expression:"dialogChangePassword"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Change Password")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v(" Change password for user "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s('"'+this.changePassword.name+'"'))])])]),r("v-form",{ref:"formChangePassword",attrs:{"lazy-validation":""},model:{value:e.validChangePassword,callback:function(t){e.validChangePassword=t},expression:"validChangePassword"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password",color:"primary_red_1",rules:[e.rules.required,e.rules.min]},model:{value:e.changePassword.password,callback:function(t){e.$set(e.changePassword,"password",t)},expression:"changePassword.password"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogChangePassword}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.saveChangePassword}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v("Download template untuk import data dalam bentuk Microsoft Excel (xls)")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(e._s(e.csvErrorMessage))])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},Kn=[],Yn={mounted:function(){var e=this;Promise.all([this.loadDealers(),this.loadRole()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",showPassword:!1,imageUrl:"",image:null,valid:!0,nameRules:[function(e){return!!e||"Name is required"}],customerIdRules:[function(e){return!!e||"Customer Id is required"}],roleRules:[function(e){return!!e||"Role is required"}],phoneRules:[function(e){return!!e||"Phone is required"}],passwordRules:[function(e){return!!e||"Password is required"}],emailRules:[function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"},confirmOldPasswordRules:function(e,t){return e===t||"confirm password not match"}},imageErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",dialog:!1,deleteDialog:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"User Id",value:"_id"},{text:"Customer Id",value:"customerId"},{text:"Role",value:"role.name"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Toko",value:"storeId.name"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}],item:{},dealers:[],roles:[],editedIndex:-1,editedItem:{_id:"",name:"",customerId:"",role:null,email:"",phone:"",password:""},defaultItem:{_id:"",name:"",customerId:"",role:null,email:"",phone:"",password:""},dialogChangePassword:!1,changePassword:{_id:"",name:"",password:""},validChangePassword:!0,dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},components:{Navbar:q},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"multipart/form-data"},s=new Jt.a,s.append("csv",t),o="".concat(p,"/api/master-products/bulk"),i={headers:n,method:"POST",url:o,data:s},e.prev=6,e.next=9,g()(i);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e["catch"](6),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users?role=dealer&keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.dealers=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},validatePassword:function(){return this.$refs.formChangePassword.validate()},resetFormPassword:function(){this.$refs.formChangePassword.reset()},resetValidationPassword:function(){this.$refs.formChangePassword.resetValidation()},openDialogChangePassword:function(e){this.changePassword._id=e._id,this.changePassword.name=e.name,this.dialogChangePassword=!0},closeDialogChangePassword:function(){this.dialogChangePassword=!1,this.changePassword={_id:"",name:"",password:""},this.resetValidationPassword()},saveChangePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/auth/admin/update-password"),o={method:"POST",headers:a,url:s,data:n};return g()(o)},t.prev=1,a=e.validatePassword(),!a){t.next=10;break}return t.next=6,r(e.changePassword);case 6:e.successAlert("Password updated"),e.closeDialogChangePassword(),t.next=11;break;case 10:e.errorAlert("invalid input!");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),e.errorAlert(t.t0.response.data.message);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},onPickFile:function(){this.$refs.fileInput.click()},emptyFormData:function(){this.image=null,this.imageUrl=""},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},updateDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("customerId",t.customerId),o.append("role",t.role),o.append("email",t.email),o.append("phone",t.phone),i="".concat(p,"/api/users/").concat(t._id),c={headers:s,method:"PUT",url:i,data:o},e.prev=11,e.next=14,g()(c);case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e["catch"](11),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,customerId:e.editedItem.customerId,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("customerId",t.customerId),o.append("role",t.role),o.append("email",t.email),o.append("phone",t.phone),o.append("password",t.password),i="".concat(p,"/api/auth/signup"),c={headers:s,method:"POST",url:i,data:o},e.prev=12,e.next=15,g()(c);case 15:return e.abrupt("return",e.sent);case 18:throw e.prev=18,e.t0=e["catch"](12),new Error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[12,18]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,customerId:e.editedItem.customerId,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone,password:e.editedItem.password},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},loadDealers:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users?role=dealer"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.dealers=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},loadRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/roles"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.roles=n.data.roles.filter((function(e){return"dealer"===e.name}));case 9:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},editItem:function(e){this.editedIndex=this.dealers.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e,this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteDealer().then((function(){var t=e.dealers.indexOf(e.item);e.dealers.splice(t,1),e.dealers=e.dealers.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),this.emptyFormData(),this.resetErrorMessage(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateDealer().then((function(){e.closeEditOrNew(),e.loadDealers(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewDealer().then((function(){e.loadDealers(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}}},Zn=Yn,Xn=(r("c0d0"),Object(y["a"])(Zn,Qn,Kn,!1,null,null,null)),es=Xn.exports;C()(Xn,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var ts=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Dealer Detail")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),e._l(e.dealer,(function(t,a){return r("v-list",{key:a,attrs:{subheader:"","three-line":""}},["image"!=a?r("v-list-item",[r("v-list-item-content",[r("v-list-item-subtitle",[e._v(e._s(a))]),r("v-list-item-title",[e._v(e._s(t))])],1)],1):e._e(),"image"==a?r("div",[r("div",[e._v(e._s(a))]),r("v-avatar",{staticClass:"mr-2"},["Total"!=a?r("v-img",{attrs:{src:e.apiImage(t)}}):e._e()],1)],1):e._e()],1)})),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.storeHeaders,items:e.stores,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"2",md:"6",sm:"12"}},[r("div",{staticClass:"display-1"},[e._v("Store")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"4",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.highestPrice}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}}],null,!1,2910144725)})],r("v-row",[r("v-col")],1),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.addressHeaders,items:e.addresses,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"2",md:"6",sm:"12"}},[r("div",{staticClass:"display-1"},[e._v("Address")])]),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"4",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)],1)],1)],1)]},proxy:!0},{key:"item.storeId.name",fn:function(t){var a=t.item;return[r("div",[e._v(" "+e._s(null==a.storeId?"Belum ada toko":a.storeId.name)+" ")])]}},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}},{key:"item.isMain",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"true"==a.isMain?"success":"primary_red_1",dark:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(e._s(a.isMain))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,1176359252)})],r("v-row",[r("v-col")],1)],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-row",[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e()],1)],1)],1):e._e(),null!=e.image?r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1)],1)],1):e._e(),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",color:"primary_red_1",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.roles,label:"Role",rules:e.roleRules,"item-text":"name","return-object":""},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Email",color:"primary_red_1",rules:e.emailRules},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Phone",color:"primary_red_1",rules:e.phoneRules},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password",color:"primary_red_1",rules:e.passwordRules},model:{value:e.editedItem.password,callback:function(t){e.$set(e.editedItem,"password",t)},expression:"editedItem.password"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.imageErrorMessage)+" ")])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},rs=[],as={mounted:function(){var e=this;Promise.all([this.loadRole(),this.loadAddress(),this.loadStore(),this.loadCurrentDealer()]).then((function(){e.isLoading=!1}))},data:function(){return{imageUrl:"",image:null,valid:!0,nameRules:[function(e){return!!e||"Name is required"}],roleRules:[function(e){return!!e||"Role is required"}],phoneRules:[function(e){return!!e||"Phone is required"}],passwordRules:[function(e){return!!e||"Password is required"}],emailRules:[function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}],userRules:[function(e){return!!e||"User is required"}],isMainRules:[function(e){return!!e||"Is Main is required"}],descriptionRules:[function(e){return!!e||"Area is required"}],imageErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",dialog:!1,deleteDialog:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Role",value:"role.name"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Toko",value:"storeId.name"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}],item:{},roles:[],editedIndex:-1,editedItem:{_id:"",name:"",role:null,email:"",phone:"",password:""},defaultItem:{_id:"",name:"",role:null,email:"",phone:"",password:""},addresses:[],addressHeaders:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"User Id",value:"userId.name"},{text:"Description",value:"description"},{text:"Is Main",value:"isMain"},{text:"Actions",value:"action",sortable:!1}],addressEditedIndex:-1,addressEditedItem:{_id:"",name:"",userId:null,description:"",isMain:""},addressDefaultItem:{_id:"",name:"",userId:null,description:"",isMain:""},stores:[],storeHeaders:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"User Id",value:"userId.name"},{text:"Area",value:"area"},{text:"Latitude",value:"location.latitude"},{text:"Longitude",value:"location.longitude"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}],storeEditedIndex:-1,storeEditedItem:{_id:"",name:"",userId:null,area:""},storeDefaultItem:{_id:"",name:"",userId:null,area:""},dealer:{}}},components:{Navbar:q},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{loadCurrentDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users/").concat(t),o={headers:n,method:"GET",url:s},e.next=6,g()(o);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=10;break}return n=e.$route.params.dealerId,t.next=8,r(n);case 8:s=t.sent,e.dealer=s.data.user;case 10:case"end":return t.stop()}}),t)})))()},loadStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/stores"),s={headers:a,method:"GET",url:n},e.prev=4,e.next=7,g()(s);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.stores=n.data.stores.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},onPickFile:function(){this.$refs.fileInput.click()},emptyFormData:function(){this.image=null,this.imageUrl=""},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},loadAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n=e.$route.params.dealerId,s={Authorization:"Bearer "+a,"Content-Type":"application/json"},o="".concat(p,"/api/addresses?userId=").concat(n),i={headers:s,method:"GET",url:o},t.next=7,g()(i);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.addresses=n.data.addresses.map((function(e,t){return Object(ie["a"])({},e,{isMain:e.isMain.toString(),index:t})}));case 9:case"end":return t.stop()}}),t)})))()},loadRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/roles"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.roles=n.data.roles.filter((function(e){return"dealer"===e.name}));case 9:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},apiImage:function(e){return"".concat(p,"/").concat(e)}}},ns=as,ss=(r("770c"),Object(y["a"])(ns,ts,rs,!1,null,null,null)),os=ss.exports;C()(ss,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VList:M["a"],VListItem:z["a"],VListItemContent:U["a"],VListItemSubtitle:U["b"],VListItemTitle:U["c"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var is=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Depot")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.depots,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)],1)],1)],1)]},proxy:!0},{key:"item.storeId.name",fn:function(t){var a=t.item;return[r("div",[e._v(" "+e._s(null==a.storeId?"Belum ada toko":a.storeId.name)+" ")])]}},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.openDialogChangePassword(a)}}},n),[e._v("mdi-lock")])]}}],null,!0)},[r("span",[e._v("Change Password")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,3894095352)})],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-row",[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null==e.image&&-1!==e.editedIndex&&""!==e.editedItem.image?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e()],1)],1)],1):e._e(),null!=e.image?r("v-row",{attrs:{align:"center"}},[r("v-col",{staticClass:"px-10 pa-lg-5",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-avatar",{attrs:{size:"100%"}},[null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1)],1)],1):e._e(),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",color:"primary_red_1",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Customer Id",color:"primary_red_1",rules:e.customerIdRules},model:{value:e.editedItem.customerId,callback:function(t){e.$set(e.editedItem,"customerId",t)},expression:"editedItem.customerId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.roles,label:"Role",rules:e.roleRules,"item-text":"name","return-object":""},model:{value:e.editedItem.role,callback:function(t){e.$set(e.editedItem,"role",t)},expression:"editedItem.role"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Email",color:"primary_red_1",rules:e.emailRules},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Phone",color:"primary_red_1",rules:e.phoneRules},model:{value:e.editedItem.phone,callback:function(t){e.$set(e.editedItem,"phone",t)},expression:"editedItem.phone"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.imageErrorMessage)+" ")])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogChangePassword,callback:function(t){e.dialogChangePassword=t},expression:"dialogChangePassword"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Change Password")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v(" Change password for user "),r("span",{staticClass:"font-weight-bold"},[e._v(e._s('"'+this.changePassword.name+'"'))])])]),r("v-form",{ref:"formChangePassword",attrs:{"lazy-validation":""},model:{value:e.validChangePassword,callback:function(t){e.validChangePassword=t},expression:"validChangePassword"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Password",color:"primary_red_1",rules:[e.rules.required,e.rules.min]},model:{value:e.changePassword.password,callback:function(t){e.$set(e.changePassword,"password",t)},expression:"changePassword.password"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeDialogChangePassword}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.saveChangePassword}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Download template untuk import data dalam bentuk Microsoft Excel (xls) ")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.csvErrorMessage)+" ")])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},cs=[],ls={mounted:function(){var e=this;Promise.all([this.loadDepot(),this.loadRole()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",showPassword:!1,imageUrl:"",image:null,valid:!0,nameRules:[function(e){return!!e||"Name is required"}],customerIdRules:[function(e){return!!e||"Customer Id is required"}],roleRules:[function(e){return!!e||"Role is required"}],phoneRules:[function(e){return!!e||"Phone is required"}],passwordRules:[function(e){return!!e||"Password is required"}],emailRules:[function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"}],rules:{required:function(e){return!!e||"Required."},min:function(e){return e.length>=6||"Min 6 characters"},emailMatch:function(e){var t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e)||"The email you entered is not valid"},confirmOldPasswordRules:function(e,t){return e===t||"confirm password not match"}},imageErrorMessage:"",success:!1,error:!1,errorMessage:"",successMessage:"",dialog:!1,deleteDialog:!1,isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"User Id",value:"_id"},{text:"Customer Id",value:"customerId"},{text:"Role",value:"role.name"},{text:"Email",value:"email"},{text:"Phone",value:"phone"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}],item:{},depots:[],roles:[],editedIndex:-1,editedItem:{_id:"",name:"",role:null,email:"",phone:"",password:""},defaultItem:{_id:"",name:"",role:null,email:"",phone:"",password:""},dialogChangePassword:!1,changePassword:{_id:"",name:"",password:""},validChangePassword:!0,dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},components:{Navbar:q},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users?role=depot&keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.depots=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},validatePassword:function(){return this.$refs.formChangePassword.validate()},resetFormPassword:function(){this.$refs.formChangePassword.reset()},resetValidationPassword:function(){this.$refs.formChangePassword.resetValidation()},openDialogChangePassword:function(e){this.changePassword._id=e._id,this.changePassword.name=e.name,this.dialogChangePassword=!0},closeDialogChangePassword:function(){this.dialogChangePassword=!1,this.changePassword={_id:"",name:"",password:""},this.resetValidationPassword()},saveChangePassword:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(e){var t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n=e,s="".concat(p,"/api/auth/admin/update-password"),o={method:"POST",headers:a,url:s,data:n};return g()(o)},t.prev=1,a=e.validatePassword(),!a){t.next=11;break}return t.next=6,r(e.changePassword);case 6:t.sent,e.successAlert("Password updated"),e.closeDialogChangePassword(),t.next=12;break;case 11:e.errorAlert("invalid input!");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),e.errorAlert(t.t0.response.data.message);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},onPickFile:function(){this.$refs.fileInput.click()},emptyFormData:function(){this.image=null,this.imageUrl=""},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},updateDepot:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("role",t.role),o.append("email",t.email),o.append("phone",t.phone),i="".concat(p,"/api/users/").concat(t._id),c={headers:s,method:"PUT",url:i,data:o},e.prev=10,e.next=13,g()(c);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e["catch"](10),new Error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewDepot:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("role",t.role),o.append("email",t.email),o.append("phone",t.phone),o.append("password",t.password),i="".concat(p,"/api/auth/signup"),c={headers:s,method:"POST",url:i,data:o},e.prev=11,e.next=14,g()(c);case 14:return e.abrupt("return",e.sent);case 17:throw e.prev=17,e.t0=e["catch"](11),new Error(e.t0);case 20:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,role:e.editedItem.role._id,email:e.editedItem.email,phone:e.editedItem.phone,password:e.editedItem.password},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},loadDepot:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users?role=depot"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.depots=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},loadRole:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/roles"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.roles=n.data.roles.filter((function(e){return"depot"===e.name}));case 9:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},editItem:function(e){this.editedIndex=this.depots.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.depots.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteDealer().then((function(){var t=e.depots.indexOf(e.item);e.depots.splice(t,1),e.depots=e.depots.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/users/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),this.emptyFormData(),this.resetErrorMessage(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateDepot().then((function(){e.closeEditOrNew(),e.loadDepot(),e.successAlert("Updated")})).catch((function(t){e.errorAlert(t)})):this.saveNewDepot().then((function(){e.loadDepot(),e.closeEditOrNew(),e.successAlert("Added")})).catch((function(t){e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}}},us=ls,ds=(r("81f7"),Object(y["a"])(us,is,cs,!1,null,null,null)),ms=ds.exports;C()(ds,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var ps=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Sale")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.sales,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("Product Brand")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.price",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.price}))+" ")])]}},{key:"item.lowestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.lowestPrice}))+" ")])]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.highestPrice}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"},on:{click:function(){}}},[e._v("Reset")])]},proxy:!0}],null,!1,2350020918)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1)],1)},vs=[],fs={mounted:function(){var e=this;Promise.all([this.loadSale()]).then((function(){e.isLoading=!1}))},data:function(){var e;return e={success:!1,error:!1,errorMessage:"",successMessage:"",item:{},sales:[]},Object(Pn["a"])(e,"sales",[]),Object(Pn["a"])(e,"units",[]),Object(Pn["a"])(e,"select",["Vuetify","Programming"]),Object(Pn["a"])(e,"items",["Programming","Design","Vue","Vuetify"]),Object(Pn["a"])(e,"isLoading",!0),Object(Pn["a"])(e,"skeletonLoaderItem",[0,1,2,3,4]),Object(Pn["a"])(e,"lazyImg",u.a),Object(Pn["a"])(e,"dialog",!1),Object(Pn["a"])(e,"deleteDialog",!1),Object(Pn["a"])(e,"headers",[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}]),Object(Pn["a"])(e,"editedIndex",-1),Object(Pn["a"])(e,"editedItem",{_id:"",name:""}),Object(Pn["a"])(e,"defaultItem",{_id:"",name:""}),Object(Pn["a"])(e,"sales",[]),Object(Pn["a"])(e,"tempDelete",0),e},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{updateSale:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={_id:e.editedItem._id,name:e.editedItem.name},a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=r,i="".concat(p,"/api/sale-orders/").concat(r._id),c={headers:s,method:"PUT",url:i,data:o},t.prev=5,t.next=8,g()(c);case 8:return l=t.sent,e.successAlert("Updated"),t.abrupt("return",l);case 13:throw t.prev=13,t.t0=t["catch"](5),e.errorAlert(t.t0),new Error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},saveNewSale:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={name:e.editedItem.name},console.log(r),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=r,i="".concat(p,"/api/sale-orders"),c={headers:s,method:"POST",url:i,data:o},t.prev=5,t.next=8,g()(c);case 8:return l=t.sent,e.successAlert("Added"),t.abrupt("return",l);case 13:throw t.prev=13,t.t0=t["catch"](5),e.errorAlert(t.t0),new Error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(){return t.apply(this,arguments)}}(),t.next=5,b();case 5:if(n=t.sent,!0!==n){t.next=8;break}return t.abrupt("return",a());case 8:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadSale:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/sale-orders"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.sales=i.data.sales.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.sales.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.sales.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteSale().then((function(){var t=e.sales.indexOf(e.item);e.sales.splice(t,1),e.sales=e.sales.map((function(e,t){return Object(ie["a"])({},e,{index:t})}))})),this.closeDelete()},deleteSale:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/sale-orders/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:return c=t.sent,e.successAlert("Deleted"),t.abrupt("return",c);case 12:throw t.prev=12,t.t0=t["catch"](4),e.errorAlert(t.t0),new Error;case 16:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateSale().then((function(){Object.assign(e.sales[e.editedIndex],e.editedItem)})):this.saveNewSale().then((function(){e.sales.push(Object(ie["a"])({},e.editedItem,{index:e.sales.length}))})),this.closeEditOrNew()}},components:{Navbar:q},mixins:[le]},hs=fs,gs=(r("19ab"),Object(y["a"])(hs,ps,vs,!1,null,null,null)),bs=gs.exports;C()(gs,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbar:Qr["a"],VToolbarTitle:_e["a"]});var xs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Sale Item")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.indexedUnits,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("Unit")]),r("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),r("v-spacer"),r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Item")])],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},[e._v("mdi-pencil")]),r("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v("mdi-delete")])]}},{key:"no-data",fn:function(){return[r("v-btn",{attrs:{color:"primary"},on:{click:function(){}}},[e._v("Reset")])]},proxy:!0}],null,!1,839747472)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Description"},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"blue darken-1",text:""}},[e._v("Delete")])],1)],1)],1)],1)},_s=[],ks={mounted:function(){var e=this;Promise.all([this.loadUnit()]).then((function(){e.isLoading=!1}))},data:function(){return{isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Description",value:"description"},{text:"Actions",value:"action",sortable:!1}],editedIndex:-1,editedItem:{_id:"",name:"",description:""},defaultItem:{_id:"",name:"",description:""},units:[],tempDelete:0}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},indexedUnits:function(){return this.units.map((function(e,t){return Object(ie["a"])({},e,{index:t})}))}},watch:{dialog:function(e){e||this.close()}},created:function(){},methods:{loadUnit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/units"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.units=i.data.units;case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.units.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.units.indexOf(e);this.deleteDialog=!0},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){this.editedIndex>-1?Object.assign(this.units[this.editedIndex],this.editedItem):this.units.push(this.editedItem),this.close()}},components:{Navbar:q},mixins:[le]},Is=ks,ys=(r("cc5a"),Object(y["a"])(Is,xs,_s,!1,null,null,null)),ws=ys.exports;C()(ys,{VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VIcon:E["a"],VRow:$["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbar:Qr["a"],VToolbarTitle:_e["a"]});var Cs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Store")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.stores,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Store")]),r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},[r("v-icon",[e._v(" mdi-arrow-expand ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.highestPrice",fn:function(t){var a=t.item;return[r("v-layout",{attrs:{"justify-end":""}},[e._v(" "+e._s(e.numberWithPeriod({currency:"Rp",separator:".",number:a.highestPrice}))+" ")])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)])]}},{key:"item.image",fn:function(t){var a=t.item;return[r("v-avatar",{attrs:{size:"60"}},[r("v-img",{attrs:{src:e.apiImage(a.image)}})],1)]}}],null,!1,4027991450)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-row",[null==e.image&&-1!==e.editedIndex?r("v-img",{attrs:{src:e.apiImage(e.editedItem.image)}}):e._e(),null!=e.image?r("v-img",{attrs:{src:e.imageUrl}}):e._e()],1),r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.dealers,label:"Dealer",rules:e.dealerRules,"item-text":"name","return-object":""},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.dealers,label:"Pic",rules:e.dealerRules,"item-text":"name","return-object":"",disabled:""},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["H1","H2","H3","H12","H23","H13","H123"],label:"Status",rules:e.statusRules,"item-text":"name","return-object":""},model:{value:e.editedItem.status,callback:function(t){e.$set(e.editedItem,"status",t)},expression:"editedItem.status"}})],1),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{attrs:{dark:"",color:"primary_red_1"},on:{click:e.onPickFile}},[e._v("image")]),r("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:e.onFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.imageErrorMessage)+" ")])])],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Download template untuk import data dalam bentuk Microsoft Excel (xls) ")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.csvErrorMessage)+" ")])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},Ps=[],Ss={mounted:function(){var e=this;Promise.all([this.loadStore(),this.loadDealer()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",valid:!0,nameRules:[function(e){return!!e||"Name is required"}],dealerRules:[function(e){return!!e||"Dealer is required"}],picRules:[function(e){return!!e||"pic is required"}],statusRules:[function(e){return!!e||"Status is required"}],imageErrorMessage:"",image:null,imageUrl:"",dealers:[],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},stores:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,editedIndex:-1,editedItem:{_id:"",name:"",userId:null,status:null,pic:null},defaultItem:{_id:"",name:"",userId:null,status:null,pic:null},tempDelete:0,dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Store":"Edit Store"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Status",value:"status"},{text:"Pic",value:"pic"},{text:"User/Dealer",value:"userId.name"},{text:"Image",value:"image"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},downloadTemplate:function(){g.a;var e="http://api.astra.develop:3000/uploads/templates/master-products.xlsx";location.href=e},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),console.log(r[0]),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new Jt.a,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("searching"),r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/stores?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=10;break}return t.next=8,r();case 8:n=t.sent,e.stores=n.data.stores.map((function(e,t){return Object(ie["a"])({index:t},e)}));case 10:case"end":return t.stop()}}),t)})))()},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},loadDealer:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users?role=dealer"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.dealers=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},updateStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("userId",t.userId),o.append("pic",t.userId.name),o.append("status",t.status),i="".concat(p,"/api/stores/").concat(t._id),c={headers:s,method:"PUT",url:i,data:o},e.prev=10,e.next=13,g()(c);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e["catch"](10),new Error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,userId:e.editedItem.userId._id,pic:e.editedItem.userId.name,status:e.editedItem.status},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o=new Jt.a,o.append("image",r),o.append("name",t.name),o.append("userId",t.userId),o.append("pic",t.userId.name),o.append("status",t.status),i="".concat(p,"/api/stores"),c={headers:s,method:"POST",url:i,data:o},e.prev=10,e.next=13,g()(c);case 13:return e.abrupt("return",e.sent);case 16:throw e.prev=16,e.t0=e["catch"](10),new Error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t,r){return e.apply(this,arguments)}}(),a=e.validate(),!e.image||!a){t.next=11;break}return n={name:e.editedItem.name,userId:e.editedItem.userId._id,pic:e.editedItem.userId.name,status:e.editedItem.status},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n,e.image));case 9:t.next=13;break;case 11:throw e.imageErrorMessage="image is required",new Error("invalid input!");case 13:case"end":return t.stop()}}),t)})))()},loadStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/stores"),s={headers:a,method:"GET",url:n},e.prev=4,e.next=7,g()(s);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.stores=n.data.stores.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.stores.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.stores.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this;this.deleteStore().then((function(){var t=e.stores.indexOf(e.item);e.stores.splice(t,1),e.stores=e.stores.map((function(e,t){return Object(ie["a"])({},e,{index:t})})),e.successAlert("Deleted")})),this.closeDelete()},deleteStore:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/stores/").concat(t._id),o={headers:n,method:"DELETE",url:s},e.prev=4,e.next=7,g()(o);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e["catch"](4),new Error;case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}(),a=Object(ie["a"])({},e.item),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",r(a));case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetErrorMessage(),this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateStore().then((function(){e.successAlert("Updated"),e.loadStore(),e.closeEditOrNew()})).catch((function(t){console.log(t),e.errorAlert(t)})):this.saveNewStore().then((function(){e.successAlert("Added"),e.loadStore(),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)}))},apiImage:function(e){return"".concat(p,"/").concat(e)}},components:{Navbar:q},mixins:[le]},Os=Ss,js=(r("7462"),Object(y["a"])(Os,Cs,Ps,!1,null,null,null)),Rs=js.exports;C()(js,{VAlert:vt["a"],VApp:X["a"],VAvatar:S["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VImg:N["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]});var Vs=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("nav",[r("Navbar",{attrs:{main:"tes main"},scopedSlots:e._u([{key:"back",fn:function(){return[r("v-btn",{attrs:{small:"",fab:"",text:"",color:"primary_red_1"},on:{click:function(t){return e.$router.push("/featured")}}},[r("v-icon",[e._v("mdi-chevron-left")])],1)]},proxy:!0},{key:"body",fn:function(){return[r("v-toolbar-title",[e._v("Address")])]},proxy:!0}])})],1),e.isLoading?r("v-content",[r("v-container",[r("v-row",e._l(e.skeletonLoaderItem,(function(e){return r("v-col",{key:e,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"3"}},[r("v-skeleton-loader",{attrs:{type:"list-item-avatar-three-line"}})],1)})),1)],1)],1):e._e(),e.isLoading?e._e():r("v-content",[r("v-container",[r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.success,transition:"scale-transition",dismissible:"",type:"success"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v(e._s(e.successMessage))]),r("v-alert",{staticStyle:{"z-index":"1000"},attrs:{value:e.error,transition:"scale-transition",dismissible:"",type:"error"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v(e._s(e.errorMessage))]),[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.addresses,"sort-by":"index"},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-card",{staticClass:"px-3 py-3",attrs:{flat:""}},[r("v-row",[r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-text-field",{attrs:{outlined:"",dense:"",color:"primary_red_1",label:"Search"},on:{keyup:function(t){return t.type.indexOf("key")||13===t.keyCode?e.searchDataTable(t):null}},scopedSlots:e._u([{key:"append",fn:function(){return[r("v-btn",{attrs:{small:"",text:"",color:"primary_grey_1"},on:{click:e.searchDataTable}},[r("v-icon",[e._v("mdi-magnify")])],1)]},proxy:!0}],null,!1,1107272417),model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",lg:"6",md:"6",sm:"12"}},[r("v-layout",{attrs:{"justify-end":""}},[r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:function(t){e.dialog=!0}}},[e._v("New Address")]),r("v-btn",{staticClass:"ml-2 mb-1",attrs:{color:"primary_red_1",dark:""},on:{click:e.expandHeader}},[r("v-icon",[e._v(" mdi-arrow-expand ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.index",fn:function(t){var a=t.item;return[r("div",[e._v(e._s(a.index+1))])]}},{key:"item.isMain",fn:function(t){var a=t.item;return[r("v-chip",{staticClass:"mx-1",attrs:{small:"",color:"true"==a.isMain?"success":"primary_red_1",dark:""},on:{click:function(t){return e.deleteItem(a)}}},[e._v(e._s(a.isMain))])]}},{key:"item.action",fn:function(t){var a=t.item;return[r("div",{staticClass:"no-services"},[r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(a)}}},n),[e._v("mdi-pencil")])]}}],null,!0)},[r("span",[e._v("Edit")])]),r("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-icon",e._g({attrs:{small:""},on:{click:function(t){return e.deleteItem(a)}}},n),[e._v("mdi-delete")])]}}],null,!0)},[r("span",[e._v("Delete")])])],1)]}}],null,!1,2459583679)})]],2)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),r("v-card-text",[r("v-container",[r("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Name",rules:e.nameRules},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Area",rules:e.areaRules},model:{value:e.editedItem.area,callback:function(t){e.$set(e.editedItem,"area",t)},expression:"editedItem.area"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:e.users,label:"User",rules:e.userRules,"item-text":"name","return-object":""},model:{value:e.editedItem.userId,callback:function(t){e.$set(e.editedItem,"userId",t)},expression:"editedItem.userId"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Description",rules:e.descriptionRules},model:{value:e.editedItem.description,callback:function(t){e.$set(e.editedItem,"description",t)},expression:"editedItem.description"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Latitude",rules:e.latitudeRules},model:{value:e.editedItem.location.latitude,callback:function(t){e.$set(e.editedItem.location,"latitude",t)},expression:"editedItem.location.latitude"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-text-field",{attrs:{label:"Longitude",rules:e.longitudeRules},model:{value:e.editedItem.location.longitude,callback:function(t){e.$set(e.editedItem.location,"longitude",t)},expression:"editedItem.location.longitude"}})],1),r("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[r("v-select",{attrs:{color:"primary_red_1",items:["false","true"],label:"Is Main",rules:e.isMainRules,"return-object":""},model:{value:e.editedItem.isMain,callback:function(t){e.$set(e.editedItem,"isMain",t)},expression:"editedItem.isMain"}})],1)],1)],1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.closeEditOrNew}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v("Save")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete Item")])]),r("v-card-text",[r("v-container",[r("v-row",[r("div",[e._v("Are you sure want do delete this item?")]),r("div",{staticClass:"font-weight-bold"},[e._v(e._s(e.item.name))])])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(t){e.deleteDialog=!1}}},[e._v("Cancel")]),r("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmDelete}},[e._v("Delete")])],1)],1)],1),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogImport,callback:function(t){e.dialogImport=t},expression:"dialogImport"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Import csv")])]),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Download template untuk import data dalam bentuk Microsoft Excel (xls) ")])]),r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{outlined:"",color:"primary_red_1",dark:""},on:{click:e.downloadTemplate}},[e._v("download template")])],1)],1)],1)],1),r("v-divider"),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",lg:"12",md:"12",sm:"12"}},[r("div",[e._v(" Upload data menggunakan file berformat csv (jika menggunakan file Microsoft Excel/xlsx di-save as ke file berformat csv) ")])]),e.csv?r("v-col",{staticClass:"text-center",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-icon",{attrs:{size:"100",color:"primary_red_1"}},[e._v("mdi-file-document")]),r("div",[e._v(e._s(e.csvName))])],1):e._e(),r("v-col",{staticClass:"pb-1",attrs:{cols:"12",sm:"12",md:"12"}},[r("v-btn",{staticClass:"mb-2",attrs:{color:"primary_red_1",dark:""},on:{click:e.onPickFileCsv}},[e._v("csv file")]),r("input",{ref:"fileInputCsv",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.onCsvFilePicked}})],1),r("v-col",{staticClass:"py-0",attrs:{cols:"12",sm:"12",md:"12"}},[r("div",{staticClass:"primary_red_1--text caption"},[e._v(" "+e._s(e.csvErrorMessage)+" ")])])],1)],1)],1),r("v-divider"),r("v-card-actions",{staticClass:"pa-5"},[r("v-spacer"),r("v-btn",{attrs:{outlined:"",color:"blue darken-1",dark:""},on:{click:e.closeDialogImport}},[e._v("Cancel")]),r("v-btn",{attrs:{outlined:"",color:"success darken-1"},on:{click:e.submitImport}},[e._v("import")])],1)],1)],1)],1)},Ds=[],Ts={mounted:function(){var e=this;Promise.all([this.loadAddress(),this.loadUser()]).then((function(){e.isLoading=!1}))},data:function(){return{search:"",valid:!0,nameRules:[function(e){return!!e||"Name is required"}],areaRules:[function(e){return!!e||"Area is required"}],userRules:[function(e){return!!e||"User is required"}],descriptionRules:[function(e){return!!e||"Description is required"}],latitudeRules:[function(e){return!!e||"Latitude is required"}],longitudeRules:[function(e){return!!e||"Longitude is required"}],isMainRules:[function(e){return!!e||"Is Main is required"}],users:[],success:!1,error:!1,errorMessage:"",successMessage:"",item:{},addresses:[],units:[],select:["Vuetify","Programming"],items:["Programming","Design","Vue","Vuetify"],isLoading:!0,skeletonLoaderItem:[0,1,2,3,4],lazyImg:u.a,dialog:!1,deleteDialog:!1,headers:[{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],toggleHeader:!0,editedIndex:-1,editedItem:{_id:"",name:"",userId:null,area:"",description:"",location:{latitude:"",longitude:""},isMain:""},defaultItem:{_id:"",name:"",userId:null,area:"",description:"",location:{latitude:"",longitude:""},isMain:""},dialogImport:!1,csvUrl:"",csv:null,csvName:"",csvErrorMessage:""}},computed:{formTitle:function(){return-1===this.editedIndex?"New Address":"Edit Address"}},watch:{dialog:function(e){e||this.closeEditOrNew()}},created:function(){},methods:{expandHeader:function(){this.toggleHeader=!this.toggleHeader;var e=[{text:"Name",value:"name"},{text:"Actions",value:"action",sortable:!1}],t=[{text:"No",value:"index"},{text:"Name",value:"name"},{text:"Area",value:"area"},{text:"User",value:"userId.name"},{text:"Description",value:"description"},{text:"Latitude",value:"location.latitude"},{text:"Longitude",value:"location.longitude"},{text:"Is Main",value:"isMain"},{text:"Actions",value:"action",sortable:!1}];this.toggleHeader?this.headers=e:this.headers=t},downloadTemplate:function(){},onPickFileCsv:function(){this.$refs.fileInputCsv.click()},onCsvFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.csvUrl=n.result})),n.readAsDataURL(r[0]),this.csv=r[0],this.csvName=r[0].name+" "+this.fileSize(r[0].size),this.csvErrorMessage=""},openDialogImport:function(){this.dialogImport=!0},closeDialogImport:function(){this.dialogImport=!1,this.csvUrl="",this.csv=null,this.csvName=""},importCsv:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r){var a,n,s,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"multipart/form-data"},o=new FormData,o.append("csv",e.csv),i="".concat(p,"/api/master-products/bulk"),c={headers:s,method:"POST",url:i,data:o},t.prev=6,t.next=9,g()(c);case 9:return t.abrupt("return",t.sent);case 12:throw t.prev=12,t.t0=t["catch"](6),new Error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e){return t.apply(this,arguments)}}(),!e.csv){t.next=9;break}return t.next=4,b();case 4:if(a=t.sent,!0!==a){t.next=7;break}return t.abrupt("return",r(e.csv));case 7:t.next=11;break;case 9:throw e.csvErrorMessage="No csv file picked / selected!",new Error("invalid file!");case 11:case"end":return t.stop()}}),t)})))()},submitImport:function(){},searchDataTable:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/addresses?keyword=").concat(e.search),o={headers:n,method:"GET",url:s},t.abrupt("return",g()(o));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.addresses=n.data.addresses.map((function(e,t){return Object(ie["a"])({index:t},e)}));case 9:case"end":return t.stop()}}),t)})))()},stringToBoolean:function(e){return"true"==e},validate:function(){return this.$refs.form.validate()},resetForm:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},resetErrorMessage:function(){this.imageErrorMessage=""},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(e){var t=this,r=e.target.files,a=r[0].name;if(a.lastIndexOf(".")<=0)return alert("Please add a valid file!");var n=new FileReader;n.addEventListener("load",(function(){t.imageUrl=n.result})),n.readAsDataURL(r[0]),this.image=r[0],this.imageErrorMessage=""},loadUser:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("auth")),r=t.token,a={Authorization:"Bearer "+r,"Content-Type":"application/json"},n="".concat(p,"/api/users"),s={headers:a,method:"GET",url:n},e.next=6,g()(s);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=9;break}return t.next=7,r();case 7:n=t.sent,e.users=n.data.users.map((function(e,t){return Object(ie["a"])({},e,{index:t})}));case 9:case"end":return t.stop()}}),t)})))()},updateAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/addresses/").concat(t._id),i={headers:n,method:"PUT",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={_id:e.editedItem._id,name:e.editedItem.name,userId:e.editedItem.userId._id,description:e.editedItem.description,area:e.editedItem.area,location:{latitude:e.editedItem.location.latitude,longitude:e.editedItem.location.longitude},isMain:e.stringToBoolean(e.editedItem.isMain)},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},saveNewAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s=t,o="".concat(p,"/api/addresses"),i={headers:n,method:"POST",url:o,data:s},e.prev=5,e.next=8,g()(i);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e["catch"](5),new Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),a=e.validate(),!a){t.next=11;break}return n={name:e.editedItem.name,userId:e.editedItem.userId._id,description:e.editedItem.description,area:e.editedItem.area,location:{latitude:e.editedItem.location.latitude,longitude:e.editedItem.location.longitude},isMain:e.stringToBoolean(e.editedItem.isMain)},t.next=6,b();case 6:if(s=t.sent,!0!==s){t.next=9;break}return t.abrupt("return",r(n));case 9:t.next=12;break;case 11:throw new Error("invalid input!");case 12:case"end":return t.stop()}}),t)})))()},successAlert:function(e){var t=this;this.successMessage=e,this.success=!0,setTimeout((function(){t.success=!1}),5e3)},errorAlert:function(e){var t=this;this.errorMessage=e,this.error=!0,setTimeout((function(){t.error=!1}),5e3)},loadAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=JSON.parse(localStorage.getItem("auth")),a=r.token,n={Authorization:"Bearer "+a,"Content-Type":"application/json"},s="".concat(p,"/api/addresses"),o={headers:n,method:"GET",url:s},t.next=6,g()(o);case 6:i=t.sent,e.addresses=i.data.addresses.map((function(e,t){return Object(ie["a"])({},e,{isMain:e.isMain.toString(),index:t})}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=3,b();case 3:if(a=t.sent,!0!==a){t.next=6;break}return t.abrupt("return",r());case 6:case"end":return t.stop()}}),t)})))()},editItem:function(e){this.editedIndex=this.addresses.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},deleteItem:function(e){this.item=e;this.addresses.indexOf(e);this.deleteDialog=!0},confirmDelete:function(){var e=this.addresses.indexOf(this.item);this.addresses.splice(e,1),this.addresses=this.addresses.map((function(e,t){return Object(ie["a"])({},e,{isMain:e.isMain.toString(),index:t})})),this.deleteAddress(),this.closeDelete()},deleteAddress:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(ie["a"])({},e.item),a=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var a,n,s,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("auth")),n=a.token,s={Authorization:"Bearer "+n,"Content-Type":"application/json"},o="".concat(p,"/api/addresses/").concat(r._id),i={headers:s,method:"DELETE",url:o},t.prev=4,t.next=7,g()(i);case 7:t.sent,e.successAlert("Deleted"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),e.errorAlert(t.t0);case 14:case"end":return t.stop()}}),t,null,[[4,11]])})));return function(){return t.apply(this,arguments)}}(),t.next=4,b();case 4:if(n=t.sent,!0!==n){t.next=7;break}return t.abrupt("return",a());case 7:case"end":return t.stop()}}),t)})))()},closeEditOrNew:function(){var e=this;this.dialog=!1,this.resetValidation(),setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},closeDelete:function(){this.deleteDialog=!1},save:function(){var e=this;this.editedIndex>-1?this.updateAddress().then((function(){e.loadAddress(),e.successAlert("Updated"),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)})):this.saveNewAddress().then((function(){e.loadAddress(),e.successAlert("Added"),e.closeEditOrNew()})).catch((function(t){e.errorAlert(t)}))}},components:{Navbar:q},mixins:[le]},As=Ts,Es=(r("8e2c"),Object(y["a"])(As,Vs,Ds,!1,null,null,null)),Ns=Es.exports;C()(Es,{VAlert:vt["a"],VApp:X["a"],VBtn:j["a"],VCard:R["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VChip:qe["a"],VCol:D["a"],VContainer:ve["a"],VContent:fe["a"],VDataTable:ht["a"],VDialog:T["a"],VDivider:A["a"],VForm:Ht["a"],VIcon:E["a"],VLayout:he["a"],VRow:$["a"],VSelect:bt["a"],VSkeletonLoader:be["a"],VSpacer:F["a"],VTextField:xe["a"],VToolbarTitle:_e["a"],VTooltip:xt["a"]}),a["default"].use(ne["a"]);var Ms=[{path:"/",name:"home",component:Ie,meta:{auth:!0,title:"Home",roles:["admin","depot","dealer"]}},{path:"/orders",name:"order",component:Le,meta:{auth:!0,title:"Order",roles:["depot","admin"]}},{path:"/user-address",name:"userAddress",component:Jr,meta:{auth:!0,title:"User Address",roles:["admin","depot","dealer"]}},{path:"/list-orders",name:"listOrder",component:We,meta:{auth:!0,title:"List Order",roles:["admin","depot"]}},{path:"/carts",name:"cart",component:Dr,meta:{auth:!0,title:"Cart",roles:["admin","depot"]}},{path:"/user-points",name:"userPoint",component:tt,meta:{auth:!0,title:"User Point",roles:["admin","depot","dealer"]}},{path:"/list-incoming-orders",name:"listIncomingOrder",component:it,meta:{auth:!0,title:"List Incoming Order",roles:["admin","dealer"]}},{path:"/list-sale-items",name:"listSaleItem",component:kt,meta:{auth:!0,title:"List Sale Item",roles:["admin","dealer"]}},{path:"/item-detail/:catalogId",name:"itemDetail",component:St,meta:{auth:!0,title:"Item Detail",roles:["admin","depot"]}},{path:"/item-detail-supplier/:productId",name:"itemDetailSupplier",component:At,meta:{auth:!0,title:"Item Detail Supplier",roles:["admin","depot"]}},{path:"/supplier-storefront/:storeId",name:"supplierStorefront",component:Lt,meta:{auth:!0,title:"Supplier Storefront",roles:["admin","depot"]}},{path:"/storefront/",name:"storefront",component:Kt,meta:{auth:!0,title:"Storefront",roles:["admin","dealer"]}},{path:"/order-success",name:"orderSuccess",component:rr,meta:{auth:!0,title:"Order Success",roles:["admin","depot","dealer"]}},{path:"/order-confirmation/:shoppingCartId",name:"orderConfirmation",component:cr,meta:{auth:!0,title:"Order Confirmation",roles:["admin","depot"]}},{path:"/outcoming-orders/:purchaseOrderId",name:"outcomingOrder",component:vr,meta:{auth:!0,title:"Outcoming Order",roles:["admin","depot"]}},{path:"/incoming-orders/:purchaseOrderId",name:"incomingOrder",component:_r,meta:{auth:!0,title:"Incoming Order",roles:["admin","dealer"]}},{path:"/settings",name:"setting",component:Pr,meta:{auth:!0,title:"Setting",roles:["admin"]}},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))},meta:{auth:!1,title:"About",roles:["admin","depot","dealer"]}},{path:"/login",name:"login",component:Re,meta:{auth:!0,title:"Login",roles:[]}},{path:"/profile",name:"profile",component:zr,meta:{auth:!0,title:"Profile",roles:["admin","depot","dealer"]}},{path:"/items",name:"item",component:Yr,meta:{auth:!0,title:"Item",roles:["admin"]}},{path:"/users",name:"user",component:Wn,meta:{auth:!0,title:"User",roles:["admin"]}},{path:"/dealers",name:"dealer",component:es,meta:{auth:!0,title:"Dealer",roles:["admin"]}},{path:"/dealer-details/:dealerId",name:"dealerDetail",component:os,meta:{auth:!0,title:"Dealer Detail",roles:["admin"]}},{path:"/depots",name:"depot",component:ms,meta:{auth:!0,title:"Depot",roles:["admin"]}},{path:"/promo",name:"promo",component:aa,meta:{auth:!0,title:"Promo",roles:["admin"]}},{path:"/featured",name:"featured",component:Ia,meta:{auth:!0,title:"Featured",roles:["admin"]}},{path:"/report",name:"report",component:Oa,meta:{auth:!0,title:"Report",roles:["admin"]}},{path:"/slides",name:"slide",component:Aa,meta:{auth:!0,title:"Slide",roles:["admin"]}},{path:"/units",name:"unit",component:gn,meta:{auth:!0,title:"Unit",roles:["admin"]}},{path:"/master-products",name:"masterProduct",component:La,meta:{auth:!0,title:"Master Product",roles:["admin"]}},{path:"/products",name:"product",component:Ga,meta:{auth:!0,title:"Product",roles:["admin"]}},{path:"/product-categories",name:"productCategory",component:Za,meta:{auth:!0,title:"Product Category",roles:["admin"]}},{path:"/product-brands",name:"productBrand",component:nn,meta:{auth:!0,title:"Product Brand",roles:["admin"]}},{path:"/product-images",name:"productImages",component:dn,meta:{auth:!0,title:"Product Image",roles:["admin"]}},{path:"/purchases",name:"purchase",component:yn,meta:{auth:!0,title:"Purchase",roles:["admin"]}},{path:"/points",name:"point",component:$n,meta:{auth:!0,title:"Point",roles:["admin"]}},{path:"/purchase-details/:purchaseOrderId",name:"purchaseDetail",component:Rn,meta:{auth:!0,title:"Purchase Detail",roles:["admin"]}},{path:"/purchase-items",name:"purchaseItem",component:Nn,meta:{auth:!0,title:"Purchase Item",roles:["admin"]}},{path:"/sales",name:"sale",component:bs,meta:{auth:!0,title:"Sale",roles:["admin"]}},{path:"/sale-items",name:"saleItem",component:ws,meta:{auth:!0,title:"Sale Item",roles:["admin"]}},{path:"/stores",name:"store",component:Rs,meta:{auth:!0,title:"Store",roles:["admin"]}},{path:"/addresses",name:"address",component:Ns,meta:{auth:!0,title:"Address",roles:["admin"]}}],zs=new ne["a"]({mode:"history",base:"/",routes:Ms});zs.beforeEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){var n,s,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:n=e.sent,s=JSON.parse(localStorage.getItem("currentUser")),s?(o=s.role.name,i=Object(ae["a"])(t.meta.roles),n||"/login"!=t.path||a(),n&&"/login"==t.path?a(r.path):n&&i.includes(o)?a():a("/login")):s||"/login"!=t.path?s||"/login"==t.path||a("/login"):a();case 5:case"end":return e.stop()}}),e)})));return function(t,r,a){return e.apply(this,arguments)}}());var Us=zs,Ls="/api/shopping-carts",Bs=JSON.parse(localStorage.getItem("auth"))||{token:"",exp:0},$s=Bs,Fs={Authorization:"Bearer "+$s.token,"Content-Type":"application/json"},Js="",qs=p,Gs={},Hs={headers:Fs,method:Js,url:qs,data:Gs},Ws=Hs,Qs=function(e){var t=Object(ie["a"])({},Ws);return t.method="GET",t.url="".concat(t.url).concat(Ls,"?").concat(e||""),g()(t)},Ks=JSON.parse(localStorage.getItem("currentUser"))||{_id:"",customerId:"",name:"",email:"",phone:"",image:"",storeId:null,role:{_id:"",name:"",id:""}},Ys=Ks,Zs={state:{carts:[]},mutations:{SET_CARTS:function(e,t){e.carts=t}},actions:{setCarts:function(e){var t=e.commit;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=Ys._id,a="isEmpty=".concat(!1,"&userId=",r,"&page=",0,"&count=",1),e.next=5,Qs(a);case 5:n=e.sent,t("SET_CARTS",n.data),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}},getters:{getCarts:function(e){return e.carts}}},Xs={state:{currentUser:{_id:"",customerId:"",dealerCustomerId:"",name:"",email:"",phone:"",image:"",storeId:null,role:{_id:"",name:"",id:""}}},mutations:{SET_CURRENT_USER:function(e,t){e.currentUser=t}},actions:{setCurrentUser:function(e,t,r){var a=e.commit;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r&&a("SET_CURRENT_USER",Ys),a("SET_CURRENT_USER",t);case 2:case"end":return e.stop()}}),e)})))()}},getters:{getCurrentUser:function(e){return e.currentUser}}};a["default"].use(_["a"]);var eo=new _["a"].Store({modules:{cart:Zs,currentUser:Xs}}),to=eo,ro=r("9483");Object(ro["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var ao=r("f309");a["default"].use(ao["a"]);var no=new ao["a"]({icons:{iconfont:"mdi"},theme:{themes:{light:{primary_red_1:"#FF5858",primary_red_2:"#FFACAC",primary_green_1:"#009200",primary_green_2:"#58FF58",primary_green_3:"#ACFFAC",primary_black_1:"#2C2C2C",primary_grey_1:"#707070",primary_grey_2:"#A3A3A3",primary_grey_3:"#B6B6B6",primary_grey_4:"#C0C0C0",primary_grey_5:"#D8D8D8",primary_grey_6:"#E4E4E4",primary_white_1:"#FFFFFF"}}}}),so=r("0ff26"),oo=r("ee98"),io=r.n(oo);a["default"].config.productionTip=!1,new a["default"]({router:Us,store:to,vuetify:no,VueFire:so["default"],Notifications:io.a,render:function(e){return e(re)}}).$mount("#app")},"59a2":function(e,t,r){},"5a09":function(e,t,r){"use strict";var a=r("aeb4"),n=r.n(a);n.a},"5a23":function(e,t,r){"use strict";var a=r("ff4e"),n=r.n(a);n.a},"61fb":function(e,t,r){},"65d8":function(e,t,r){"use strict";var a=r("0959"),n=r.n(a);n.a},"65f9":function(e,t,r){"use strict";var a=r("8b2c"),n=r.n(a);n.a},"715c":function(e,t,r){},"716e":function(e,t,r){},7462:function(e,t,r){"use strict";var a=r("e82d"),n=r.n(a);n.a},"770c":function(e,t,r){"use strict";var a=r("716e"),n=r.n(a);n.a},"7b78":function(e,t,r){"use strict";var a=r("2b45"),n=r.n(a);n.a},8165:function(e,t,r){},"81f7":function(e,t,r){"use strict";var a=r("abde"),n=r.n(a);n.a},"8b2c":function(e,t,r){},"8e2c":function(e,t,r){"use strict";var a=r("cdab"),n=r.n(a);n.a},"90b2":function(e,t,r){},9490:function(e,t,r){},"94f0":function(e,t,r){"use strict";var a=r("3170"),n=r.n(a);n.a},a399:function(e,t,r){"use strict";var a=r("c523"),n=r.n(a);n.a},a3f9:function(e,t,r){"use strict";var a=r("0bbe"),n=r.n(a);n.a},aaa6:function(e,t,r){"use strict";var a=r("e80a"),n=r.n(a);n.a},aad9:function(e,t,r){},abde:function(e,t,r){},aeb4:function(e,t,r){},b18f:function(e,t,r){"use strict";var a=r("4518"),n=r.n(a);n.a},b442:function(e,t,r){"use strict";var a=r("9490"),n=r.n(a);n.a},b73f:function(e,t,r){"use strict";var a=r("c52c"),n=r.n(a);n.a},be49:function(e,t,r){"use strict";var a=r("055a"),n=r.n(a);n.a},bf80:function(e,t,r){"use strict";var a=r("c739"),n=r.n(a);n.a},bf8f:function(e,t,r){e.exports=r.p+"img/lazy-img.17751db1.jpg"},c0d0:function(e,t,r){"use strict";var a=r("90b2"),n=r.n(a);n.a},c523:function(e,t,r){},c52c:function(e,t,r){},c739:function(e,t,r){},cc5a:function(e,t,r){"use strict";var a=r("61fb"),n=r.n(a);n.a},cdab:function(e,t,r){},cea3:function(e,t,r){},cf05:function(e,t,r){e.exports=r.p+"img/logo.3c593f5c.png"},e2e0:function(e,t,r){},e46a:function(e,t,r){"use strict";var a=r("715c"),n=r.n(a);n.a},e80a:function(e,t,r){},e82d:function(e,t,r){},e8f0:function(e,t,r){},ee2d:function(e,t,r){"use strict";var a=r("59a2"),n=r.n(a);n.a},efca:function(e,t,r){},f1b4:function(e,t,r){},f77b:function(e,t,r){"use strict";var a=r("efca"),n=r.n(a);n.a},f7a1:function(e,t,r){"use strict";var a=r("e8f0"),n=r.n(a);n.a},ff4e:function(e,t,r){}});
//# sourceMappingURL=app.5ae9cdb1.js.map